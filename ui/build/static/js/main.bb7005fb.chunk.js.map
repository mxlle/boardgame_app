{"version":3,"sources":["shared/constants.tsx","custom.d.ts","common/UserConfig.tsx","common/HeaderBar.tsx","i18n.tsx","shared/functions.tsx","just-one/GameList.tsx","common/ActionButton.tsx","shared/apiFunctions.tsx","just-one/JustOneHome.tsx","just-one/components/WordHintInput.tsx","common/PencilAnimation.tsx","just-one/components/WordHint.tsx","common/ColorPicker.tsx","common/NewPlayer.tsx","just-one/components/RoundSelector.tsx","just-one/GameLobby.tsx","just-one/components/WordCard.tsx","just-one/components/WordAdder.tsx","just-one/GamePreparation.tsx","just-one/GameEndView.tsx","just-one/components/GameStats.tsx","just-one/gamePhases/HintWritingView.tsx","just-one/gamePhases/HintComparingView.tsx","just-one/gamePhases/GuessingView.tsx","just-one/gamePhases/SolutionView.tsx","just-one/JustOneGame.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["ThemeMode","apiPort","window","location","hostname","GAME_URL","protocol","GamePhase","UserConfig","this","props","tKey","open","onClose","selectedValue","possibleValues","Dialog","DialogTitle","Trans","i18nKey","List","map","value","ListItem","button","onClick","handleListItemClick","val","key","selected","ListItemText","primary","React","Component","HeaderBar","i18n","useTranslation","userTheme","applyUserTheme","useState","themeConfigOpen","setThemeConfigOpen","languageConfigOpen","setLanguageConfigOpen","language","setLanguage","anchorEl","setAnchorEl","openMenu","event","target","currentTarget","handleMenuClose","currentUserName","localStorage","getItem","availableThemes","AUTO","BRIGHT","DARK","AppBar","position","Toolbar","to","className","IconButton","edge","color","aria-label","Home","Typography","variant","Button","startIcon","AccountCircle","Menu","keepMounted","Boolean","MenuItem","ListItemIcon","BrightnessMedium","Translate","theme","lng","changeLanguage","use","Backend","initReactI18next","init","fallbackLng","debug","initImmediate","interpolation","escapeValue","getCurrentUserId","userId","shortid","characters","setItem","getCurrentUserInGame","game","getUserInGame","players","find","player","id","setDocumentTitle","gameName","document","title","t","checkPrevResult","showSnackbar","wordIndex","End","phase","words","length","round","wordResult","context","prevWord","correctWords","reverse","wrIndex","findIndex","wr","word","wrongWords","trim","toLowerCase","guess","preventDuplicate","GameList","currentUserId","allGames","deleteGame","newGames","filter","Init","onGoingGames","includes","doneGames","createListItem","playersString","p","name","join","component","Link","secondary","host","ListItemSecondaryAction","newGamesList","onGoingGamesList","doneGamesList","Paper","ActionButton","children","loading","CircularProgress","size","loadGames","a","_get","games","loadGame","createGame","_post","endpoint","Promise","resolve","reject","fetch","method","headers","_getAuthHeader","then","data","error","console","addPlayer","_put","updatePlayer","startPreparation","wordsPerPlayer","resolveRound","correct","res","json","body","JSON","stringify","JustOneHome","_interval","_isMounted","bind","handleChange","triggerDeleteGame","state","newGameName","gamesLoading","clearInterval","setState","enqueueSnackbar","gameId","g","action","Fragment","closeSnackbar","_","reason","getInitialGameName","playerId","history","push","TextField","label","onChange","userName","withRouter","withSnackbar","WordHintInput","submitHint","keyPressed","onKeyPress","disabled","Send","PencilAnimation","styleObj1","backgroundColor","styleObj2","borderTopColor","style","WordHint","hint","author","showPencil","showCheck","showInput","showDuplicateToggle","toggleDuplicate","duplicate","styleObj","doShowPencil","isDuplicate","classes","extraClasses","Checkbox","icon","Mood","checkedIcon","MoodBad","checked","allColors","getRandomColor","Math","floor","random","ColorPicker","select","colorButtons","NewPlayer","setColor","currentPlayer","required","RoundSelector","numOfPlayers","options","i","wordCount","count","disableBackdropClick","GameLobby","roundDialogOpen","setPlayerProps","selectNumRounds","api","resultPlayer","setLocalPlayer","setTheme","playerAdded","isHost","isInGame","listOfPlayers","newPlayerName","newPlayerColor","tOptions","WordCard","guesserText","guesser","isGuesser","guessedRight","guesserName","borderColor","WordAdder","index","parseInt","substr","newWords","numOfWords","some","add","wordFields","placeholder","enterDisabled","GamePreparation","addWords","enteredWords","numWordsPerPlayer","myWords","allMyWordsEntered","wordsEntered","myWordCards","GameEndView","shownPrevResult","GameStats","gamePhase","roundHostName","roundHost","currentGuesser","HintWriting","slice","HintComparing","Guessing","Solution","roundCount","rightCount","wrongCount","HintWritingView","shownMessage","currentUser","currentWord","currentHints","hints","hintObj","hintIsMine","authorName","showHint","HintComparingView","showHints","hintIndex","isRoundHost","GuessingView","SolutionView","shownResult","currentGuess","solutionButton2","solutionButton1","JustOneGame","setInterval","currentGame","gameContent","gameStats","Preparation","App","userColor","setUserColor","setUserTheme","prefersDarkMode","useMediaQuery","primaryColor","startsWith","useMemo","createMuiTheme","palette","main","type","classNames","ThemeProvider","fallback","maxSnack","anchorOrigin","vertical","horizontal","square","elevation","path","match","params","Loader","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.bb7005fb.chunk.js","sourcesContent":["// api url\nconst isProd = window.location.hostname === 'justone.okj.name';\nconst apiPort = isProd ? '' : ':9000';\nexport const API_URL = window.location.protocol + '//' + window.location.hostname + apiPort + '/api';\nexport const GAME_URL = API_URL + '/games';\n\n// localStorage keys\nexport const SETTING_ID = 'playerId';\nexport const SETTING_NAME = 'playerName';\nexport const SETTING_COLOR = 'playerColor';\nexport const SETTING_THEME = 'darkTheme';\n\n// app content and theming\nexport const DEFAULT_NUM_WORDS: number = 2; // Two words per player\nexport const DEFAULT_PRIMARY_COLOR = '#43a047';\nexport const DEFAULT_SECONDARY_COLOR = '#d32f2f'; // also error dark\nexport enum ThemeMode {\n    AUTO = 'automatisch',\n    BRIGHT = 'hell',\n    DARK = 'dunkel'\n}","// custom module declarations\n\n// TODO \nexport interface IUser {\n    id: string;\n    name: string;\n    color?: string;\n    enteredWords?: string[];\n}\n\nexport interface IHint {\n    hint: string;\n    author: string;\n    isDuplicate?: boolean\n}\n\nexport enum GamePhase {\n    Init,\n    Preparation,\n    HintWriting,\n    HintComparing,\n    Guessing,\n    Solution,\n    End\n}\n\nexport interface WordResult {\n    word: string;\n    guess: string;\n}\n\nexport interface IGame {\n    id: string;\n    name: string;\n    words: string[];\n    players: IUser[];\n    host: string; // hostId\n    wordsPerPlayer: number;\n\n    round: number;\n    phase: GamePhase;\n    currentWord?: string;\n    currentGuesser?: string;\n    currentGuess?: string;\n    guessedRight?: boolean;\n    roundHost?: string;\n    hints: IHint[];\n    correctWords: WordResult[];\n    wrongWords: WordResult[];\n}","import React from 'react';\nimport { List, ListItem, ListItemText, DialogTitle, Dialog } from '@material-ui/core';\nimport { Trans } from 'react-i18next';\n\ntype UserConfigProps = {\n    tKey: string,\n    onClose: (value: string)=>void,\n    selectedValue: string,\n    possibleValues: {val: string, tKey: string}[],\n    open: boolean\n};\n\nexport class UserConfig extends React.Component<UserConfigProps> {\n    render() {\n        const { tKey, open, onClose, selectedValue, possibleValues } = this.props;\n\n        const handleClose = () => {\n            onClose(selectedValue);\n        };\n\n        const handleListItemClick = (value: string) => {\n            onClose(value);\n        };\n\n        return (\n            <Dialog onClose={handleClose} open={open}>\n                <DialogTitle>\n                    <Trans i18nKey={tKey}>Einstellung</Trans>\n                </DialogTitle>\n                <List>\n                    {possibleValues.map((value: {val: string, tKey: string}) => (\n                        <ListItem button onClick={() => handleListItemClick(value.val)} key={value.val} selected={selectedValue === value.val}>\n                            <ListItemText primary={<Trans i18nKey={value.tKey}>{value.val}</Trans>} />\n                        </ListItem>\n                    ))}\n                </List>\n            </Dialog>\n        );\n    }\n}","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Trans, useTranslation } from 'react-i18next';\nimport { AppBar, Toolbar, IconButton, Typography, Button, Menu, MenuItem, ListItemIcon } from '@material-ui/core';\nimport { \n    Home as HomeIcon, \n    AccountCircle as AccountCircleIcon, \n    Translate as TranslateIcon, \n    BrightnessMedium as BrightnessMediumIcon \n} from '@material-ui/icons';\n\nimport { SETTING_NAME, ThemeMode } from '../shared/constants';\n\nimport { UserConfig } from '../common/UserConfig';\n\ntype HeaderBarProps = {\n    userTheme: string,\n    applyUserTheme: (color: string)=>void\n};\n\nexport const HeaderBar = (props: HeaderBarProps) => {\n    const { i18n } = useTranslation();\n    const { userTheme, applyUserTheme } = props;\n    const [themeConfigOpen, setThemeConfigOpen] = React.useState(false);\n    const [languageConfigOpen, setLanguageConfigOpen] = React.useState(false);\n    const [language, setLanguage] = React.useState(i18n.language);\n    const [anchorEl, setAnchorEl] = React.useState(null);\n\n    const openMenu = (event: React.MouseEvent<HTMLButtonElement>) => {\n        const target: any = event.currentTarget; // TODO \n        setAnchorEl(target);\n    };\n\n    const handleMenuClose = () => {\n        setAnchorEl(null);\n    };\n\n    const changeLanguage = (lng: string) => {\n        setLanguage(lng);\n        i18n.changeLanguage(lng);\n    };\n\n    const currentUserName: string|null = localStorage.getItem(SETTING_NAME);\n\n    const availableThemes = [\n        { val: ThemeMode.AUTO, tKey: 'THEMEPICK.AUTO' },\n        { val: ThemeMode.BRIGHT, tKey: 'THEMEPICK.BRIGHT' },\n        { val: ThemeMode.DARK, tKey: 'THEMEPICK.DARK' }\n    ];\n\n    const availableLanguages = [\n        { val: 'de', tKey: 'LANGPICK.DE' },\n        { val: 'en', tKey: 'LANGPICK.EN' }\n    ];\n\n    return (\n        <AppBar position=\"sticky\">\n            <Toolbar>\n                <Link to=\"/\" className=\"ButtonLink\">\n                    <IconButton edge=\"start\" color=\"inherit\" aria-label=\"home\">\n                        <HomeIcon />\n                    </IconButton>\n                </Link>\n                <Typography variant=\"h2\" className=\"appTitle\">\n                    <Trans i18nKey=\"APP_TITLE\">Nur ein Wort!</Trans>\n                </Typography>\n                { \n                    currentUserName ? \n                    <Button onClick={openMenu} className=\"Account-button\" color=\"inherit\" startIcon={<AccountCircleIcon />}>\n                        {currentUserName}\n                    </Button> : \n                    <IconButton onClick={openMenu} edge=\"end\" color=\"inherit\">\n                        <AccountCircleIcon />\n                    </IconButton>\n                }\n                <Menu\n                    anchorEl={anchorEl}\n                    keepMounted\n                    open={Boolean(anchorEl)}\n                    onClose={handleMenuClose}\n                >\n                    <MenuItem onClick={()=>{setThemeConfigOpen(true);handleMenuClose();}}>\n                        <ListItemIcon><BrightnessMediumIcon/></ListItemIcon>\n                        <Trans i18nKey=\"THEMEPICK.HEADING\">Nachtmodus</Trans>\n                    </MenuItem>\n                    <MenuItem onClick={()=>{setLanguageConfigOpen(true);handleMenuClose();}}>\n                        <ListItemIcon><TranslateIcon/></ListItemIcon>\n                        <Trans i18nKey=\"LANGPICK.HEADING\">Sprache</Trans>\n                    </MenuItem>\n                </Menu>\n                <UserConfig \n                    tKey=\"THEMEPICK.HEADING\"\n                    open={themeConfigOpen} \n                    onClose={(theme: string) => { applyUserTheme(theme); setThemeConfigOpen(false); }}\n                    selectedValue={userTheme} \n                    possibleValues={availableThemes}\n                ></UserConfig>\n                <UserConfig \n                    tKey=\"LANGPICK.HEADING\"\n                    open={languageConfigOpen} \n                    onClose={(lng: string) => { changeLanguage(lng); setLanguageConfigOpen(false); }}\n                    selectedValue={language} \n                    possibleValues={availableLanguages}\n                ></UserConfig>\n            </Toolbar>\n        </AppBar>\n    );    \n}\n\nexport default HeaderBar;\n\n","import i18n from 'i18next';\nimport Backend from 'i18next-http-backend';\n//import LanguageDetector from 'i18next-browser-languagedetector'; // TIDI\nimport { initReactI18next } from 'react-i18next';\n\ni18n\n    // load translation using http -> see /public/locales\n    // learn more: https://github.com/i18next/i18next-http-backend\n    .use(Backend)\n    // detect user language\n    // learn more: https://github.com/i18next/i18next-browser-languageDetector\n    //.use(LanguageDetector)\n    // pass the i18n instance to react-i18next.\n    .use(initReactI18next)\n    // init i18next\n    // for all options read: https://www.i18next.com/overview/configuration-options\n    .init({\n        fallbackLng: 'de',\n        debug: true,\n        initImmediate: false,\n\n        interpolation: {\n            escapeValue: false, // not needed for react as it escapes by default\n        },\n    });\n\n// saveMissing: true, // TODO\n\n\nexport default i18n;","import { SETTING_ID } from './constants';\nimport { IGame, IUser, WordResult, GamePhase } from '../custom.d';\nimport shortid from 'shortid';\nimport i18n from '../i18n'; \n\nexport function getCurrentUserId() {\n\tlet userId = localStorage.getItem(SETTING_ID) || '';\n\tif (!userId) {\n\t\tuserId = generateId();\n\t\tlocalStorage.setItem(SETTING_ID, userId);\n\t}\n\treturn userId;\n}\n\nexport function getCurrentUserInGame(game: IGame): IUser|undefined {\n    return getUserInGame(game, getCurrentUserId());\n}\n\nexport function getUserInGame(game: IGame, userId?: string): IUser|undefined {\n    return game.players.find((player: IUser) => player.id === userId);\n}\n\nexport function generateId() {\n\tshortid.characters('0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZüÜ');\n\treturn shortid();\n}\n\nexport function setDocumentTitle(gameName?: string) {\n\tconst appTitleFallback = 'Nur ein Wort!';\n    if (gameName) {\n        document.title = `${i18n.t('APP_TITLE', appTitleFallback)} - ${gameName}`;\n    } else {\n        document.title = i18n.t('APP_TITLE', appTitleFallback);\n    }\n}\n\nexport function checkPrevResult(game: IGame, showSnackbar: any, onClose: ()=>void) {\n\tconst wordIndex = GamePhase.End === game.phase ? game.words.length-1 : game.round-1;\n    if (wordIndex >= 0) {\n        const prevWord = game.words[wordIndex];\n        const correctWords = [...game.correctWords].reverse();\n        let wrIndex: number = correctWords.findIndex((wr: WordResult) => wr.word === prevWord);\n        let wordResult: WordResult, context: string, variant: 'success'|'error';\n        if (wrIndex > -1) {\n            wordResult = correctWords[wrIndex];\n            context = 'CORRECT';\n            variant = 'success';\n        } else {\n            wordResult = game.wrongWords[game.wrongWords.length-1];\n            context = 'WRONG';\n            variant = 'error';\n        }\n        if (wordResult.word.trim().toLowerCase() !== wordResult.guess.trim().toLowerCase()) {\n            showSnackbar(i18n.t('GAME.MESSAGE.PREV_RESULT', 'Runde abgeschlossen', { context: context, word: wordResult.guess }), {\n                variant: variant,\n                preventDuplicate: true,\n                onClose: onClose\n            }); \n        }\n    }\n}","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { \n    List, \n    ListItem, \n    ListItemText, \n    ListItemSecondaryAction, \n    IconButton,\n    Paper,\n    Typography\n} from '@material-ui/core';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport { Trans } from 'react-i18next';\nimport { IGame, GamePhase } from '../custom.d';\n\nimport { SETTING_ID, SETTING_NAME } from '../shared/constants';\nimport { getCurrentUserInGame } from '../shared/functions';\n\ntype GameListProps = {\n    allGames: IGame[],\n    deleteGame: (gameId:string)=>void,\n};\n\ntype GameListState = {\n}\n\nexport class GameList extends React.Component<GameListProps,GameListState> {\n    public currentUserId: string = localStorage.getItem(SETTING_ID) || '';\n    public currentUserName: string = localStorage.getItem(SETTING_NAME) || '';\n\n    render() {\n        const {allGames,deleteGame} = this.props;\n        const newGames = allGames.filter(game => game.phase === GamePhase.Init && !getCurrentUserInGame(game));\n        const onGoingGames = allGames.filter(game => \n            ![GamePhase.Init,GamePhase.End].includes(game.phase) || (game.phase === GamePhase.Init && !!getCurrentUserInGame(game))\n        );\n        const doneGames = allGames.filter(game => game.phase === GamePhase.End);\n\n        const createListItem = (game: IGame) => {\n            const playersString = game.players.map(p => p.name).join(', ') || '-';\n\n            return (\n                <ListItem key={game.id} className=\"GameListItem\"\n                    {...{ to: `/${game.id}` }}\n                    component={Link}\n                    button\n                >\n                    <ListItemText \n                        id={game.id} \n                        primary={`${game.name || game.id}`}\n                        secondary={<Trans i18nKey=\"HOME.GAME_LIST.PLAYERS\">Spieler: {{playersString}}</Trans>} \n                    />\n                    {\n                        this.currentUserId === game.host && (\n                            <ListItemSecondaryAction>\n                                <IconButton onClick={() => deleteGame(game.id)}>\n                                    <DeleteIcon/>\n                                </IconButton>\n                            </ListItemSecondaryAction>\n                        )\n                    }\n                </ListItem>\n            );\n        }\n\n        const newGamesList = newGames.map(createListItem);\n        const onGoingGamesList = onGoingGames.map(createListItem);\n        const doneGamesList = doneGames.map(createListItem);\n\n        return (\n            <div className=\"GameList\">\n                {\n                    onGoingGamesList.length > 0 && (\n                        <Paper>\n                            <Typography variant=\"h5\"><Trans i18nKey=\"HOME.GAME_LIST.ONGOING\">Meine laufenden Spiele</Trans></Typography>\n                            <List>\n                                {onGoingGamesList}\n                            </List> \n                        </Paper>\n                    )\n                }\n                {\n                    newGamesList.length > 0 && (\n                        <Paper>\n                            <Typography variant=\"h5\"><Trans i18nKey=\"HOME.GAME_LIST.NEW\">Neue Spiele</Trans></Typography>\n                            <List>\n                                {newGamesList}\n                            </List> \n                        </Paper>\n                    )\n                }\n                {\n                    doneGamesList.length > 0 && (\n                        <Paper>\n                            <Typography variant=\"h5\"><Trans i18nKey=\"HOME.GAME_LIST.DONE\">Meine beendeten Spiele</Trans></Typography>\n                            <List>\n                                {doneGamesList}\n                            </List> \n                        </Paper>\n                    )\n                }\n            </div>\n        );\n    }\n}\n\n/*\nTODO Share Button\n\nimport ShareIcon from '@material-ui/icons/Share';\nimport {AlertBar} from '../common/AlertBar';\n\n    public state: GameListState = {\n        showAlert: false,\n        alertText: ''\n    }\n        const {showAlert,alertText} = this.state;\n\n        const shareGame = (gameId: string) => {\n            const gameUrl = `${window.location.protocol}//${window.location.host}/${gameId}`;\n            navigator.clipboard.writeText(gameUrl);\n            this.setState({\n                showAlert: true,\n                alertText: `Link zum Spiel wurde in die Zwischenablage kopiert`\n            });\n        }\n\n        const hideAlert = ()=> {\n            this.setState({\n                showAlert: false,\n                alertText: ``\n            });\n        }\n\n                    {\n                        game.phase === GamePhase.Init && (\n                            <ListItemSecondaryAction>\n                                <IconButton onClick={() => shareGame(game.id)}>\n                                    <ShareIcon/>\n                                </IconButton>\n                            </ListItemSecondaryAction>\n                        )\n                    }\n\n                <AlertBar show={showAlert} alertText={alertText} onClose={hideAlert}/>\n*/","import React from 'react';\nimport { CircularProgress } from '@material-ui/core';\n\ntype ActionButtonProps = {\n\tloading: boolean;\n    children: React.ReactNode\n}\n\nexport class ActionButton extends React.Component<ActionButtonProps> {\n\n    render() {\n    \tconst { children, loading } = this.props;\n\n        return (\n            <div className=\"buttonWithLoading\">\n                { children }\n                { loading && <CircularProgress size={24} className=\"loadingInButton\" /> }\n            </div>\n        );\n    }\n\n}","import { GAME_URL } from './constants';\nimport { getCurrentUserId } from './functions';\nimport { IGame, IUser } from '../custom.d';\n\nexport async function loadGames(): Promise<IGame[]> {\n    return (await _get('all')).games || [];\n}\n\nexport async function loadGame(id: string): Promise<IGame> {\n    return (await _get(id)).game;\n}\n\nexport async function createGame(game: IGame): Promise<{id:string,playerId:string}> {\n    return _post('add', {game});\n}\n\nexport function deleteGame(id: string) {\n    return _delete(`delete/${id}`);\n}\n\nexport async function addPlayer(id: string, player: IUser): Promise<IUser> {\n    return (await _put(`${id}/addPlayer`, {player})).player;\n}\n\nexport async function updatePlayer(id: string, player: IUser): Promise<IUser> {\n    return (await _put(`${id}/updatePlayer`, {player})).player;\n}\n\nexport function startPreparation(id: string, wordsPerPlayer: number) {\n    return _put(`${id}/startPreparation`, {wordsPerPlayer});\n}\n\nexport function submitHint(id: string, hint: string) {\n    return _put(`${id}/hint`, {hint});\n}\n\nexport function toggleDuplicate(id: string, hintIndex: number) {\n    return _put(`${id}/toggleDuplicateHint`, {hintIndex});\n}\n\nexport function showHints(id: string) {\n    return _put(`${id}/showHints`);\n}\n\nexport function guess(id: string, guess: string) {\n    return _put(`${id}/guess`, {guess});\n}\n\nexport function resolveRound(id: string, correct: boolean) {\n    return _put(`${id}/resolve`, {correct});\n}\n\n\nfunction _get(endpoint: string): Promise<any> {\n    return new Promise((resolve, reject) => {\n        fetch(`${GAME_URL}/${endpoint}`, {\n            method: 'GET',\n            headers: {\n                ..._getAuthHeader()\n            }\n        })\n            .then(res => res.json())\n            .then((data) => {\n                resolve(data);\n            }, (error) => {\n                console.error(error);\n                reject(error);\n            });\n    });\n}\n\nfunction _post(endpoint: string, data: any): Promise<any> {\n    return new Promise((resolve, reject) => {\n        fetch(`${GAME_URL}/${endpoint}`, {\n            method: 'POST',\n            headers: {\n                ..._getAuthHeader(),\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(data)\n        })\n            .then(res => res.json())\n            .then((data) => {\n                resolve(data);\n            }, (error) => {\n                console.error(error);\n                reject(error);\n            })\n    });\n}\n\nfunction _put(endpoint: string, data?: any): Promise<any> {\n    return new Promise((resolve, reject) => {\n        fetch(`${GAME_URL}/${endpoint}`, {\n            method: 'PUT',\n            headers: {\n                ..._getAuthHeader(),\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(data)\n        })\n            .then(res => {\n                res.json().then(data => {\n                    resolve(data);\n                }, error => {\n                    resolve();\n                });\n            }, (error) => {\n                console.error(error);\n                reject(error);\n            })\n    });\n}\n\nfunction _delete(endpoint: string) {\n    return new Promise((resolve, reject) => {\n        fetch(`${GAME_URL}/${endpoint}`, { \n            method: 'DELETE',\n            headers: {\n                ..._getAuthHeader()\n            }\n        })\n            .then((data) => {\n                resolve();\n            }, (error) => {\n                console.error(error);\n                reject(error);\n            })\n    });   \n}\n\nfunction _getAuthHeader() {\n    return {\n        'Authorization': getCurrentUserId()\n    }\n}","import React from 'react';\nimport { withRouter, RouteComponentProps } from 'react-router-dom'\nimport { Button, TextField } from '@material-ui/core';\nimport { Trans } from 'react-i18next';\nimport { withSnackbar, WithSnackbarProps, CloseReason } from 'notistack';\nimport { IGame } from '../custom.d';\nimport { GameList } from './GameList';\nimport { ActionButton } from '../common/ActionButton';\n\nimport { SETTING_ID, SETTING_NAME, DEFAULT_NUM_WORDS } from '../shared/constants';\nimport { setDocumentTitle } from '../shared/functions';\nimport { loadGames, createGame, deleteGame } from '../shared/apiFunctions';\nimport i18n from '../i18n';\n\ntype JustOneHomeProps = {}&WithSnackbarProps&RouteComponentProps;\ntype JustOneHomeState = {\n    newGameName: string|null,\n    allGames: IGame[],\n    gamesLoading: boolean\n};\n\nclass JustOneHome extends React.Component<JustOneHomeProps,JustOneHomeState> {\n    public currentUserId: string = localStorage.getItem(SETTING_ID) || '';\n    public currentUserName: string = localStorage.getItem(SETTING_NAME) || '';\n\n    private _interval: number|undefined;\n    private _isMounted: boolean = false;\n\n    constructor(props: JustOneHomeProps) {\n        super(props);\n\n        this.createGame = this.createGame.bind(this);\n        this.loadGames = this.loadGames.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        this.triggerDeleteGame = this.triggerDeleteGame.bind(this);\n        this.deleteGame = this.deleteGame.bind(this);\n\n        this.state = { allGames: [], newGameName: null, gamesLoading: true };\n    }\n\n    componentDidMount() {\n        this._isMounted = true;\n\n        setDocumentTitle();\n\n        this.loadGames();\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n        clearInterval(this._interval);\n    }\n\n    async loadGames() {\n        this.setState({\n            gamesLoading: true\n        });\n        try {\n            let games = await loadGames();\n            if (!this._isMounted) return;     \n            this.setState({\n                allGames: games,\n                gamesLoading: false\n            });\n        } catch(e) {\n            this.props.enqueueSnackbar(i18n.t('ERROR.LOAD_GAMES', 'Fehler'), { variant: 'error' });\n            this.setState({\n                gamesLoading: false\n            });\n        }\n    }\n\n    triggerDeleteGame(gameId: string) {\n        this.setState((state) => {\n            return {\n                allGames: state.allGames.filter(g => g.id !== gameId)\n            }\n        });\n        const action = (key: string) => (\n            <React.Fragment>\n                <Button onClick={() => { this.props.closeSnackbar(key); this.loadGames(); }} color=\"inherit\">\n                    <Trans i18nKey=\"COMMON.UNDO\">Rückgängig</Trans>\n                </Button>\n            </React.Fragment>\n        );\n        this.props.enqueueSnackbar(i18n.t('HOME.DELETED_GAME', 'Spiel gelöscht'), {\n            action: action,\n            onClose: (_: any, reason: CloseReason) => {\n                if (reason !== 'instructed') {\n                    this.deleteGame(gameId);\n                }\n            }\n        });\n    }\n\n    async deleteGame(gameId: string) {\n        await deleteGame(gameId);\n        this.loadGames();\n    }\n\n    handleChange(event: React.ChangeEvent<HTMLInputElement>) {\n        this.setState({newGameName: event.target.value});\n    }\n\n    async createGame() {\n        const game: IGame = emptyGame();\n        let gameName = this.state.newGameName;\n        if (gameName === null) gameName = getInitialGameName(this.currentUserName);\n        game.name = gameName;\n\n        try {\n            const {id, playerId} = await createGame(game);\n\n            if(this.currentUserId !== playerId) {\n                localStorage.setItem(SETTING_ID, playerId);\n            }\n\n            this.props.history.push('/'+id);\n\n        } catch(e) {\n            this.props.enqueueSnackbar(i18n.t('ERROR.CREATE_GAME', 'Fehler'), { variant: 'error' });\n        }\n    }\n\n    render() {\n        let {newGameName, allGames, gamesLoading} = this.state;\n        if (newGameName === null) newGameName = getInitialGameName(this.currentUserName);\n\n        return (\n            <div className=\"JustOneHome\">\n                <TextField label={<Trans i18nKey=\"HOME.GAME_NAME\">Spielname</Trans>} value={newGameName} onChange={this.handleChange} />\n                <Button variant=\"contained\" color=\"primary\" onClick={this.createGame}>\n                    <Trans i18nKey=\"HOME.NEW_GAME\">Neues Spiel</Trans>\n                </Button>\n                <ActionButton loading={gamesLoading}>\n                    <Button variant=\"contained\" onClick={this.loadGames}>\n                        <Trans i18nKey=\"HOME.LOAD_GAMES\">Spiele aktualisieren</Trans>\n                    </Button>\n                </ActionButton>\n                <GameList allGames={allGames} deleteGame={this.triggerDeleteGame} />\n            </div>\n        );\n    }\n}\n\nfunction getInitialGameName(userName?: string) {\n    return userName ? i18n.t('HOME.NEW_GAME_PERSONAL', 'Neues Spiel', {name: userName}) : i18n.t('HOME.NEW_GAME', 'Neues Spiel');\n}\n\nfunction emptyGame(): IGame {\n    return {\"id\":\"\", \"name\": \"\", \"words\":[],\"players\":[],\"host\":\"\",\"wordsPerPlayer\":DEFAULT_NUM_WORDS,\"round\":0,\"phase\":0,\"hints\":[],\"correctWords\":[],\"wrongWords\":[]};\n}\n\nexport default withRouter(withSnackbar(JustOneHome));","import React from 'react';\nimport i18n from '../../i18n';\nimport { IconButton } from '@material-ui/core';\nimport { Send as SendIcon } from '@material-ui/icons';\nimport TextField from '@material-ui/core/TextField';\n\ntype WordHintInputProps = {\n    submitHint: (hint: string)=>void\n    label?: string\n};\ntype WordHintInputState = {\n    value: string, \n};\n\nexport class WordHintInput extends React.Component<WordHintInputProps,WordHintInputState> {\n\n    constructor(props: WordHintInputProps) {\n    \tsuper(props);\n        this.state = {value: ''};\n\n        this.handleChange = this.handleChange.bind(this);\n        this.submitHint = this.submitHint.bind(this);\n        this.keyPressed = this.keyPressed.bind(this);\n    }\n\n    handleChange(event: React.ChangeEvent<HTMLInputElement>) {\n        this.setState({value: event.target.value});\n    }\n\n    submitHint() {\n    \tthis.props.submitHint(this.state.value)\n    \tthis.setState({value: ''});\n    }\n\n    keyPressed(event: React.KeyboardEvent<HTMLInputElement>) {\n    \tif (event.key === \"Enter\") {\n    \t    this.submitHint()\n    \t}\n    }\n\n    render() {\n        return (\n\t        <div className=\"Word-hint-input\">\n\t        \t<TextField label={this.props.label || i18n.t('GAME.COMMON.ENTER_HINT', 'Hinweis eingeben')}\n\t        \t\tvalue={this.state.value} \n\t        \t\tonChange={this.handleChange} \n\t        \t\tonKeyPress={this.keyPressed} />\n    \t\t\t<IconButton color=\"primary\" \n    \t\t\t\tdisabled={!this.state.value} \n    \t\t\t\tonClick={this.submitHint}>\n                    <SendIcon></SendIcon>\n                </IconButton>\n\t        </div>\n        );\n    }\n\n}","import React from 'react';\n\ntype PencilAnimationProps = {\n\tcolor?: string,\n}\n\nexport class PencilAnimation extends React.Component<PencilAnimationProps> {\n\n    render() {\n        const styleObj1 = {\n        \tbackgroundColor: this.props.color,\n        };\n        const styleObj2 = {\n        \tborderTopColor: this.props.color,\n        };\n\n        return (\n\t    <div className=\"pencil\">\n                <div className=\"body\" style={styleObj1}></div>\n                <div className=\"nib\" style={styleObj2}></div>\n            </div>\n        );\n    }\n\n}","import React from 'react';\nimport { WordHintInput } from './WordHintInput';\nimport { PencilAnimation } from '../../common/PencilAnimation';\nimport { Checkbox, Paper } from '@material-ui/core';\nimport { Mood as MoodIcon, MoodBad as MoodBadIcon } from '@material-ui/icons';\n\ntype WordHintProps = {\n\thint?: string,\n\tcolor?: string,\n\tduplicate?: boolean,\n    author?: string,\n    showPencil?: boolean,\n    showCheck?: boolean,\n    showInput?: boolean,\n    submitHint?: (hint:string)=>void,\n    showDuplicateToggle?: boolean,\n    toggleDuplicate?: ()=>void\n}\n\nexport class WordHint extends React.Component<WordHintProps> {\n\n    render() {\n        const { hint, color, author, \n                showPencil, showCheck, showInput, submitHint,\n                showDuplicateToggle, toggleDuplicate, duplicate \n        } = this.props;\n        const styleObj = {\n        \t'color': color,\n            'borderColor': color\n        };\n        const doShowPencil = showPencil || !this.props.hint;\n        const isDuplicate = duplicate || false;\n\n        const classes = ['Word-hint'];\n        if (doShowPencil) classes.push('Word-hint-writing');\n        if (isDuplicate) classes.push('Word-hint-duplicate');\n        if (hint && hint.length > 20) classes.push('Word-hint-huge');\n        else if (hint && hint.length > 14) classes.push('Word-hint-long');\n        const extraClasses = classes.join(' ');\n\n        if (showInput && submitHint) {\n            return (\n                <Paper className={extraClasses} style={styleObj}>\n                    <WordHintInput submitHint={submitHint}/>\n                    {author && <span className=\"Author-tag\">{author}</span>}\n                </Paper>\n            );\n        } else {\n            return (\n                <Paper className={extraClasses} style={styleObj}>\n                    {!showCheck && hint}\n                    {showCheck && <span className=\"Done-icon\">✓</span>}\n                    {doShowPencil && <PencilAnimation color={color}></PencilAnimation>}\n                    {showDuplicateToggle && toggleDuplicate && (\n                        <Checkbox className=\"Duplicate-toggle\" \n                            icon={<MoodIcon />} checkedIcon={<MoodBadIcon />} \n                            checked={isDuplicate}\n                            onChange={()=>toggleDuplicate()}/>\n                    )}\n                    {author && <span className=\"Author-tag\">{author}</span>}\n                </Paper>\n            );\n        }\n\n        \n    }\n\n}","import React from 'react';\nimport { IconButton } from '@material-ui/core';\nimport CheckIcon from '@material-ui/icons/Check';\n\nexport const allColors: string[] = [\n    '#e51235',\n    '#d81b60',\n    '#8e24aa',\n    '#6e45c1',\n    '#4959cc',\n    '#1e88e5',\n    '#039be5',\n    '#00acc1',\n    '#00897b',\n    '#43a047',\n    '#7cb342',\n    '#c0ca33',\n    '#ffc215',\n    '#ffab00',\n    '#ff6d00',\n    '#f4511e'\n];\n\nexport function getRandomColor(color?: string|null): string {\n    if (!color || !allColors.includes(color)) {\n        return allColors[Math.floor(Math.random()*allColors.length)];\n    } else {\n        return color;\n    }\n}\n\ntype ColorPickerProps = {\n\tselected?: string;\n    select: (color: string)=>void;\n}\n\nexport class ColorPicker extends React.Component<ColorPickerProps> {\n\n    render() {\n    \tconst { selected, select } = this.props;\n\n        const colorButtons = allColors.map((color: string) => {\n            const classes = ['Color-button'];\n            if (selected === color) classes.push('Color-selected');\n            return (\n                <IconButton className={classes.join(' ')} onClick={() => select(color)} style={{ backgroundColor: color }} key={color}>\n                    {selected === color && <CheckIcon/>}\n                </IconButton>\n            )\n        });\n\n        return (\n            <div className=\"Color-picker\">\n                { colorButtons }\n            </div>\n        );\n    }\n\n}","import React from 'react';\nimport { Trans } from 'react-i18next';\nimport { IUser } from '../custom.d';\nimport { Button } from '@material-ui/core';\nimport TextField from '@material-ui/core/TextField';\nimport { ColorPicker } from '../common/ColorPicker';\n\ntype NewPlayerProps = {\n    addPlayer: (player: IUser) => void,\n    updatePlayer: (player: IUser) => void,\n    currentPlayer: IUser\n}\n\nexport class NewPlayer extends React.Component<NewPlayerProps> {\n\n    constructor(props: NewPlayerProps) {\n        super(props);\n\n        this.handleChange = this.handleChange.bind(this);\n        this.setColor = this.setColor.bind(this);\n        this.addPlayer = this.addPlayer.bind(this);\n    }\n\n    handleChange(event: React.ChangeEvent<HTMLInputElement>) {\n        if (event.target.name === 'name') {\n            this.props.currentPlayer.name = event.target.value;\n\n            this.props.updatePlayer(this.props.currentPlayer);     \n\n        }\n    }\n\n    setColor(color: string) {\n        this.props.currentPlayer.color = color;\n        this.props.updatePlayer(this.props.currentPlayer);    \n    }\n\n    addPlayer() {\n        this.props.addPlayer(this.props.currentPlayer);\n    }\n\n    render() {\n        const { currentPlayer } = this.props;\n\n        return (\n            <div className=\"New-player\">\n                <TextField required label=\"Spielername\" \n                    name='name'\n                    value={currentPlayer.name} \n                    onChange={this.handleChange}/>\n                <ColorPicker select={this.setColor} selected={currentPlayer.color}/>\n                <Button variant=\"contained\" color=\"primary\" \n                    disabled={!currentPlayer.name} \n                    onClick={this.addPlayer}><Trans i18nKey=\"GAME.LOBBY.JOIN\">Mitspielen</Trans></Button>\n            </div>\n        );\n    }\n\n}","import React from 'react';\nimport { List, ListItem, ListItemText, DialogTitle, Dialog } from '@material-ui/core';\nimport { Trans } from 'react-i18next';\n\ntype RoundSelectorProps = {\n    onClose: (value?: number)=>void,\n    numOfPlayers: number,\n    open: boolean\n};\n\nexport class RoundSelector extends React.Component<RoundSelectorProps> {\n    render() {\n        const { open, onClose, numOfPlayers } = this.props;\n\n        const handleClose = () => {\n            onClose();\n        };\n\n        const handleListItemClick = (value: number) => {\n            onClose(value);\n        };\n\n        const options = [];\n        for (let i = 0; i < 3; i++) {\n            const wordCount = i+1;\n            options.push(\n                <ListItem button onClick={() => handleListItemClick(wordCount)} key={wordCount}>\n                    <ListItemText \n                        primary={<Trans i18nKey=\"GAME.LOBBY.ROUND_SELECT.NUM\" count={wordCount*numOfPlayers}>{wordCount*numOfPlayers} Runden</Trans>}\n                        secondary={<Trans i18nKey=\"GAME.LOBBY.ROUND_SELECT.WORDS\" count={wordCount}>{wordCount} Begriff(e) pro Spieler</Trans>} />\n                </ListItem>\n            );\n        }\n\n        return (\n            <Dialog onClose={handleClose} open={open} disableBackdropClick>\n                <DialogTitle>\n                    <Trans i18nKey=\"GAME.LOBBY.ROUND_SELECT.HEADING\">Lege die Rundenanzahl fest</Trans>\n                </DialogTitle>\n                <List>\n                    {options}\n                </List>\n            </Dialog>\n        );\n    }\n}","import React from 'react';\nimport { IGame, IUser } from '../custom.d';\nimport { Button, Paper, Typography } from '@material-ui/core';\nimport { Trans } from 'react-i18next';\nimport { WordHint } from './components/WordHint';\nimport { NewPlayer } from '../common/NewPlayer';\nimport { RoundSelector } from './components/RoundSelector';\nimport { getRandomColor } from '../common/ColorPicker';\n\nimport { SETTING_ID, SETTING_NAME, SETTING_COLOR, DEFAULT_NUM_WORDS } from '../shared/constants';\nimport * as api from '../shared/apiFunctions';\n\ntype GameLobbyProps = {\n    game: IGame,\n    setTheme?: (color: string)=>void\n}\ntype GameLobbyState = {\n    currentPlayer: IUser,\n    roundDialogOpen: boolean,\n    playerAdded?: boolean\n}\n\nexport class GameLobby extends React.Component<GameLobbyProps,GameLobbyState> {\n\n    public state: GameLobbyState = { \n        currentPlayer: {\n            id: localStorage.getItem(SETTING_ID) || '',\n            name: localStorage.getItem(SETTING_NAME) || '',\n            color: getRandomColor(localStorage.getItem(SETTING_COLOR))\n        }, \n        roundDialogOpen: false\n    };\n\n    constructor(props: GameLobbyProps) {\n        super(props);\n\n        this.addPlayer = this.addPlayer.bind(this);\n        this.setPlayerProps = this.setPlayerProps.bind(this);\n        this.selectNumRounds = this.selectNumRounds.bind(this);\n        this.startPreparation = this.startPreparation.bind(this);\n    }\n\n    setPlayerProps(player: IUser) {\n        this.setState({\n            currentPlayer: player\n        });\n    }\n\n    async addPlayer(player: IUser) {\n        const resultPlayer = await api.addPlayer(this.props.game.id, player);\n        if (!resultPlayer) return;\n        this.setLocalPlayer(resultPlayer);\n    }\n\n    setLocalPlayer(player: IUser) {\n        localStorage.setItem(SETTING_ID, player.id);\n        localStorage.setItem(SETTING_NAME, player.name);\n        if (player.color) localStorage.setItem('playerColor', player.color);\n        if (this.props.setTheme && player.color) {\n            this.props.setTheme(player.color);\n        }\n        this.setState({\n            currentPlayer: player,\n            playerAdded: true\n        });\n    }\n\n    selectNumRounds() {\n        this.setState({\n            roundDialogOpen: true\n        });\n    }\n\n    startPreparation(wordsPerPlayer: number = DEFAULT_NUM_WORDS) {\n        this.setState({\n            roundDialogOpen: false\n        });\n\n        api.startPreparation(this.props.game.id, wordsPerPlayer);\n    }\n\n    render() {\n        const { game } = this.props;\n        const { currentPlayer, roundDialogOpen, playerAdded } = this.state;\n        const currentUserId: string = localStorage.getItem(SETTING_ID) || '';\n        const isHost: boolean = !!currentUserId && game.host === currentUserId;\n        let isInGame: boolean = false;\n        const listOfPlayers = game.players.map(player => {\n            if (player.id === currentUserId) {\n                isInGame = true;\n            } \n            return (\n                <WordHint key={player.id} hint={player.name} color={player.color}></WordHint>\n            )\n        });\n        isInGame = isInGame || !!playerAdded;\n        const newPlayerName: string = !currentPlayer.name ? '?' : currentPlayer.name;\n        const newPlayerColor: string = !currentPlayer.color ? getRandomColor() : currentPlayer.color;\n\n        return (\n            <div className=\"Game-lobby\">\n                <div className=\"New-player\">\n                    { \n                        isInGame ? (\n                            <Paper className=\"StatusInfo\">\n                                <Trans i18nKey=\"GAME.LOBBY.WAIT_MESSAGE\" tOptions={{context: isHost ? 'HOST' : 'PLAYER'}}>\n                                    Warten auf Mitspieler ... Sobald alle Mitspieler da sind, kann der Spielleiter das Spiel starten.\n                                </Trans> \n                            </Paper>\n                        ) : (\n                            <NewPlayer currentPlayer={currentPlayer}\n                                updatePlayer={this.setPlayerProps}\n                                addPlayer={this.addPlayer}/>\n                        )\n                    }\n                    {\n                        isHost && isInGame && (\n                            <Button variant=\"contained\" color=\"primary\" \n                                disabled={game.players.length < 3}\n                                onClick={this.selectNumRounds}>\n                                <Trans i18nKey=\"GAME.LOBBY.START_BUTTON\">Alle Spieler sind da</Trans>\n                            </Button>\n                        )\n                    }\n                </div>\n                <div className=\"Player-list\">\n                    <Typography variant=\"h5\">\n                        <Trans i18nKey=\"COMMON.TEAMMATES\">Mitspieler</Trans>\n                    </Typography>\n                    {listOfPlayers}\n                    {!isInGame && <WordHint hint={newPlayerName} color={newPlayerColor} showPencil={true}></WordHint>}\n                </div>\n                <RoundSelector numOfPlayers={game.players.length} open={roundDialogOpen} onClose={this.startPreparation}/>\n            </div>\n        );\n    }\n\n}","import React from 'react';\nimport { Trans } from 'react-i18next';\nimport i18n from '../../i18n';\nimport { Paper } from '@material-ui/core';\nimport { WordHintInput } from './WordHintInput';\n\ntype WordCardProps = {\n\tword: string;\n\tguesser?: string;\n\tcolor?: string;\n    isGuesser?: boolean;\n    guess?: string;\n    guessedRight?: boolean;\n    showInput?: boolean;\n    submitHint?: (hint:string)=>void\n}\n\nexport class WordCard extends React.Component<WordCardProps> {\n\n    render() {\n        const { word, guesser, color, isGuesser, guess, guessedRight, showInput, submitHint} = this.props\n        const guesserName = guesser;\n        let guesserText;\n        if (guesser) {\n            if (guess) {\n                guesserText = <Trans i18nKey=\"GAME.COMMON.CURRENT_GUESS\" tOptions={{context: (isGuesser ? 'ME' : '')}}>{{guesserName}}s    Rateversuch: {{guess}}</Trans>;\n            } else {\n                guesserText = <Trans i18nKey=\"GAME.COMMON.TURN_GUESSING\" tOptions={{context: (isGuesser ? 'ME' : '')}}>{{guesserName}} muss raten</Trans>;\n            }\n        } else if (guess) {\n            guesserText = <Trans i18nKey=\"GAME.COMMON.GUESS_SPEC\">Rateversuch: {{guess}}</Trans>;\n        }\n        const classes = ['Word-card'];\n        if (guess) {\n            if (guessedRight) {\n                classes.push('Word-card-correct');\n            } else {\n                classes.push('Word-card-wrong');\n            }\n        }\n\n        return (\n\t        <Paper className={classes.join(' ')} style={{borderColor: color}}>\n\t        \t{\n                    (showInput && submitHint) ? \n                    <WordHintInput submitHint={submitHint} label={i18n.t('GAME.COMMON.GUESS', 'Rateversuch')}/> : \n                    <span>{word}</span>\n                }\n                {guesserText && <span className=\"Author-tag\" style={{color: color}}>{guesserText}</span>}\n\t        </Paper>\n        );\n    }\n\n}","import React from 'react';\nimport { Trans } from 'react-i18next';\nimport { Button, Typography } from '@material-ui/core';\nimport TextField from '@material-ui/core/TextField';\nimport i18n from '../../i18n';\n\ntype WordAdderProps = {\n    add: (words: string[])=>void,\n    numOfWords: number\n}\n\ntype WordAdderState = {\n    words: string[]\n}\n\nexport class WordAdder extends React.Component<WordAdderProps, WordAdderState> {\n\n    public state: WordAdderState = {\n        words: []\n    };\n\n    constructor(props: WordAdderProps) {\n        super(props);\n\n        this.handleChange = this.handleChange.bind(this);\n        this.keyPressed = this.keyPressed.bind(this);\n    }\n\n    handleChange(event: React.ChangeEvent<HTMLInputElement>) {\n        const index = parseInt(event.target.name.substr(4));\n        const word = event.target.value;\n        this.setState((state, props) => {\n            const newWords = state.words;\n            newWords[index] = word;\n            return {\n                words: newWords\n            };\n        });\n    }\n\n    keyPressed(event: React.KeyboardEvent<HTMLInputElement>) {\n        if (event.key === \"Enter\") {\n            const words = this.state.words;\n            const enterDisabled = words.length < this.props.numOfWords || words.some(word => !word || word.length === 0);\n            if (!enterDisabled) this.props.add(words);\n        }\n    }\n\n    render() {\n        const { add, numOfWords } = this.props;\n        const { words } = this.state;\n        const wordFields = [];\n        for (let i=0; i<numOfWords; i++) {\n            const label = i18n.t(\"GAME.PREP.WORD_ADDER.LABEL\", \"Wort \"+(i+1), {count: numOfWords, index: i+1});\n            wordFields.push(\n                <TextField required label={label}\n                    placeholder={i18n.t(\"GAME.PREP.WORD_ADDER.PLACEHOLDER\", \"Ratebegriff eingeben\")}\n                    name={`word${i}`}\n                    key={`word${i}`}\n                    value={words[i]||''} \n                    onChange={this.handleChange} \n                    onKeyPress={this.keyPressed}/>\n            );\n        }\n        \n        const enterDisabled = words.length < numOfWords || words.some(word => !word || word.length === 0);\n\n        return (\n            <div className=\"Word-adder\">\n                <Typography variant=\"subtitle1\">\n                    <Trans i18nKey=\"GAME.PREP.WORD_ADDER.HEADING\" count={numOfWords}>Gib Begriffe für das Spiel ein</Trans>\n                </Typography>\n                {wordFields}\n                <Button variant=\"contained\" color=\"primary\" \n                    disabled={enterDisabled} \n                    onClick={() => add(words)}>\n                    <Trans i18nKey=\"GAME.PREP.WORD_ADDER.BUTTON\" count={numOfWords}>Jetzt abschicken</Trans>\n                </Button>\n            </div>\n        );\n    }\n\n}","import React from 'react';\nimport { Trans } from 'react-i18next';\nimport { IGame, IUser } from '../custom.d';\nimport { Paper, Typography } from '@material-ui/core';\nimport { WordHint } from './components/WordHint';\nimport { WordCard } from './components/WordCard';\nimport { WordAdder } from './components/WordAdder';\nimport { getRandomColor } from '../common/ColorPicker';\n\nimport { SETTING_ID, SETTING_NAME, SETTING_COLOR, DEFAULT_NUM_WORDS } from '../shared/constants';\nimport * as api from '../shared/apiFunctions';\n\ntype GamePreparationProps = {\n    game: IGame\n}\n\nexport class GamePreparation extends React.Component<GamePreparationProps> {\n    // TODO central place for player\n    public currentPlayer: IUser =  {\n        id: localStorage.getItem(SETTING_ID) || '',\n        name: localStorage.getItem(SETTING_NAME) || '',\n        color: getRandomColor(localStorage.getItem(SETTING_COLOR))\n    };\n\n    constructor(props: GamePreparationProps) {\n        super(props);\n\n        this.addWords = this.addWords.bind(this);\n    }\n\n    async addWords(words: string[]) {\n        let player: IUser = this.currentPlayer;\n        player.enteredWords = words;\n\n        api.updatePlayer(this.props.game.id, player);\n    }\n\n    render() {\n        const { game } = this.props;\n        const numWordsPerPlayer = game.wordsPerPlayer || DEFAULT_NUM_WORDS;\n        const currentUserId: string = localStorage.getItem(SETTING_ID) || '';\n        let isInGame: boolean = false;\n        let myWords: string[] = [];\n        let allMyWordsEntered: boolean = false;\n        const listOfPlayers = game.players.map(player => {\n            const wordsEntered: boolean = !!player.enteredWords && player.enteredWords.length === numWordsPerPlayer;\n            if (player.id === currentUserId) {\n                isInGame = true;\n                myWords = player.enteredWords || [];\n                allMyWordsEntered = wordsEntered;\n            } \n            return (\n                <WordHint key={player.id} hint={player.name} color={player.color} showPencil={!wordsEntered}></WordHint>\n            )\n        });\n\n        const myWordCards = myWords.map(word => <WordCard key={word} word={word} color={this.currentPlayer.color}/>)\n\n        // TODO not in game users\n        // TODO css classes\n        return (\n            <div className=\"Game-lobby\">\n                <div className=\"New-player\">\n                    { \n                        allMyWordsEntered || !isInGame ? ( \n                            <Paper className=\"StatusInfo\">\n                                <Trans i18nKey=\"GAME.PREP.WAIT_MESSAGE\">Warten auf Mitspieler ... Sobald alle fertig sind, geht's los.</Trans>\n                            </Paper>\n                        ) : (\n                            <WordAdder add={this.addWords} numOfWords={numWordsPerPlayer}/>\n                        )\n                    }\n                    {myWordCards.length > 0 && (\n                        <Typography variant=\"subtitle1\">\n                            <Trans i18nKey=\"GAME.PREP.MY_WORDS\" count={myWords.length}>Meine Begriffe</Trans>\n                        </Typography>\n                    )}\n                    {myWordCards}\n                </div>\n                <div className=\"Player-list\">\n                    <Typography variant=\"h5\">\n                        <Trans i18nKey=\"COMMON.TEAMMATES\">Mitspieler</Trans>\n                    </Typography>\n                    {listOfPlayers}\n                </div>\n            </div>\n        );\n    }\n\n}","import React from 'react';\nimport { Trans } from 'react-i18next';\nimport { withSnackbar, WithSnackbarProps } from 'notistack';\nimport {WordCard} from './components/WordCard';\nimport { IGame } from '../custom.d';\nimport { checkPrevResult } from '../shared/functions';\n\ntype GameEndViewProps = {\n    game: IGame\n}&WithSnackbarProps;\n\ntype HintWritingViewState = {\n    shownPrevResult: boolean\n};\n\nclass GameEndView extends React.Component<GameEndViewProps> {\n    public state: HintWritingViewState = { shownPrevResult: false };\n    private _isMounted: boolean = false;\n\n    componentDidMount() {\n        this._isMounted = true;\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n        this.props.closeSnackbar();\n    }\n\n    render() {\n        const game: IGame = this.props.game;\n        const { shownPrevResult } = this.state;\n        const correctWords = game.correctWords.map(wordResult => {\n            return <WordCard key={wordResult.word} word={wordResult.word} guess={wordResult.guess} guessedRight={true}/>\n        });\n        const wrongWords = game.wrongWords.map(wordResult => {\n            return <WordCard key={wordResult.word} word={wordResult.word} guess={wordResult.guess} guessedRight={false}/>\n        });\n\n        if (!shownPrevResult) {\n            checkPrevResult(game, this.props.enqueueSnackbar, ()=>{ \n                if(this._isMounted) this.setState({shownPrevResult: true}); \n            });\n        }\n\n        return (\n            <div className=\"Game-end-view\">\n                <div className=\"Correct-words\">\n                    <h2><Trans i18nKey=\"GAME.END.RIGHT\" count={game.correctWords.length}>Richtig</Trans></h2>\n                    {correctWords}\n                </div>\n                <div className=\"Wrong-words\">\n                    <h2><Trans i18nKey=\"GAME.END.WRONG\" count={game.wrongWords.length}>Falsch</Trans></h2>\n                    {wrongWords}\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default withSnackbar(GameEndView);\n","import React from 'react';\nimport { Trans } from 'react-i18next';\nimport { IGame, GamePhase } from '../../custom.d';\nimport { getUserInGame } from '../../shared/functions';\n\ntype GameStatsProps = {\n    game: IGame\n};\n\nexport class GameStats extends React.Component<GameStatsProps> {\n    render() {\n        const game: IGame = this.props.game;\n        const roundHost = getUserInGame(game, game.roundHost) || { name: '?' };\n        const roundHostName = roundHost.name;\n        const guesser = getUserInGame(game, game.currentGuesser) || { name: '?' };\n        const guesserName = guesser.name;\n\n        let gamePhase;\n        switch(game.phase) {\n            case GamePhase.HintWriting: \n                const players = game.players.filter(p => game.currentGuesser && p.id !== game.currentGuesser).map(p => p.name);\n                const playersString = players.slice(0, players.length-1).join(', ') + ' und ' + players[players.length-1];\n                gamePhase = <Trans i18nKey=\"GAME.STATS.PHASE_WRITING\">{{playersString}} schreiben Hinweise auf...</Trans>;\n                break;\n            case GamePhase.HintComparing: \n                gamePhase = <Trans i18nKey=\"GAME.STATS.PHASE_COMPARING\">{{roundHostName}} überprüft die Hinweise ...</Trans>;\n                break;\n            case GamePhase.Guessing: \n                gamePhase = <Trans i18nKey=\"GAME.STATS.PHASE_GUESSING\">{{guesserName}} versucht den Begriff zu erraten...</Trans>;\n                break;\n            case GamePhase.Solution: \n                if (game.guessedRight) {\n                    gamePhase = <Trans i18nKey=\"GAME.STATS.PHASE_SOLUTION\">{{guesserName}} lag genau richtig!</Trans>;\n                } else {\n                    gamePhase = <Trans i18nKey=\"GAME.STATS.PHASE_SOLUTION_WRONG\">{{roundHostName}} lag daneben! {{guesserName}} entscheidet ob es trotzdem zählt...</Trans>;\n                }\n                break;\n        }\n\n        const round = game.round+1;\n        const roundCount = game.words.length;\n        const rightCount = game.correctWords.length;\n        const wrongCount = game.wrongWords.length;\n\n        return (\n            <div className=\"Game-progress\">\n                <div>\n                    <Trans i18nKey=\"GAME.STATS.ROUND\">\n                        Runde {{round}}/{{roundCount}}\n                    </Trans>, <Trans i18nKey=\"GAME.STATS.RIGHT\">\n                        Richtige: {{rightCount}}\n                    </Trans>, <Trans i18nKey=\"GAME.STATS.WRONG\">\n                        Falsche: {{wrongCount}}\n                    </Trans>\n                </div>\n                <div><Trans i18nKey=\"GAME.STATS.PHASE\">Phase</Trans>: {gamePhase}</div>\n            </div>\n        );\n    }\n}\n","import React from 'react';\nimport { Trans } from 'react-i18next';\nimport i18n from '../../i18n';\nimport { Typography } from '@material-ui/core';\nimport { withSnackbar, WithSnackbarProps } from 'notistack';\nimport { IGame, IHint } from '../../custom.d';\nimport { WordCard } from '../components/WordCard';\nimport { WordHint } from '../components/WordHint';\n\nimport { getCurrentUserInGame, getUserInGame, checkPrevResult } from '../../shared/functions';\nimport * as api from '../../shared/apiFunctions';\n\ntype HintWritingViewProps = {\n    game: IGame\n}&WithSnackbarProps;\n\ntype HintWritingViewState = {\n    shownMessage: boolean,\n    shownPrevResult: boolean\n};\n\nclass HintWritingView extends React.Component<HintWritingViewProps, HintWritingViewState> {\n    public state: HintWritingViewState = { shownMessage: false, shownPrevResult: false };\n    private _isMounted: boolean = false;\n\n    constructor(props: HintWritingViewProps) {\n        super(props);\n\n        this.submitHint = this.submitHint.bind(this);\n    }\n\n    componentDidMount() {\n        this._isMounted = true;\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n    submitHint(hint: string) {\n        api.submitHint(this.props.game.id, hint);\n    }\n\n    render() {\n        const game: IGame = this.props.game;\n        const { shownMessage, shownPrevResult } = this.state;\n        const currentUser = getCurrentUserInGame(game);\n        const guesser = getUserInGame(game, game.currentGuesser) || { name: '?', id: '?' };\n        const isGuesser = currentUser && currentUser.id === guesser.id;\n\n        if (!shownPrevResult) checkPrevResult(game, this.props.enqueueSnackbar, ()=>{ if(this._isMounted) this.setState({shownPrevResult: true}); });\n\n        const currentWord = isGuesser ? '?' : (game.currentWord || '');\n        const currentHints = game.hints.map((hintObj: IHint, index: number) => {\n            const hint: string = hintObj.hint;\n            const hintIsMine = currentUser && currentUser.id === hintObj.author;\n            const author = getUserInGame(game, hintObj.author) || { name: '?', id: '?' };\n            const authorName = hintIsMine ? i18n.t('COMMON.ME', 'Ich') : author.name;\n            const showHint = !hint || hintIsMine;\n            const showInput = !hint && hintIsMine;\n\n            if (hintIsMine && !hint && !shownMessage) {\n                this.props.enqueueSnackbar(i18n.t('GAME.MESSAGE.YOUR_TURN', 'Du bist dran!', { context: 'HINT_WRITING' }), {\n                    variant: 'info',\n                    preventDuplicate: true,\n                    onClose: ()=>{ if(this._isMounted) this.setState({shownMessage: true}); }\n                });\n            }\n\n            return (\n                <WordHint \n                    key={hintObj.author+index} \n                    hint={hint} \n                    color={author.color}\n                    showInput={showInput}\n                    submitHint={this.submitHint}\n                    showCheck={!showHint}\n                    author={authorName}\n                />\n            );\n        });\n\n        return (\n            <div className=\"Game-field\">\n                <div className=\"Current-word\">\n                    <Typography variant=\"h5\">\n                        <Trans i18nKey=\"GAME.COMMON.WORD\">Begriff</Trans>\n                    </Typography>\n                    <WordCard \n                        word={currentWord} \n                        guesser={guesser.name} \n                        isGuesser={isGuesser}\n                        color={guesser.color} />\n                </div>\n                <div className=\"Current-hints\">\n                    <Typography variant=\"h5\">\n                        <Trans i18nKey=\"GAME.COMMON.PLAYER_HINTS\">Spieler-Hinweise</Trans>\n                    </Typography>\n                    <div className=\"WordHint-list\">{currentHints}</div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default withSnackbar(HintWritingView);\n","import React from 'react';\nimport { Trans } from 'react-i18next';\nimport i18n from '../../i18n';\nimport { Button, Typography } from '@material-ui/core';\nimport { withSnackbar, WithSnackbarProps } from 'notistack';\nimport { IGame, IHint } from '../../custom.d';\nimport { WordCard } from '../components/WordCard';\nimport { WordHint } from '../components/WordHint';\n\nimport { getCurrentUserInGame, getUserInGame } from '../../shared/functions';\nimport * as api from '../../shared/apiFunctions';\n\ntype HintComparingViewProps = {\n    game: IGame\n}&WithSnackbarProps;\n\ntype HintComparingViewState = {\n    shownMessage: boolean\n};\n\nclass HintComparingView extends React.Component<HintComparingViewProps,HintComparingViewState> {\n    public state: HintComparingViewState = { shownMessage: false };\n    private _isMounted: boolean = false;\n\n    constructor(props: HintComparingViewProps) {\n        super(props);\n\n        this.toggleDuplicate = this.toggleDuplicate.bind(this);\n        this.showHints = this.showHints.bind(this);\n    }\n\n    componentDidMount() {\n        this._isMounted = true;\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n    toggleDuplicate(hintIndex: number) {\n        api.toggleDuplicate(this.props.game.id, hintIndex);\n    }\n\n    showHints() {\n        api.showHints(this.props.game.id);\n    }\n\n    render() {\n        const game: IGame = this.props.game;\n        const { shownMessage } = this.state;\n        const currentUser = getCurrentUserInGame(game);\n        const guesser = getUserInGame(game, game.currentGuesser) || { name: '?', id: '?' };\n        const isGuesser = currentUser && currentUser.id === guesser.id;\n        const guesserName = guesser.name;\n        const isRoundHost = currentUser && currentUser.id === game.roundHost;\n\n        if (isRoundHost && !shownMessage) {\n            this.props.enqueueSnackbar(i18n.t('GAME.MESSAGE.YOUR_TURN', 'Du bist dran!', { context: 'HINT_COMPARING' }), {\n                variant: 'info',\n                preventDuplicate: true,\n                onClose: ()=>{ if(this._isMounted) this.setState({shownMessage: true}); }\n            });\n        }\n\n        const currentWord = isGuesser ? '?' : (game.currentWord || '');\n        const currentHints = game.hints.map((hintObj: IHint, index: number) => {\n            const hintIsMine = currentUser && currentUser.id === hintObj.author;\n            const author = getUserInGame(game, hintObj.author) || { name: '?', id: '?' };\n            const authorName = hintIsMine ? i18n.t('COMMON.ME', 'Ich') : author.name;\n\n            return (\n                <WordHint \n                    key={hintObj.author+index} \n                    hint={hintObj.hint} \n                    color={author.color}\n                    showCheck={isGuesser}\n                    duplicate={hintObj.isDuplicate}\n                    showDuplicateToggle={isRoundHost}\n                    toggleDuplicate={()=>this.toggleDuplicate(index)}\n                    author={authorName}\n                />\n            );\n        });\n\n        return (\n            <div className=\"Game-field\">\n                <div className=\"Current-word\">\n                    <Typography variant=\"h5\">\n                        <Trans i18nKey=\"GAME.COMMON.WORD\">Begriff</Trans>\n                    </Typography>\n                    <WordCard \n                        word={currentWord} \n                        guesser={guesser.name} \n                        isGuesser={isGuesser}\n                        color={guesser.color} />\n                </div>\n                <div className=\"Current-hints\">\n                    <Typography variant=\"h5\">\n                        <Trans i18nKey=\"GAME.COMMON.PLAYER_HINTS\">Spieler-Hinweise</Trans>\n                    </Typography>\n                    <div className=\"WordHint-list\">{currentHints}</div>\n                    { isRoundHost && (\n                        <Typography variant=\"subtitle1\">\n                            <Trans i18nKey=\"GAME.COMPARING.INFO\">Markiere ungültige Hinweise</Trans>\n                        </Typography>\n                    )}\n                    {isRoundHost && (\n                        <Button variant=\"contained\" color=\"primary\" onClick={this.showHints}>\n                            <Trans i18nKey=\"GAME.COMPARING.BUTTON\">{{guesserName}} kann losraten!</Trans>\n                        </Button>\n                    )}\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default withSnackbar(HintComparingView);","import React from 'react';\nimport { Trans } from 'react-i18next';\nimport i18n from '../../i18n';\nimport { Typography } from '@material-ui/core';\nimport { withSnackbar, WithSnackbarProps } from 'notistack';\nimport { IGame, IHint } from '../../custom.d';\nimport { WordCard } from '../components/WordCard';\nimport { WordHint } from '../components/WordHint';\n\nimport { getCurrentUserInGame, getUserInGame } from '../../shared/functions';\nimport * as api from '../../shared/apiFunctions';\n\ntype GuessingViewProps = {\n    game: IGame\n}&WithSnackbarProps;\n\ntype GuessingViewState = {\n    shownMessage: boolean\n};\n\nclass GuessingView extends React.Component<GuessingViewProps,GuessingViewState> {\n    public state: GuessingViewState = { shownMessage: false };\n    private _isMounted: boolean = false;\n\n    constructor(props: GuessingViewProps) {\n        super(props);\n\n        this.guess = this.guess.bind(this);\n    }\n\n    componentDidMount() {\n        this._isMounted = true;\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n    guess(guess: string) {\n        api.guess(this.props.game.id, guess);\n    }\n\n    render() {\n        const game: IGame = this.props.game;\n        const { shownMessage } = this.state;\n        const currentUser = getCurrentUserInGame(game);\n        const guesser = getUserInGame(game, game.currentGuesser) || { name: '?', id: '?' };\n        const isGuesser = currentUser && currentUser.id === guesser.id;\n\n        if (isGuesser && !shownMessage) {\n            this.props.enqueueSnackbar(i18n.t('GAME.MESSAGE.YOUR_TURN', 'Du bist dran!', { context: 'GUESSING' }), {\n                variant: 'info',\n                preventDuplicate: true,\n                onClose: ()=>{ if(this._isMounted) this.setState({shownMessage: true}); }\n            });\n        }\n\n        const currentWord = isGuesser ? '?' : (game.currentWord || '');\n        const currentHints = game.hints.map((hintObj: IHint, index: number) => {\n            let hint: string = hintObj.hint;\n            const hintIsMine = currentUser && currentUser.id === hintObj.author;\n            const author = getUserInGame(game, hintObj.author) || { name: '?', id: '?' };\n            const authorName = hintIsMine ? i18n.t('COMMON.ME', 'Ich') : author.name;\n\n            if (isGuesser && hintObj.isDuplicate) {\n                hint = 'LEIDER DOPPELT';\n            } \n\n            return (\n                <WordHint \n                    key={hintObj.author+index} \n                    hint={hint} \n                    color={author.color}\n                    duplicate={hintObj.isDuplicate}\n                    author={authorName}\n                />\n            );\n        });\n\n        return (\n            <div className=\"Game-field\">\n                <div className=\"Current-word\">\n                    <Typography variant=\"h5\">\n                        <Trans i18nKey=\"GAME.COMMON.WORD\">Begriff</Trans>\n                    </Typography>\n                    <WordCard \n                        word={currentWord} \n                        guesser={guesser.name} \n                        isGuesser={isGuesser}\n                        color={guesser.color} \n                        showInput={isGuesser}\n                        submitHint={this.guess}/>\n                </div>\n                <div className=\"Current-hints\">\n                    <Typography variant=\"h5\">\n                        <Trans i18nKey=\"GAME.COMMON.PLAYER_HINTS\">Spieler-Hinweise</Trans>\n                    </Typography>\n                    <div className=\"WordHint-list\">{currentHints}</div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default withSnackbar(GuessingView);\n","import React from 'react';\nimport { Trans } from 'react-i18next';\nimport i18n from '../../i18n';\nimport { Button, Typography } from '@material-ui/core';\nimport { withSnackbar, WithSnackbarProps } from 'notistack';\nimport { IGame, IHint } from '../../custom.d';\nimport { WordCard } from '../components/WordCard';\nimport { WordHint } from '../components/WordHint';\n\nimport { getCurrentUserInGame, getUserInGame } from '../../shared/functions';\nimport * as api from '../../shared/apiFunctions';\n\ntype SolutionViewProps = {\n    game: IGame\n}&WithSnackbarProps;\n\ntype SolutionViewState = {\n    shownMessage: boolean,\n    shownResult: boolean\n};\n\nclass SolutionView extends React.Component<SolutionViewProps,SolutionViewState> {\n    public state: SolutionViewState = { shownMessage: false, shownResult: false };\n    private _isMounted: boolean = false;\n\n    constructor(props: SolutionViewProps) {\n        super(props);\n\n        this.resolveRound = this.resolveRound.bind(this);\n    }\n\n    componentDidMount() {\n        this._isMounted = true;\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n    resolveRound(correct: boolean = true) {\n        api.resolveRound(this.props.game.id, correct);\n    }\n\n    render() {\n        const game: IGame = this.props.game;\n        const { shownMessage, shownResult } = this.state;\n        const currentUser = getCurrentUserInGame(game);\n        const guesser = getUserInGame(game, game.currentGuesser) ||  { name: '?', id: '?' };\n        const guesserName = guesser.name;\n        const isGuesser = currentUser && currentUser.id === guesser.id;\n        const isRoundHost = currentUser && currentUser.id === game.roundHost;\n\n        const currentWord = game.currentWord || '';\n        const currentGuess = game.currentGuess || '';\n        const currentHints = game.hints.map((hintObj: IHint, index: number) => {\n            const hintIsMine = currentUser && currentUser.id === hintObj.author;\n            const author = getUserInGame(game, hintObj.author) || { name: '?', id: '?' };\n            const authorName = hintIsMine ? i18n.t('COMMON.ME', 'Ich') : author.name;\n\n            return (\n                <WordHint \n                    key={hintObj.author+index} \n                    hint={hintObj.hint} \n                    color={author.color}\n                    author={authorName}\n                />\n            );\n        });\n\n        if (isRoundHost && !game.guessedRight && !shownMessage) {\n            this.props.enqueueSnackbar(i18n.t('GAME.MESSAGE.YOUR_TURN', 'Du bist dran!', { context: 'SOLUTION' }), {\n                variant: 'info',\n                preventDuplicate: true,\n                onClose: ()=>{ if(this._isMounted) this.setState({shownMessage: true}); }\n            });\n        }\n\n        if (!shownResult) {\n            const context = game.guessedRight ? 'CORRECT' : 'WRONG';\n            const variant = game.guessedRight ? 'success' : 'warning';\n            this.props.enqueueSnackbar(i18n.t('GAME.MESSAGE.RESULT', `${guesserName} hat geraten`, { context: context, guesserName: guesserName }), {\n                variant: variant,\n                preventDuplicate: true,\n                onClose: () => this.setState({shownResult: true})\n            });\n        }\n\n        let solutionButton1 = (\n            <Button variant=\"contained\" color=\"primary\" onClick={() => this.resolveRound(true)}>\n                <Trans i18nKey=\"GAME.SOLUTION.CONTINUE\">Weiter</Trans>\n            </Button>\n        );\n        let solutionButton2;\n        if (!game.guessedRight) {\n            solutionButton1 = (\n                <Button variant=\"contained\" onClick={() => this.resolveRound(true)}>\n                    <Trans i18nKey=\"GAME.SOLUTION.CONTINUE_RIGHT\">Das zählt trotzdem</Trans>\n                </Button>\n            );\n            solutionButton2 = (\n                <Button variant=\"contained\" color=\"primary\" onClick={() => this.resolveRound(false)}>\n                    <Trans i18nKey=\"GAME.SOLUTION.CONTINUE_WRONG\">Leider falsch</Trans>\n                </Button>\n            );\n        }\n\n        return (\n            <div className=\"Game-field\">\n                <div className=\"Current-word\">\n                    <Typography variant=\"h5\">\n                        <Trans i18nKey=\"GAME.COMMON.WORD\">Begriff</Trans>\n                    </Typography>\n                    <WordCard \n                        word={currentWord} \n                        guesser={guesserName} \n                        isGuesser={isGuesser}\n                        color={guesser.color} \n                        guess={currentGuess} \n                        guessedRight={game.guessedRight}/>\n                    {(isRoundHost || game.guessedRight) && solutionButton1}\n                    {isRoundHost && solutionButton2}\n                </div>\n                <div className=\"Current-hints\">\n                    <Typography variant=\"h5\">\n                        <Trans i18nKey=\"GAME.COMMON.PLAYER_HINTS\">Spieler-Hinweise</Trans>\n                    </Typography>\n                    <div className=\"WordHint-list\">{currentHints}</div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default withSnackbar(SolutionView);","import React from 'react';\nimport {GameLobby} from './GameLobby';\nimport {GamePreparation} from './GamePreparation';\nimport GameEndView from './GameEndView';\nimport {GameStats} from './components/GameStats';\nimport HintWritingView from './gamePhases/HintWritingView';\nimport HintComparingView from './gamePhases/HintComparingView';\nimport GuessingView from './gamePhases/GuessingView';\nimport SolutionView from './gamePhases/SolutionView';\nimport { IGame, GamePhase } from '../custom.d';\n\nimport { loadGame } from '../shared/apiFunctions';\nimport { setDocumentTitle } from '../shared/functions';\n\nconst POLLING_INTERVAL = 1000;\n\ntype JustOneGameProps = {\n    gameId: string,\n    setTheme?: (color: string)=>void\n};\ntype JustOneGameState = {\n    currentGame?: IGame\n};\n\nexport class JustOneGame extends React.Component<JustOneGameProps,JustOneGameState> {\n    public state: JustOneGameState = {};\n    private _interval: number|undefined;\n    private _isMounted: boolean = false;\n\n    componentDidMount() {\n        this._isMounted = true;\n\n        this.loadGame();\n\n        this._interval = window.setInterval(this.loadGame.bind(this), POLLING_INTERVAL);\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n        clearInterval(this._interval);\n    }\n\n    async loadGame() {\n        const id = this.props.gameId;\n        const game = await loadGame(id);\n        if (!this._isMounted) return;\n        if (!game) return;\n        setDocumentTitle(game.name);\n        this.setState({\n            currentGame: game\n        });\n    }\n\n    render() {\n        const {setTheme} = this.props;\n        const {currentGame} = this.state;\n\n        if (!currentGame) return null;\n\n        let gameContent;\n        let gameStats;\n\n        switch(currentGame.phase) {\n            case GamePhase.Init:\n                gameContent = <GameLobby game={currentGame} setTheme={setTheme} />;\n                break;\n            case GamePhase.Preparation:\n                gameContent = <GamePreparation game={currentGame} />;\n                break;\n            case GamePhase.HintWriting:\n                gameContent = <HintWritingView game={currentGame} />;\n                gameStats   = <GameStats game={currentGame} />;\n                break;\n            case GamePhase.HintComparing:\n                gameContent = <HintComparingView game={currentGame} />;\n                gameStats   = <GameStats game={currentGame} />;\n                break;\n            case GamePhase.Guessing:\n                gameContent = <GuessingView game={currentGame} />;\n                gameStats   = <GameStats game={currentGame} />;\n                break;\n            case GamePhase.Solution:\n                gameContent = <SolutionView game={currentGame} />;\n                gameStats   = <GameStats game={currentGame} />;\n                break;\n            case GamePhase.End:\n                gameContent = <GameEndView game={currentGame} />;\n                break;\n        }\n\n        return (\n            <div className=\"Game-content\">\n                {gameStats}\n                {gameContent}\n            </div>\n        );\n    }\n}\n","import React, { useState, Suspense } from 'react';\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    RouteComponentProps,\n} from 'react-router-dom';\nimport './App.scss';\nimport { Paper, CircularProgress } from '@material-ui/core';\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport { SnackbarProvider } from 'notistack';\n\nimport { SETTING_COLOR, SETTING_THEME, \n         ThemeMode, DEFAULT_PRIMARY_COLOR, DEFAULT_SECONDARY_COLOR } from './shared/constants';\n\nimport {HeaderBar} from './common/HeaderBar';\nimport JustOneHome from './just-one/JustOneHome';\nimport {JustOneGame} from './just-one/JustOneGame';\n\nimport './i18n';\n\nexport const App = () =>    {\n    const [userColor, setUserColor] = useState(localStorage.getItem(SETTING_COLOR));\n    const [userTheme, setUserTheme] = useState(localStorage.getItem(SETTING_THEME) || ThemeMode.AUTO);\n\n    let prefersDarkMode = useMediaQuery('(prefers-color-scheme: dark)');\n    if (userTheme === ThemeMode.BRIGHT) {\n        prefersDarkMode = false;\n    } else if (userTheme === ThemeMode.DARK) {\n        prefersDarkMode = true;\n    }\n\n    let primaryColor = userColor;\n    if (!primaryColor || !primaryColor.startsWith('#') || primaryColor.length !== 7) {\n        primaryColor = DEFAULT_PRIMARY_COLOR;\n    }\n\n    const applyUserTheme = (value: string) => {\n        setUserTheme(value);\n        localStorage.setItem(SETTING_THEME, value);\n    }\n\n    const theme = React.useMemo(\n        () =>\n            createMuiTheme({\n                palette: {\n                    primary: {\n                        main: primaryColor || DEFAULT_PRIMARY_COLOR\n                    },\n                    secondary: {\n                        main: DEFAULT_SECONDARY_COLOR,\n                    }, \n                    type: prefersDarkMode ? 'dark' : 'light',\n                },\n            }),\n        [prefersDarkMode, primaryColor],\n    );\n\n    const classNames = ['App'];\n    if (prefersDarkMode) classNames.push('App-dark');\n\n    return (\n        <ThemeProvider theme={theme}>\n            <Suspense fallback={<Loader classes={classNames}/>}>\n                <Router>\n                    <SnackbarProvider maxSnack={2} anchorOrigin={{ vertical: 'bottom', horizontal: 'center'}}>\n                        <Paper square elevation={0} className={classNames.join(' ')}>\n                            <HeaderBar userTheme={userTheme} applyUserTheme={applyUserTheme}/>\n                            <Switch>\n                                <Route path=\"/:gameId\" component={(props: RouteComponentProps<any>) => <JustOneGame gameId={props.match.params.gameId} setTheme={setUserColor}/>} />\n                                <Route children={<JustOneHome/>} />\n                            </Switch> \n                        </Paper>\n                    </SnackbarProvider>\n                </Router>\n            </Suspense>\n        </ThemeProvider>\n    );    \n}\n\nexport default App;\n\n// TODO \nconst Loader = (props: {classes: string[]}) => {\n    let {classes} = props;\n    classes.push('App-loading');\n    return (\n        <Paper square elevation={0} className={classes.join(' ')}>\n            <CircularProgress />\n        </Paper>\n    );\n};\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}