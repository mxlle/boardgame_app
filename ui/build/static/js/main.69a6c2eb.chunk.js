(this.webpackJsonpboardgame_app=this.webpackJsonpboardgame_app||[]).push([[0],{110:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=110},111:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(15),s=a.n(o),i=(a(83),a(8)),c=a(9),l=a(14),u=a(11),h=a(10),m=a(36),p=a(16),d=(a(84),a(153)),g=a(154),v=a(145),b=a(114),f=a(158),y=a(155),E=a(150),j=a(70),O=a(152),k=a(141),w=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).currentUserId=localStorage.getItem($)||"",n._interval=void 0,n.createGame=n.createGame.bind(Object(l.a)(n)),n.state={allGames:[]},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.loadGames(),this._interval=setInterval(this.loadGames.bind(this),2e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this._interval)}},{key:"loadGames",value:function(){var e=this;fetch("".concat(Z,"/all")).then((function(e){return e.json()})).then((function(t){var a=t.games||[];a=a.filter((function(t){return 0===t.phase||e.currentUserId&&t.players.findIndex((function(t){return t.id===e.currentUserId}))>-1})),e.setState({allGames:a})})).catch(console.log)}},{key:"createGame",value:function(){var e={id:"",name:"",words:[],players:[],host:"1",round:0,phase:0,hints:[],correctWords:[],wrongWords:[]};fetch("".concat(Z,"/add"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({game:e})}).then((function(e){console.log(e)})).catch(console.log)}},{key:"render",value:function(){var e=this.state.allGames.map((function(e){return r.a.createElement(m.b,{key:e.id,to:"/".concat(e.id)},"Spiele ".concat(e.id))}));return r.a.createElement("div",{className:"Game-list"},r.a.createElement(k.a,{variant:"contained",color:"primary",onClick:this.createGame},"Neues Spiel"),e)}}]),a}(r.a.Component);var C,I=a(146),P=a(156),N=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={value:""},n.handleChange=n.handleChange.bind(Object(l.a)(n)),n.submitHint=n.submitHint.bind(Object(l.a)(n)),n.keyPressed=n.keyPressed.bind(Object(l.a)(n)),n}return Object(c.a)(a,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"submitHint",value:function(){this.props.submitHint(this.state.value),this.setState({value:""})}},{key:"keyPressed",value:function(e){"Enter"===e.key&&this.submitHint()}},{key:"render",value:function(){return r.a.createElement("div",{className:"Word-hint-input"},r.a.createElement(P.a,{label:this.props.label||"Hinweis eingeben",value:this.state.value,onChange:this.handleChange,onKeyPress:this.keyPressed}),r.a.createElement(v.a,{color:"primary",disabled:!this.state.value,onClick:this.submitHint},r.a.createElement(I.a,null)))}}]),a}(r.a.Component),S=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.word,t=this.props.guesser,a="";t?a=this.props.guess?("ich"===t.toLowerCase()?"Mein ":t+"'s ")+"Rateversuch: "+this.props.guess:t+" muss raten":this.props.guess&&(a="Rateversuch: "+this.props.guess);var n=["Word-card"];return this.props.guess&&(this.props.guessedRight?n.push("Word-card-correct"):n.push("Word-card-wrong")),r.a.createElement("div",{className:n.join(" "),style:{borderColor:this.props.color}},this.props.showInput&&this.props.submitHint?r.a.createElement(N,{submitHint:this.props.submitHint,label:"Rateversuch"}):r.a.createElement("span",null,e),a&&r.a.createElement("span",{className:"Author-tag",style:{color:this.props.color}},a))}}]),a}(r.a.Component);!function(e){e[e.Init=0]="Init",e[e.HintWriting=1]="HintWriting",e[e.HintComparing=2]="HintComparing",e[e.Guessing=3]="Guessing",e[e.Solution=4]="Solution",e[e.End=5]="End"}(C||(C={}));var H=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e={backgroundColor:this.props.color},t={borderTopColor:this.props.color};return r.a.createElement("div",{className:"pencil"},r.a.createElement("div",{className:"body",style:e}),r.a.createElement("div",{className:"nib",style:t}))}}]),a}(r.a.Component),G=a(157),W=a(147),T=a(148),R=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.hint,t=this.props.color,a={color:t,borderColor:t},n=this.props.author,o=this.props.showPencil||!this.props.hint,s=this.props.showCheck,i=this.props.showDuplicateToggle,c=this.props.toggleDuplicate,l=["Word-hint"];o&&l.push("Word-hint-writing"),this.props.duplicate&&l.push("Word-hint-duplicate"),e&&e.length>20?l.push("Word-hint-huge"):e&&e.length>14&&l.push("Word-hint-long");var u=l.join(" ");return this.props.showInput&&this.props.submitHint?r.a.createElement("div",{className:u,style:a},r.a.createElement(N,{submitHint:this.props.submitHint}),n&&r.a.createElement("span",{className:"Author-tag"},n)):r.a.createElement("div",{className:u,style:a},!s&&e,s&&r.a.createElement("span",{className:"Done-icon"},"\u2713"),o&&r.a.createElement(H,{color:t}),i&&c&&r.a.createElement(G.a,{className:"Duplicate-toggle",icon:r.a.createElement(W.a,null),checkedIcon:r.a.createElement(T.a,null),checked:this.props.duplicate,onChange:function(){return c()}}),n&&r.a.createElement("span",{className:"Author-tag"},n))}}]),a}(r.a.Component),D=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).currentUserId=localStorage.getItem("playerId")||"",n.submitHint=n.submitHint.bind(Object(l.a)(n)),n.toggleDuplicate=n.toggleDuplicate.bind(Object(l.a)(n)),n.showHints=n.showHints.bind(Object(l.a)(n)),n.guess=n.guess.bind(Object(l.a)(n)),n.resolveRound=n.resolveRound.bind(Object(l.a)(n)),n.state={},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){}},{key:"submitHint",value:function(e){var t=U(this.props.game,this.currentUserId);if(t){var a={hint:e,author:t};fetch("".concat(Z,"/").concat(this.props.game.id,"/hint"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({hint:a})}).catch(console.log)}}},{key:"toggleDuplicate",value:function(e){fetch("".concat(Z,"/").concat(this.props.game.id,"/toggleDuplicateHint"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({hintIndex:e})}).catch(console.log)}},{key:"showHints",value:function(){fetch("".concat(Z,"/").concat(this.props.game.id,"/showHints"),{method:"PUT"}).catch(console.log)}},{key:"guess",value:function(e){fetch("".concat(Z,"/").concat(this.props.game.id,"/guess"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({guess:e})}).catch(console.log)}},{key:"resolveRound",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];fetch("".concat(Z,"/").concat(this.props.game.id,"/resolve"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({countCorrect:e})}).catch(console.log)}},{key:"render",value:function(){var e,t=this,a=this.props.game,n=U(a,this.currentUserId),o=a.currentGuesser?a.currentGuesser:{name:"?",id:"?"},s=n&&n.id===o.id,i=a.phase===C.HintWriting,c=a.phase===C.HintComparing,l=a.phase===C.Guessing,u=a.phase===C.Solution,h=this.currentUserId===a.hints[0].author.id,m=h&&c,p=s&&!u?"?":a.currentWord||"",d=a.currentGuess||"",g=a.hints.map((function(e,a){var o=e.hint,h=n&&n.id===e.author.id,p=!o||l||u||h||c&&!s,d=!o&&i&&h;l&&s&&e.isDuplicate&&(o="LEIDER DOPPELT");var g=h?"Ich":e.author.name;return r.a.createElement(R,{key:e.author.id+a,hint:o,color:e.author.color,showInput:d,submitHint:t.submitHint,showCheck:!p,duplicate:e.isDuplicate,showDuplicateToggle:m,toggleDuplicate:function(){return t.toggleDuplicate(a)},author:g})})),v=r.a.createElement(k.a,{variant:"contained",color:"primary",onClick:function(){return t.resolveRound(!0)}},"Super, weiter geht's");a.guessedRight||(v=r.a.createElement(k.a,{variant:"contained",onClick:function(){return t.resolveRound(!0)}},"Das z\xe4hlt trotzdem"),e=r.a.createElement(k.a,{variant:"contained",color:"primary",onClick:function(){return t.resolveRound(!1)}},"Leider falsch"));var f=l&&s,y=s?"Ich":o.name;return r.a.createElement("div",{className:"Game-field"},r.a.createElement("div",{className:"Current-word"},r.a.createElement(b.a,{variant:"h5",className:"appTitle"},"Begriff"),r.a.createElement(S,{word:p,guesser:y,color:o.color,showInput:f,submitHint:this.guess,guess:u?d:"",guessedRight:a.guessedRight}),u&&(!s||a.guessedRight)&&v,u&&!s&&e),r.a.createElement("div",{className:"Current-hints"},r.a.createElement(b.a,{variant:"h5",className:"appTitle"},"Spieler-Hinweise"),r.a.createElement("div",{className:"WordHint-list"},g),c&&h&&r.a.createElement(k.a,{variant:"contained",color:"primary",onClick:this.showHints},o.name+" kann losraten!")))}}]),a}(r.a.Component);function U(e,t){return e.players.find((function(e){return e.id===t}))}var A=a(149),_=a(151),J=a(90).default,L=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={words:[]},n.handleChange=n.handleChange.bind(Object(l.a)(n)),n.setRandomColor=n.setRandomColor.bind(Object(l.a)(n)),n.addPlayer=n.addPlayer.bind(Object(l.a)(n)),n}return Object(c.a)(a,[{key:"handleChange",value:function(e){if(["name","color"].includes(e.target.name)){var t={id:"",name:this.props.name,color:this.props.color};"name"===e.target.name?t.name=e.target.value:"color"===e.target.name&&(t.color=e.target.value),this.props.updatePlayer(t)}else if(e.target.name.startsWith("word")){var a=parseInt(e.target.name.substr(4)),n=e.target.value;this.setState((function(e,t){var r=e.words;return r[a]=n,{words:r}}))}}},{key:"setRandomColor",value:function(){var e={id:"",name:this.props.name,color:M()};this.props.updatePlayer(e)}},{key:"addPlayer",value:function(){var e={id:"",name:this.props.name,color:this.props.color,enteredWords:this.state.words};this.props.addPlayer(e)}},{key:"render",value:function(){var e=[];e.push(r.a.createElement(b.a,{variant:"subtitle1",key:"heading"},"Gebe ",2," W\xf6rter f\xfcr das Spiel ein"));for(var t=0;t<2;t++)e.push(r.a.createElement(P.a,{required:!0,label:"Wort ".concat(t+1),placeholder:"F\xfcr den Stapel",name:"word".concat(t),key:"word".concat(t),value:this.state.words[t]||"",onChange:this.handleChange}));var a=!this.props.name||this.state.words.length<2||this.state.words.some((function(e){return!e||0===e.length}));return r.a.createElement("div",{className:"New-player"},r.a.createElement(P.a,{required:!0,label:"Spielername",name:"name",value:this.props.name,onChange:this.handleChange,InputProps:{endAdornment:r.a.createElement(A.a,{position:"end"},r.a.createElement(E.a,{style:{color:this.props.color}}))}}),r.a.createElement(P.a,{required:!0,label:"Spielerfarbe",placeholder:"Html-Farbcode",name:"color",value:this.props.color,onChange:this.handleChange,InputProps:{style:{color:this.props.color},endAdornment:r.a.createElement(A.a,{position:"end"},r.a.createElement(_.a,{style:{color:this.props.color}}))}}),r.a.createElement(k.a,{variant:"contained",onClick:this.setRandomColor},"Zufallsfarbe"),e,r.a.createElement(k.a,{variant:"contained",color:"primary",disabled:a,onClick:this.addPlayer},"Mitspielen"))}}]),a}(r.a.Component);function M(){return"#"+new J({dictionary:["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"]})(6)}var B=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={name:localStorage.getItem(Q)||"",color:localStorage.getItem(V)||M()||"black"},n.addPlayer=n.addPlayer.bind(Object(l.a)(n)),n.setPlayerProps=n.setPlayerProps.bind(Object(l.a)(n)),n.startGame=n.startGame.bind(Object(l.a)(n)),n}return Object(c.a)(a,[{key:"setPlayerProps",value:function(e){this.setState({name:e.name,color:e.color||""})}},{key:"addPlayer",value:function(e){var t=this,a=localStorage.getItem($)||"";e.id=a,fetch("".concat(Z,"/").concat(this.props.game.id,"/addPlayer"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({player:e})}).then((function(e){return e.json()})).then((function(e){t.setLocalPlayer(e.player),t.setState({color:M()||"black",name:""})})).catch(console.log)}},{key:"setLocalPlayer",value:function(e){localStorage.setItem($,e.id),localStorage.setItem(Q,e.name),e.color&&localStorage.setItem("playerColor",e.color),this.props.setTheme&&e.color&&this.props.setTheme(e.color)}},{key:"startGame",value:function(){fetch("".concat(Z,"/").concat(this.props.game.id,"/start"),{method:"PUT"}).then((function(e){})).catch(console.log)}},{key:"render",value:function(){var e=this.props.game.players.map((function(e){return r.a.createElement(R,{key:e.id,hint:e.name,color:e.color})})),t=localStorage.getItem($)||"",a=!!t&&this.props.game.host===t,n=!!t&&this.props.game.players.findIndex((function(e){return e.id===t}))>-1,o=n||!this.state.name?"?":this.state.name,s=n||!this.state.color?M():this.state.color;return r.a.createElement("div",{className:"Game-lobby"},r.a.createElement("div",{className:"New-player"},!n&&r.a.createElement(L,{name:this.state.name,color:this.state.color,updatePlayer:this.setPlayerProps,addPlayer:this.addPlayer}),a&&r.a.createElement(k.a,{variant:"contained",color:"primary",disabled:this.props.game.players.length<3,onClick:this.startGame},"Spiel beginnen")),r.a.createElement("div",{className:"Player-list"},e,r.a.createElement(R,{hint:o,color:s,showPencil:!0})))}}]),a}(r.a.Component),F=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.game,t=e.correctWords.map((function(e){return r.a.createElement(S,{key:e.word,word:e.word,guess:e.guess,guessedRight:!0})})),a=e.wrongWords.map((function(e){return r.a.createElement(S,{key:e.word,word:e.word,guess:e.guess,guessedRight:!1})}));return r.a.createElement("div",{className:"Game-end-view"},r.a.createElement("div",{className:"Correct-words"},r.a.createElement("h2",null,"Richtig (",e.correctWords.length,")"),t),r.a.createElement("div",{className:"Wrong-words"},r.a.createElement("h2",null,"Falsch (",e.wrongWords.length,")"),a))}}]),a}(r.a.Component),x=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e,t=this.props.game,a=!!t.hints.length&&t.hints[0].author.name,n=t.currentGuesser?t.currentGuesser.name:"?";switch(t.phase){case C.HintWriting:var o=t.players.filter((function(e){return t.currentGuesser&&e.id!==t.currentGuesser.id})).map((function(e){return e.name}));e=o.slice(0,o.length-1).join(", ")+" und "+o[o.length-1]+" schreiben Hinweise auf...";break;case C.HintComparing:e=a+" \xfcberpr\xfcft die Hinweise auf ung\xfcltige oder doppelte W\xf6rter...";break;case C.Guessing:e=n+" versucht den Begriff zu erraten...";break;case C.Solution:e=t.guessedRight?n+" lag genau richtig!":n+" lag daneben! "+a+" entscheidet ob es trotzdem z\xe4hlt..."}return r.a.createElement("div",{className:"Game-progress"},r.a.createElement("div",null,"Runde: ",t.round+1,"/",t.words.length,", Richtige: ",t.correctWords.length,", Falsche: ",t.wrongWords.length),r.a.createElement("div",null,"Phase: ",e))}}]),a}(r.a.Component),z=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).currentUserId=localStorage.getItem($)||"",n._interval=void 0,n.state={},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.loadGame(),this._interval=setInterval(this.loadGame.bind(this),2e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this._interval)}},{key:"loadGame",value:function(){var e=this,t=this.props.gameId;t&&fetch("".concat(Z,"/").concat(t)).then((function(e){return e.json()})).then((function(t){e.setState({currentGame:t.game})})).catch(console.log)}},{key:"render",value:function(){var e,t,a=this.state.currentGame;return a&&(a.phase===C.Init?e=r.a.createElement(B,{game:a,setTheme:this.props.setTheme}):a.phase===C.End?e=r.a.createElement(F,{game:a}):(t=r.a.createElement(x,{game:a}),e=r.a.createElement(D,{game:a}))),r.a.createElement("div",{className:"Game-content"},t,e)}}]),a}(r.a.Component),q=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return this.props.gameId?r.a.createElement(z,{gameId:this.props.gameId}):r.a.createElement(w,null)}}]),a}(r.a.Component),K="justone.okj.name"===window.location.hostname?"":":9000",Z=window.location.protocol+"//"+window.location.hostname+K+"/api"+"/games",$="playerId",Q="playerName",V="playerColor",X=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={primaryColor:localStorage.getItem(V)||"#43a047"},n.setTheme=n.setTheme.bind(Object(l.a)(n)),n}return Object(c.a)(a,[{key:"setTheme",value:function(e){this.setState({primaryColor:e})}},{key:"render",value:function(){var e=this,t=localStorage.getItem(Q),a=Object(j.a)({palette:{primary:{main:this.state.primaryColor},secondary:{main:"#d32f2f"}}});return r.a.createElement(m.a,null,r.a.createElement(O.a,{theme:a},r.a.createElement("div",{className:"App"},r.a.createElement(d.a,{position:"sticky"},r.a.createElement(g.a,null,r.a.createElement(m.b,{to:"/",className:"ButtonLink"},r.a.createElement(v.a,{edge:"start",color:"inherit","aria-label":"home"},r.a.createElement(y.a,null))),r.a.createElement(b.a,{variant:"h2",className:"appTitle"},"Nur ein Wort!"),t&&r.a.createElement(f.a,{label:t,icon:r.a.createElement(E.a,null)}))),r.a.createElement(p.c,null,r.a.createElement(p.a,{path:"/:gameId",component:function(t){return r.a.createElement(q,{gameId:t.match.params.gameId,setTheme:e.setTheme})}}),r.a.createElement(p.a,{children:r.a.createElement(q,null)})))))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(X,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},78:function(e,t,a){e.exports=a(111)},83:function(e,t,a){},84:function(e,t,a){}},[[78,1,2]]]);
//# sourceMappingURL=main.69a6c2eb.chunk.js.map