(this.webpackJsonpboardgame_app=this.webpackJsonpboardgame_app||[]).push([[0],{181:function(e,t,n){e.exports=n(236)},186:function(e,t,n){},187:function(e,t,n){},231:function(e,t){},236:function(e,t,n){"use strict";n.r(t);var a,r=n(0),i=n.n(r),o=n(12),c=n.n(o),s=(n(186),n(52)),l=n(15),u=n(58),m=n(23),d=(n(187),n(239)),p=n(271),h=n(165),g=n(299),f=n(298),E=n(48);!function(e){e.AUTO="automatisch",e.BRIGHT="hell",e.DARK="dunkel"}(a||(a={}));var b,y,O,v,T={rootSizing:{height:"100%",width:"100%",minHeight:"100vh"},flexCenter:{display:"flex",alignItems:"center",justifyContent:"center"},handwriting:{fontFamily:["Gloria Hallelujah","cursive"].join(",")}},C=n(63),k=n(145),I=n(274),j=n(277),N=n(278),A=n(279),G=n(76),w=n(281),R=n(167),M=n(283),S=n(284),P=n(280),L=n(282),x=n(285),_=n(286),K=n(305),H=n(5),U=n(6),D=n(7),W=n(9),B=n(8),F=n(304),Y=n(273),q=n(275),V=n(240),$=n(276),J=function(e){Object(W.a)(n,e);var t=Object(B.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(D.a)(n,[{key:"render",value:function(){var e=this.props,t=e.tKey,n=e.open,a=e.onClose,r=e.selectedValue,o=e.possibleValues;return i.a.createElement(F.a,{onClose:function(){a(r)},open:n},i.a.createElement(Y.a,null,i.a.createElement(I.a,{i18nKey:t},"Setting")),i.a.createElement(q.a,null,o.map((function(e){return i.a.createElement(V.a,{button:!0,onClick:function(){return function(e){a(e)}(e.val)},key:e.val,selected:r===e.val},i.a.createElement($.a,{primary:e.tKey?i.a.createElement(I.a,{i18nKey:e.tKey},e.val):e.displayVal||e.val}))}))))}}]),n}(i.a.Component),z=Object(H.a)((function(e){return Object(K.a)({root:{marginBottom:e.spacing(4),padding:e.spacing(1)},title:Object(C.a)({flex:"1 1 auto",letterSpacing:4,fontSize:"4vw"},e.breakpoints.up("lg"),{fontSize:40}),linkBtn:{color:"inherit"}})}))((function(e){var t=Object(k.a)().i18n,n=e.userTheme,r=e.applyUserTheme,o=e.classes,c=i.a.useState(!1),l=Object(s.a)(c,2),m=l[0],d=l[1],p=i.a.useState(!1),h=Object(s.a)(p,2),g=h[0],f=h[1],E=i.a.useState(t.language),b=Object(s.a)(E,2),y=b[0],O=b[1],v=i.a.useState(),T=Object(s.a)(v,2),C=T[0],K=T[1],H=function(e){var t=e.currentTarget;K(t)},U=function(){K(void 0)},D=localStorage.getItem("playerName"),W=[{val:a.AUTO,tKey:"THEMEPICK.AUTO"},{val:a.BRIGHT,tKey:"THEMEPICK.BRIGHT"},{val:a.DARK,tKey:"THEMEPICK.DARK"}];return i.a.createElement(j.a,{position:"sticky",className:o.root},i.a.createElement(N.a,null,i.a.createElement(u.b,{to:"/",className:o.linkBtn},i.a.createElement(A.a,{edge:"start",color:"inherit","aria-label":"home"},i.a.createElement(P.a,null))),i.a.createElement(G.a,{variant:"h2",className:o.title},i.a.createElement(I.a,{i18nKey:"APP_TITLE"},"Just one word!")),D?i.a.createElement(w.a,{onClick:H,color:"inherit",startIcon:i.a.createElement(L.a,null)},D):i.a.createElement(A.a,{onClick:H,edge:"end",color:"inherit"},i.a.createElement(L.a,null)),i.a.createElement(R.a,{anchorEl:C,keepMounted:!0,open:Boolean(C),onClose:U},i.a.createElement(M.a,{onClick:function(){d(!0),U()}},i.a.createElement(S.a,null,i.a.createElement(x.a,null)),i.a.createElement(I.a,{i18nKey:"THEMEPICK.HEADING"},"Dark theme")),i.a.createElement(M.a,{onClick:function(){f(!0),U()}},i.a.createElement(S.a,null,i.a.createElement(_.a,null)),i.a.createElement(I.a,{i18nKey:"LANGPICK.HEADING"},"Language"))),i.a.createElement(J,{tKey:"THEMEPICK.HEADING",open:m,onClose:function(e){r(e),d(!1)},selectedValue:n,possibleValues:W}),i.a.createElement(J,{tKey:"LANGPICK.HEADING",open:g,onClose:function(e){!function(e){O(e),t.changeLanguage(e)}(e),f(!1)},selectedValue:y,possibleValues:[{val:"de",tKey:"LANGPICK.DE"},{val:"en",tKey:"LANGPICK.EN"}]})))})),Q=n(287),X=function(e){Object(W.a)(n,e);var t=Object(B.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(D.a)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.classes;return i.a.createElement(d.a,{square:!0,elevation:0,className:"".concat(n.root," ").concat(t)},i.a.createElement(Q.a,null))}}]),n}(i.a.Component),Z=Object(H.a)((function(e){return Object(K.a)({root:Object(l.a)({},T.flexCenter)})}))(X),ee=n(14),te=n.n(ee),ne=n(20),ae=n(11),re=n(290),ie=n(301),oe=n(300),ce=n(291);!function(e){e[e.Init=0]="Init",e[e.Preparation=1]="Preparation",e[e.HintWriting=2]="HintWriting",e[e.HintComparing=3]="HintComparing",e[e.Guessing=4]="Guessing",e[e.Solution=5]="Solution",e[e.End=6]="End"}(b||(b={})),function(e){e.Subscribe="subscribe",e.Unsubscribe="unsubscribe",e.UpdateList="updateGameList",e.Update="updateGame",e.ApiCall="apiCall.games",e.Notification="notification",e.Confetti="confetti"}(y||(y={})),function(e){e.GetRandom="getRandomWord"}(O||(O={})),function(e){e.Connect="connect",e.ConnectError="connect_error",e.ConnectTimeout="connect_timeout",e.Connecting="connecting",e.Disconnect="disconnect",e.Error="error",e.Reconnect="reconnect",e.ReconnectAttempt="reconnect_attempt",e.ReconnectFailed="reconnect_failed",e.ReconnectError="reconnect_error",e.Reconnecting="reconnecting",e.Ping="ping",e.Pong="pong"}(v||(v={}));var se=function(e){return"game.".concat(e)},le=n(288),ue=n(289),me=n(73),de=n.n(me),pe=n(146),he=n.n(pe);function ge(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?e.round=0:e.round++,e.phase=b.HintWriting}function fe(e,t,n,a){var r=e.rounds[e.round].hints.find((function(e){return e.id===t&&e.authorId===a}));r&&(r.hint=n.trim(),e.rounds[e.round].hints.every((function(e){return e.hint&&e.hint.length>0}))&&(e.isTwoPlayerVariant?function(e){var t=e.rounds[e.round].hints,n=we(t.length);t[n].isDuplicate=!0,e.phase=b.Guessing}(e):function(e){for(var t=e.rounds[e.round],n=t.hints,a=0;a<n.length;a++){for(var r,i=n[a],o=a+1;o<n.length;o++){var c=n[o];Te(i.hint,c.hint)&&(i.isDuplicate=!0,c.isDuplicate=!0)}!i.isDuplicate&&Te(i.hint,t.word)&&(i.isDuplicate=!0),!i.isDuplicate&&(null===(r=i.hint)||void 0===r?void 0:r.includes(" "))&&(i.isDuplicate=!0)}e.phase=b.HintComparing}(e)))}function Ee(e,t){if(e.phase===b.Guessing){var n=e.rounds[e.round];n.guess=t,n.correct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return ye(e).toLowerCase()===ye(t).toLowerCase()}(n.guess,n.word),e.phase=b.Solution}}function be(e,t){return e.phase!==b.Solution||(e.rounds[e.round].countAnyway=t,e.round<e.rounds.length-1?ge(e):function(e){e.phase=b.End,e.endTime=new Date}(e)),e}function ye(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.split(" ")[0]}function Oe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=he.a.get(e,t),a=e.length+t.length;return(a-n)/a}function ve(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Math.min(e.length,t.length);n>0;n--)for(var a=0;a<=e.length-n;a++){var r=e.substr(a,n);if(t.includes(r))return r}return""}function Te(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=!1,a=Oe(e=e.toLowerCase(),t=t.toLowerCase());if(a>=.8)n=!0;else{var r=ve(e,t),i=r.length;e.startsWith(r)&&i++,t.startsWith(r)&&i++;var o=i/Math.min(e.length,t.length);i>=5&&o>.5&&(n=!0)}return n}function Ce(e,t){return e.players.find((function(e){return e.id===t}))}function ke(e){return e.rounds.filter((function(e){return null!==e.correct&&(e.correct||e.countAnyway)}))}function Ie(e){return e.rounds.filter((function(e){return null!==e.correct&&!e.correct&&!e.countAnyway}))}function je(e){var t=e.rounds[e.round],n=Ne(e),a=Ce(e,t.guesserId)||{name:"?",id:"?"},r=n&&n.id===a.id,i=Ce(e,t.hostId)||{name:"?",id:"?"};return{currentRound:t,currentUser:n,guesser:a,isGuesser:r,roundHost:i,isRoundHost:n&&n.id===i.id,isGameHost:!!(null===n||void 0===n?void 0:n.id)&&e.hostId===n.id,currentWord:e.phase===b.Solution||!r&&n?t.word:"?"}}function Ne(e){return Ce(e,Ae())}function Ae(){var e=localStorage.getItem("playerId")||"";return e||(e=Ge(),localStorage.setItem("playerId",e)),e}function Ge(){return Math.random().toString(36).replace("0.","")}function we(e){return Math.floor(Math.random()*e)}function Re(e,t){var n=e/t,a=n*n;return Math.ceil(a*t)}var Me=function(e){Object(W.a)(n,e);var t=Object(B.a)(n);function n(){var e;Object(U.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).currentUserId=localStorage.getItem("playerId")||"",e.currentUserName=localStorage.getItem("playerName")||"",e}return Object(D.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.allGames,a=t.deleteGame,r=n.filter((function(e){return e.phase===b.Init&&!Ne(e)})),o=n.filter((function(e){return![b.Init,b.End].includes(e.phase)||e.phase===b.Init&&!!Ne(e)})),c=n.filter((function(e){return e.phase===b.End})),s=function(t){var n=t.players.map((function(e){return e.name})).join(", ")||"-",r=(new Date).getTime();return i.a.createElement(V.a,Object.assign({key:t.id},{to:"/".concat(t.id)},{component:u.b,button:!0}),i.a.createElement($.a,{id:t.id,primary:"".concat(t.name||t.id),secondary:i.a.createElement(I.a,{i18nKey:"HOME.GAME_LIST.PLAYERS"},"Players: ",{playersString:n})}),(e.currentUserId===t.hostId||function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(new Date).getTime();if(null===e||void 0===e?void 0:e.creationTime){var n=t-new Date(e.creationTime).getTime();return n>6048e5}return[b.Init,b.End].includes(e.phase)}(t,r))&&i.a.createElement(le.a,null,i.a.createElement(A.a,{onClick:function(){return a(t.id)}},i.a.createElement(de.a,null))))},l=r.map(s),m=o.map(s),p=c.map(s),h=[{key:"ongoing",elementList:m,heading:i.a.createElement(I.a,{i18nKey:"HOME.GAME_LIST.ONGOING"},"Ongoing")},{key:"new",elementList:l,heading:i.a.createElement(I.a,{i18nKey:"HOME.GAME_LIST.NEW"},"New")},{key:"done",elementList:p,heading:i.a.createElement(I.a,{i18nKey:"HOME.GAME_LIST.DONE"},"Finished")}].filter((function(e){return e.elementList.length>0})).map((function(e){return i.a.createElement(ue.a,{item:!0,xs:12,key:e.key},i.a.createElement(d.a,null,i.a.createElement(G.a,{variant:"h5"},e.heading),i.a.createElement(q.a,null,e.elementList)))}));return i.a.createElement(ue.a,{container:!0,spacing:2,className:"GameList"},h)}}]),n}(i.a.Component),Se=function(e){Object(W.a)(n,e);var t=Object(B.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(D.a)(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.loading,a=e.classes;return i.a.createElement("div",{className:a.root},t,n&&i.a.createElement(Q.a,{size:24,className:a.progress}))}}]),n}(i.a.Component),Pe=Object(H.a)((function(e){return Object(K.a)({root:{position:"relative"},progress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}})}))(Se),Le=n(147),xe=n.n(Le),_e=n(148),Ke=n.n(_e),He=xe()({path:"/api",enablesXDR:!0});He.on(v.Connect,(function(){console.debug("Socket.io connected:  "+He.id)})),He.on(v.ConnectError,(function(e){return console.error("connect_error",e)})),He.on(v.Error,(function(e){return console.error("error",e)})),He.on(v.ConnectTimeout,(function(e){return console.error("connect_timeout",e)})),He.on(v.Disconnect,(function(e){return console.error("disconnect",e)}));var Ue=He,De=new Ke.a,We=new Proxy({},{get:function(e,t){return function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return new Promise((function(e,a){Ue.emit(y.ApiCall,{action:t,auth:Ae(),params:n},(function(t,n){t?a(t):e(n)}))}))}}}),Be=n(116),Fe=n(149),Ye=n(151),qe=n(55);function Ve(){return Be.a.language||window.localStorage.i18nextLng||"de"}Be.a.use(Fe.a).use(Ye.a).use(qe.e).init({backend:{queryStringParams:{v:"1.0.3"}},fallbackLng:"en",debug:!0,initImmediate:!1,whitelist:["en","de"],interpolation:{escapeValue:!1}});var $e=n(96),Je=n.n($e),ze=["#e51235","#d81b60","#8e24aa","#6e45c1","#4959cc","#1e88e5","#039be5","#00acc1","#00897b","#43a047","#7cb342","#c0ca33","#ffc215","#ffab00","#ff6d00","#f4511e"];function Qe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e&&ze.includes(e))return e;var n=ze.filter((function(e){return!t.includes(e)}));return 0===n.length&&(n=ze),n[Math.floor(Math.random()*n.length)]}var Xe=function(e){Object(W.a)(n,e);var t=Object(B.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(D.a)(n,[{key:"render",value:function(){var e=this.props,t=e.selected,n=e.select,a=e.classes,r=ze.map((function(e){var r=t===e,o={backgroundColor:e,padding:r?4:16};return i.a.createElement(A.a,{className:a.button,onClick:function(){return n(e)},style:o,key:e},r&&i.a.createElement(Je.a,null))}));return i.a.createElement(ie.a,{className:a.root},r)}}]),n}(i.a.Component),Ze=Object(H.a)((function(e){return Object(K.a)({root:{margin:e.spacing(4),width:128},button:{margin:0,borderRadius:0,color:"white"}})}))(Xe);function et(e){e.actionRequiredFrom=function(e){var t=[];switch(e.phase){case b.Init:break;case b.Preparation:t=e.players.filter((function(t){return!t.enteredWords||t.enteredWords.length<e.wordsPerPlayer})).map((function(e){return e.id}));break;case b.HintWriting:t=e.rounds[e.round].hints.filter((function(e){return!e.hint})).map((function(e){return e.authorId}));break;case b.HintComparing:t=[e.rounds[e.round].hostId];break;case b.Guessing:t=[e.rounds[e.round].guesserId];break;case b.Solution:e.rounds[e.round].correct||e.rounds[e.round].countAnyway||(t=[e.rounds[e.round].hostId]);break;case b.End:}return e.players.filter((function(e){return t.includes(e.id)})).map((function(e){return{id:e.id,name:e.name,color:e.color}}))}(e),sessionStorage.setItem("tutorial.game",JSON.stringify(e)),De.emit(y.Update,e)}function tt(){var e;return(e=JSON.parse(sessionStorage.getItem("tutorial.game")))||et(e=function(){var e={id:"",name:"",players:[],hostId:"",wordsPerPlayer:2,language:"en",joiningRequests:[],round:0,phase:0,rounds:[],actionRequiredFrom:[]};return e.id="tutorial",e.name="Tutorial",e.$isTutorial=!0,e}()),e}function nt(){sessionStorage.removeItem("tutorial.game")}function at(e){var t=tt();t.players.push(e),t.hostId=e.id,et(t),function e(t){setTimeout((function(){if(t.players.length<=dt.length){var n=dt[t.players.length-1];n.color=Qe(null,t.players.map((function(e){return e.color}))),t.players.push(n),et(t),e(t)}}),1e3)}(t)}function rt(e){var t=tt();switch(t.phase){case b.Init:t.wordsPerPlayer=1,t.phase=b.Preparation;break;case b.Preparation:st(t,0),function e(t,n){setTimeout((function(){n<lt.length?(st(t,n),et(t),e(t,n+1)):function(e){(function(e){e.rounds=[{word:lt[0],authorId:e.players[0].id,guesserId:e.players[1].id,hostId:e.players[2].id,hints:e.players.filter((function(t){return t.id!==e.players[1].id})).map((function(e){return{hint:"",authorId:e.id,id:e.id}})),guess:"",correct:null,countAnyway:null},{word:lt[1],authorId:e.players[1].id,guesserId:e.players[2].id,hostId:e.players[3].id,hints:e.players.filter((function(t){return t.id!==e.players[2].id})).map((function(e){return{hint:"",authorId:e.id,id:e.id}})),guess:"",correct:null,countAnyway:null},{word:lt[2],authorId:e.players[2].id,guesserId:e.players[3].id,hostId:e.players[0].id,hints:e.players.filter((function(t){return t.id!==e.players[3].id})).map((function(e){return{hint:"",authorId:e.id,id:e.id}})),guess:"",correct:null,countAnyway:null},{word:lt[3],authorId:e.players[3].id,guesserId:e.players[0].id,hostId:e.players[1].id,hints:e.players.filter((function(t){return t.id!==e.players[0].id})).map((function(e){return{hint:"",authorId:e.id,id:e.id}})),guess:"",correct:null,countAnyway:null}]})(e),ge(e,!0),et(e)}(t)}),1e3)}(t,1);break;case b.HintWriting:var n=0;e&&(fe(t,Ae(),e,Ae()),n++),ct(t,n);break;case b.HintComparing:t.phase=b.Guessing,1===t.rounds[t.round].guesserId.length&&setTimeout((function(){ot(t),et(t)}),1e3);break;case b.Guessing:ot(t,e);break;case b.Solution:e&&!t.rounds[t.round].correct&&De.emit(y.Confetti),(t=be(t,!!e)).phase===b.HintWriting&&t.rounds[t.round].guesserId.length>1&&ct(t,0)}et(t)}function it(e,t){!function(e,t){if(e.phase===b.HintComparing){var n=e.rounds[e.round].hints.find((function(e){return e.id===t}));n&&(n.isDuplicate=!n.isDuplicate)}}(e,t),et(e)}function ot(e,t){t||(t=ut[e.round]),Ee(e,t),e.phase=b.Solution,e.rounds[e.round].correct&&De.emit(y.Confetti)}function ct(e,t){setTimeout((function(){if(t<dt.length){var n=e.rounds[e.round];fe(e,n.hints[t].id,mt[n.word][t],n.hints[t].authorId),et(e),ct(e,t+1)}e.phase===b.HintComparing&&1!==e.round&&1===e.rounds[e.round].hostId.length&&(e.phase=b.Guessing,1===e.rounds[e.round].guesserId.length&&setTimeout((function(){ot(e),et(e)}),1e3),et(e))}),1e3)}function st(e,t){var n=lt[t],a=e.players[t];a.enteredWords?a.enteredWords.push(n):e.players[t].enteredWords=[n]}var lt=["Internet","Astronaut","Titanic","Quidditch"],ut=["Internet","Apollo","Tiatnic","Quidditch"],mt={Internet:["online","www","Browser"],Astronaut:["NASA","Armstrong","Armstrong"],Quidditch:["Sport","Potter","Harry"],Titanic:["Iceberg","1912","Leonardo"]},dt=[{name:"Sarah",id:"1"},{name:"Tom",id:"2"},{name:"Lisa",id:"3"}];var pt,ht=[[{content:i.a.createElement(I.a,{i18nKey:"TUTORIAL.LOBBY.NAME"},"Enter your name"),title:i.a.createElement(I.a,{i18nKey:"TUTORIAL.LOBBY.WELCOME"},"Welcome"),target:".name-input",disableBeacon:!0},{content:i.a.createElement(I.a,{i18nKey:"TUTORIAL.LOBBY.COLOR"},"Choose a color"),target:".name-input + div"},{content:i.a.createElement(I.a,{i18nKey:"TUTORIAL.LOBBY.JOIN"},"Join the game"),target:".submitBtn"}],[{content:i.a.createElement(I.a,{i18nKey:"TUTORIAL.LOBBY.TEAMMATES"},"Here are your teammates"),title:i.a.createElement(I.a,{i18nKey:"TUTORIAL.LOBBY.WELCOME_NAME"},"Hello friend"),target:".Player-list",placement:"left",disableBeacon:!0},{content:i.a.createElement(I.a,{i18nKey:"TUTORIAL.LOBBY.START"},"Start the game"),title:i.a.createElement(I.a,{i18nKey:"TUTORIAL.LOBBY.START_TITLE"},"Let's start"),target:".submitBtn"}]],gt=[[{content:i.a.createElement(I.a,{i18nKey:"TUTORIAL.PREPARATION.EXPLANATION"},"Enter a word"),title:i.a.createElement(I.a,{i18nKey:"TUTORIAL.PREPARATION.WELCOME"},"Game preparation"),target:".New-player",placement:"center",disableBeacon:!0},{content:i.a.createElement(I.a,{i18nKey:"TUTORIAL.PREPARATION.WORD",tOptions:{word:lt[0]}},"Enter word"),target:".MuiTextField-root"},{content:i.a.createElement(I.a,{i18nKey:"TUTORIAL.PREPARATION.SUBMIT"},"Submit your word"),target:".submitBtn"}]],ft=[[{content:i.a.createElement(I.a,{i18nKey:"TUTORIAL.GAME.ENTER_HINT.1",tOptions:{word:lt[0],player:dt[0].name}},"Enter a hint"),title:i.a.createElement(I.a,{i18nKey:"TUTORIAL.GAME.ENTER_HINT.TITLE1"},"First round"),target:".WordHint-withInput",disableBeacon:!0}],[{content:i.a.createElement(I.a,{i18nKey:"TUTORIAL.GAME.ENTER_HINT.2",tOptions:{word:lt[1],player:dt[1].name}},"Enter a hint"),title:i.a.createElement(I.a,{i18nKey:"TUTORIAL.GAME.ENTER_HINT.TITLE2"},"Second round"),target:".WordHint-withInput",disableBeacon:!0}],[{content:i.a.createElement(I.a,{i18nKey:"TUTORIAL.GAME.ENTER_HINT.3",tOptions:{word:lt[2],player:dt[2].name}},"Enter a hint"),title:i.a.createElement(I.a,{i18nKey:"TUTORIAL.GAME.ENTER_HINT.TITLE3"},"Third round"),target:".WordHint-withInput",disableBeacon:!0}],[]],Et=[[],[{content:i.a.createElement(I.a,{i18nKey:"TUTORIAL.GAME.DUPLICATE_INFO"},"Notice that duplicate hints will be removed"),title:i.a.createElement(I.a,{i18nKey:"TUTORIAL.GAME.DUPLICATE_INFO_TITLE"},"Oh no!"),target:".Current-hints",placement:"center",disableBeacon:!0},{content:i.a.createElement(I.a,{i18nKey:"TUTORIAL.GAME.SOLUTION.WRONG_CONTINUE"},"Press here to continue"),target:".tutorialBtn"}],[{content:i.a.createElement(I.a,{i18nKey:"TUTORIAL.GAME.TOGGLE_INFO"},"Toggle hints"),title:i.a.createElement(I.a,{i18nKey:"TUTORIAL.GAME.TOGGLE_INFO_TITLE"},"Toggle hints"),target:".Current-hints",spotlightClicks:!1,placement:"center",disableBeacon:!0},{content:i.a.createElement(I.a,{i18nKey:"TUTORIAL.GAME.TOGGLE_BTN"},"Use the smiley"),target:".MuiCheckbox-root"},{content:i.a.createElement(I.a,{i18nKey:"TUTORIAL.GAME.START_GUESSING"},"Continue"),target:".submitBtn"}],[]],bt=[[],[],[],[{content:i.a.createElement(I.a,{i18nKey:"TUTORIAL.GAME.GUESS"},"Guess the word"),title:i.a.createElement(I.a,{i18nKey:"TUTORIAL.GAME.GUESS_TITLE"},"Your turn!"),target:".WordCard-withInput",disableBeacon:!0}]],yt=[[{content:i.a.createElement(I.a,{i18nKey:"TUTORIAL.GAME.SOLUTION.CONTINUE",tOptions:{player:dt[0].name}},"This was correct. Let's continue"),target:".Current-word",disableBeacon:!0}],[{content:i.a.createElement(I.a,{i18nKey:"TUTORIAL.GAME.SOLUTION.WRONG",tOptions:{player:dt[1].name}},"The answer was wrong"),target:".Current-word",disableBeacon:!0}],[{content:i.a.createElement(I.a,{i18nKey:"TUTORIAL.GAME.SOLUTION.INFO"},"You can count the result anyway"),target:".Current-word",placement:"center",disableBeacon:!0},{content:i.a.createElement(I.a,{i18nKey:"TUTORIAL.GAME.SOLUTION.COUNT_WRONG"},"If wrong"),target:".submitBtn.wrong"},{content:i.a.createElement(I.a,{i18nKey:"TUTORIAL.GAME.SOLUTION.COUNT_CORRECT"},"If correct"),target:".submitBtn.correct"}],[]],Ot=[{content:i.a.createElement(I.a,{i18nKey:"TUTORIAL.GAME.END_INFO"},"And here are the results for this game"),title:i.a.createElement(I.a,{i18nKey:"TUTORIAL.GAME.END_INFO_TITLE"},"That's it!"),target:".Game-end-view",placement:"center",disableBeacon:!0}],vt=function(e){Object(W.a)(n,e);var t=Object(B.a)(n);function n(e){var a;return Object(U.a)(this,n),(a=t.call(this,e)).currentUserId=localStorage.getItem("playerId")||"",a.currentUserName=localStorage.getItem("playerName")||"",a._isMounted=!1,a.createGame=a.createGame.bind(Object(ae.a)(a)),a.startTutorial=a.startTutorial.bind(Object(ae.a)(a)),a.loadGames=a.loadGames.bind(Object(ae.a)(a)),a.handleChange=a.handleChange.bind(Object(ae.a)(a)),a.triggerDeleteGame=a.triggerDeleteGame.bind(Object(ae.a)(a)),a.deleteGame=a.deleteGame.bind(Object(ae.a)(a)),a._setupConnection=a._setupConnection.bind(Object(ae.a)(a)),a.state={allGames:[],newGameName:null,gamesLoading:!0},a}return Object(D.a)(n,[{key:"componentDidMount",value:function(){this._isMounted=!0,document.title=this.props.i18n.t("APP_TITLE","Just one word!"),this._setupConnection(),Ue.on(y.UpdateList,this.loadGames),Ue.on(v.Reconnect,this._setupConnection)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,Ue.emit(y.Unsubscribe,"gameList"),Ue.off(y.UpdateList,this.loadGames),Ue.off(v.Reconnect,this._setupConnection)}},{key:"_getInitialGameName",value:function(e){return e?this.props.i18n.t("HOME.NEW_GAME_PERSONAL","New game",{name:e}):this.props.i18n.t("HOME.NEW_GAME","New game")}},{key:"_setupConnection",value:function(){Ue.emit(y.Subscribe,"gameList"),this.loadGames()}},{key:"loadGames",value:function(){var e=Object(ne.a)(te.a.mark((function e(){var t;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({gamesLoading:!0}),e.prev=1,e.next=4,We.loadGames();case 4:if(t=e.sent,this._isMounted){e.next=7;break}return e.abrupt("return");case 7:this.setState({allGames:t,gamesLoading:!1}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),this.props.enqueueSnackbar(i.a.createElement(I.a,{i18nKey:"ERROR.LOAD_GAMES"},"Error"),{variant:"error"}),this.setState({gamesLoading:!1});case 14:case"end":return e.stop()}}),e,this,[[1,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"triggerDeleteGame",value:function(e){var t=this;this.setState((function(t){return{allGames:t.allGames.filter((function(t){return t.id!==e}))}}));this.props.enqueueSnackbar(i.a.createElement(I.a,{i18nKey:"HOME.DELETED_GAME"},"Deleted Game"),{action:function(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement(w.a,{onClick:function(){t.props.closeSnackbar(e),t.loadGames()},color:"inherit"},i.a.createElement(I.a,{i18nKey:"COMMON.UNDO"},"Undo")))},onClose:function(n,a){"instructed"!==a&&t.deleteGame(e)}})}},{key:"deleteGame",value:function(){var e=Object(ne.a)(te.a.mark((function e(t){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We.deleteGame(t);case 2:this.loadGames();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){this.setState({newGameName:e.target.value})}},{key:"createGame",value:function(){var e=Object(ne.a)(te.a.mark((function e(){var t,n,a;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={id:"",name:"",players:[],hostId:"",wordsPerPlayer:2,language:"en",joiningRequests:[],round:0,phase:0,rounds:[],actionRequiredFrom:[]},null===(n=this.state.newGameName)&&(n=this._getInitialGameName(this.currentUserName)),t.name=n,t.language=Ve(),e.prev=5,e.next=8,We.addGame(t);case 8:a=e.sent,this.props.history.push("/"+a),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),this.props.enqueueSnackbar(i.a.createElement(I.a,{i18nKey:"ERROR.CREATE_GAME"},"Error"),{variant:"error"});case 15:case"end":return e.stop()}}),e,this,[[5,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"startTutorial",value:function(){this.props.history.push("/tutorial")}},{key:"render",value:function(){var e=this.props.classes,t=this.state,n=t.newGameName,a=t.allGames,r=t.gamesLoading;return null===n&&(n=this._getInitialGameName(this.currentUserName)),i.a.createElement(re.a,{maxWidth:"sm",className:e.root},i.a.createElement(ie.a,{className:e.newGame},i.a.createElement(oe.a,{label:i.a.createElement(I.a,{i18nKey:"HOME.GAME_NAME"},"Game name"),value:n,onChange:this.handleChange}),i.a.createElement(w.a,{variant:"contained",color:"primary",onClick:this.createGame},i.a.createElement(I.a,{i18nKey:"HOME.NEW_GAME"},"New game"))),i.a.createElement(ie.a,{mb:2},i.a.createElement(w.a,{variant:"contained",onClick:this.startTutorial},i.a.createElement(I.a,{i18nKey:"HOME.START_TUTORIAL"},"Tutorial"))),i.a.createElement(ie.a,{mb:2},i.a.createElement(Pe,{loading:r},i.a.createElement(w.a,{variant:"contained",onClick:this.loadGames},i.a.createElement(I.a,{i18nKey:"HOME.LOAD_GAMES"},"Refresh")))),i.a.createElement(Me,{allGames:a,deleteGame:this.triggerDeleteGame}))}}]),n}(i.a.Component),Tt=Object(ce.a)()(Object(m.f)(Object(E.b)(Object(H.a)((function(e){return Object(K.a)({root:Object(l.a)(Object(l.a)({},T.flexCenter),{},{flexDirection:"column"}),newGame:Object(l.a)(Object(l.a)({},T.flexCenter),{},{flexDirection:"column",padding:e.spacing(2),margin:"".concat(e.spacing(2),"px 0"),"& button":{marginTop:e.spacing(2)}})})}))(vt)))),Ct=n(307),kt=n(156),It=n.n(kt),jt=n(98),Nt=n.n(jt),At=n(157),Gt=n.n(At),wt=n(159),Rt=n.n(wt),Mt=n(155),St=n.n(Mt),Pt=n(292),Lt=function(e){Object(W.a)(n,e);var t=Object(B.a)(n);function n(e){var a;return Object(U.a)(this,n),(a=t.call(this,e)).state={value:e.defaultValue||""},a.handleChange=a.handleChange.bind(Object(ae.a)(a)),a.submitHint=a.submitHint.bind(Object(ae.a)(a)),a.keyPressed=a.keyPressed.bind(Object(ae.a)(a)),a}return Object(D.a)(n,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"submitHint",value:function(){this.props.submitHint(this.state.value),this.setState({value:""})}},{key:"keyPressed",value:function(e){"Enter"===e.key&&this.submitHint()}},{key:"render",value:function(){var e=this.props,t=e.label,n=e.classes,a=e.i18n,r=this.state.value;return i.a.createElement(ie.a,{className:n.root},i.a.createElement(oe.a,{label:t||a.t("GAME.COMMON.ENTER_HINT","Enter hint"),fullWidth:!0,value:r,onChange:this.handleChange,onKeyPress:this.keyPressed}),i.a.createElement(A.a,{color:"primary",disabled:!r,onClick:this.submitHint},i.a.createElement(Pt.a,null)))}}]),n}(i.a.Component),xt=Object(ce.a)()(Object(H.a)((function(e){return Object(K.a)({root:Object(l.a)(Object(l.a)({},T.flexCenter),{},{width:"100%","& button":{marginRight:e.spacing(-1.5)}})})}))(Lt)),_t=function(e){Object(W.a)(n,e);var t=Object(B.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(D.a)(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.top,a=e.bottom,r=e.left,o=e.right,c=e.handwriting,s=e.color,l=e.m,u=e.classes;if(!t)return null;var m=[u.root];return n&&m.push(u.top),a&&m.push(u.bottom),r&&m.push(u.left),o&&m.push(u.right),c&&m.push(u.handwriting),i.a.createElement(ie.a,{m:l||1,className:m.join(" "),style:{color:s}},t)}}]),n}(i.a.Component),Kt=Object(H.a)((function(e){return Object(K.a)({root:{position:"absolute",whiteSpace:"normal",fontSize:"1.2rem",display:"flex",alignItems:"center",lineHeight:1},top:{top:0},bottom:{bottom:0},left:{left:0},right:{right:0},handwriting:Object(l.a)({},T.handwriting)})}))(_t),Ht=function(e){Object(W.a)(n,e);var t=Object(B.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(D.a)(n,[{key:"render",value:function(){var e=this.props,t=e.color,n=e.classes,a={backgroundColor:t},r={borderTopColor:t};return i.a.createElement("div",{className:n.pencil},i.a.createElement("div",{className:n.body,style:a}),i.a.createElement("div",{className:n.nib,style:r}))}}]),n}(i.a.Component),Ut=Object(H.a)((function(e){return Object(K.a)({pencil:{width:12,marginLeft:24,transform:"rotate(35deg)",animation:"$pencil .5s forwards",animationIterationCount:"infinite"},body:{width:12,height:48,backgroundColor:"black",borderTopLeftRadius:3,borderTopRightRadius:3},nib:{width:2,height:0,borderTop:"".concat(12,"px solid black"),borderLeft:"".concat(5,"px solid transparent"),borderRight:"".concat(5,"px solid transparent")},"@keyframes pencil":{"0%":{transform:"rotate(35deg)"},"50%":{transform:"rotateZ(25deg)"},"100%":{transform:"rotateZ(35deg)"}}})}))(Ht),Dt=function(e){Object(W.a)(n,e);var t=Object(B.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(D.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.hint,a=t.color,r=t.author,o=t.showPencil,c=t.showCheck,s=t.showCross,l=t.submitHint,u=t.duplicate,m=t.defaultValue,p=t.classes,h=t.children,g={color:a,borderColor:a},f=[p.root];if(o&&f.push(p.writing),u&&f.push(p.duplicate),l&&f.push("WordHint-withInput"),l)e=i.a.createElement(xt,{submitHint:l,defaultValue:m});else if(s)e=i.a.createElement(ie.a,{fontSize:80},"\u2717");else if(c)e=i.a.createElement(ie.a,{fontSize:80},"\u2713");else{var E=["notranslate",p.word];n&&n.length>16?E.push(p.hugeWord):n&&n.length>10&&E.push(p.longWord),u&&E.push(p.lineThrough),e=i.a.createElement(ie.a,{className:E.join(" ")},n)}return i.a.createElement(ue.a,{item:!0,xs:12},i.a.createElement(d.a,{className:f.join(" "),style:u?void 0:g},e,o&&i.a.createElement(Ut,{color:a}),h&&i.a.createElement(ie.a,{className:p.addon},h),i.a.createElement(Kt,{bottom:!0,left:!0,handwriting:!0,color:a},r)))}}]),n}(i.a.Component),Wt=Object(H.a)((function(e){return Object(K.a)({root:Object(l.a)(Object(l.a)({},T.flexCenter),{},{minHeight:80,fontSize:48,border:"2px solid black",position:"relative",padding:e.spacing(1,4,1,4)}),writing:{borderStyle:"dotted"},word:Object(l.a)(Object(l.a)({},T.handwriting),{},{lineHeight:1.2}),longWord:{fontSize:32},hugeWord:{fontSize:24},duplicate:{borderStyle:"dashed",color:e.palette.grey.A200,borderColor:e.palette.grey.A200},lineThrough:{textDecoration:"line-through"},addon:{position:"absolute",right:e.spacing(2),zIndex:1}})}))(Dt),Bt=function(e){Object(W.a)(n,e);var t=Object(B.a)(n);function n(e){var a;return Object(U.a)(this,n),(a=t.call(this,e)).handleChange=a.handleChange.bind(Object(ae.a)(a)),a.setColor=a.setColor.bind(Object(ae.a)(a)),a.addPlayer=a.addPlayer.bind(Object(ae.a)(a)),a}return Object(D.a)(n,[{key:"handleChange",value:function(e){"name"===e.target.name&&(this.props.currentPlayer.name=e.target.value,this.props.updatePlayer(this.props.currentPlayer))}},{key:"setColor",value:function(e){this.props.currentPlayer.color=e,this.props.updatePlayer(this.props.currentPlayer)}},{key:"addPlayer",value:function(){this.props.addPlayer(this.props.currentPlayer)}},{key:"render",value:function(){var e=this.props,t=e.currentPlayer,n=e.classes;return i.a.createElement("div",{className:n.root},i.a.createElement(oe.a,{className:"name-input",required:!0,label:i.a.createElement(I.a,{i18nKey:"COMMON.PLAYER_NAME"},"Name"),name:"name",value:t.name,onChange:this.handleChange}),i.a.createElement(Ze,{select:this.setColor,selected:t.color}),i.a.createElement(w.a,{variant:"contained",color:"primary",className:"submitBtn",disabled:!t.name,onClick:this.addPlayer},i.a.createElement(I.a,{i18nKey:"GAME.LOBBY.JOIN"},"Join")))}}]),n}(i.a.Component),Ft=Object(H.a)((function(e){return Object(K.a)({root:Object(l.a)(Object(l.a)({},T.flexCenter),{},{flexDirection:"column"})})}))(Bt),Yt=function(e){Object(W.a)(n,e);var t=Object(B.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(D.a)(n,[{key:"render",value:function(){for(var e=this.props,t=e.open,n=e.onClose,a=e.numOfPlayers,r=[],o=function(e){var t=e+1,o=t*a;r.push(i.a.createElement(V.a,{button:!0,onClick:function(){n(t)},key:t},i.a.createElement($.a,{primary:i.a.createElement(I.a,{i18nKey:"GAME.LOBBY.ROUND_SELECT.NUM",count:o},{roundCount:o}," rounds"),secondary:i.a.createElement(I.a,{i18nKey:"GAME.LOBBY.ROUND_SELECT.WORDS",count:t},{wordCount:t}," words per player")})))},c=0;c<3;c++)o(c);return i.a.createElement(F.a,{onClose:function(){n()},open:t,disableBackdropClick:!0},i.a.createElement(Y.a,null,i.a.createElement(I.a,{i18nKey:"GAME.LOBBY.ROUND_SELECT.HEADING"},"Set number of rounds")),i.a.createElement(q.a,null,r))}}]),n}(i.a.Component),qt=n(306),Vt=n(166),$t=function(e){Object(W.a)(n,e);var t=Object(B.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(D.a)(n,[{key:"render",value:function(){var e=this.props,t=e.game,n=e.getHelpers,a=e.theme;if(!t.$isTutorial)return null;var r=function(e){var t;switch(e.phase){case b.Init:t=ht[e.players.length?1:0],e.players.length>0&&(t[0].title=i.a.createElement(I.a,{i18nKey:"TUTORIAL.LOBBY.WELCOME_NAME",tOptions:{name:e.players[0].name}},"Hello friend"));break;case b.Preparation:t=gt[0];break;case b.HintWriting:t=ft[e.round];break;case b.HintComparing:t=Et[e.round];break;case b.Guessing:t=bt[e.round];break;case b.Solution:t=yt[e.round];break;case b.End:t=Ot}return t}(t);return i.a.createElement(Vt.a,{steps:r,styles:{options:{primaryColor:a.palette.primary.main,backgroundColor:a.palette.background.paper,arrowColor:a.palette.background.paper,textColor:a.palette.text.primary,overlayColor:a.palette.action.disabled,spotlightShadow:a.shadows[8],zIndex:100}},locale:{back:i.a.createElement(I.a,{i18nKey:"TUTORIAL.CONTROLS.BACK",defaultValue:"Back"}),close:i.a.createElement(I.a,{i18nKey:"TUTORIAL.CONTROLS.CLOSE",defaultValue:"Close"}),last:i.a.createElement(I.a,{i18nKey:"TUTORIAL.CONTROLS.DONE",defaultValue:"Done"}),next:i.a.createElement(I.a,{i18nKey:"TUTORIAL.CONTROLS.NEXT",defaultValue:"Next"}),skip:i.a.createElement(I.a,{i18nKey:"TUTORIAL.CONTROLS.SKIP",defaultValue:"Skip"})},getHelpers:n,continuous:!0,spotlightClicks:!0})}}]),n}(i.a.Component),Jt=Object(qt.a)($t),zt=function(e){Object(W.a)(n,e);var t=Object(B.a)(n);function n(e){var a;return Object(U.a)(this,n),(a=t.call(this,e)).state={currentPlayer:{id:localStorage.getItem("playerId")||"",name:localStorage.getItem("playerName")||"",color:Qe(localStorage.getItem("playerColor"),e.game.players.map((function(e){return e.color})))},roundDialogOpen:!1},a.addPlayer=a.addPlayer.bind(Object(ae.a)(a)),a.leaveGame=a.leaveGame.bind(Object(ae.a)(a)),a.setPlayerProps=a.setPlayerProps.bind(Object(ae.a)(a)),a.selectNumRounds=a.selectNumRounds.bind(Object(ae.a)(a)),a.startPreparation=a.startPreparation.bind(Object(ae.a)(a)),a.shareGame=a.shareGame.bind(Object(ae.a)(a)),a}return Object(D.a)(n,[{key:"setPlayerProps",value:function(e){this.setState({currentPlayer:e})}},{key:"addPlayer",value:function(){var e=Object(ne.a)(te.a.mark((function e(t){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.game.$isTutorial){e.next=4;break}return at(t),this.setLocalPlayer(t),e.abrupt("return");case 4:return e.next=6,We.addPlayer(this.props.game.id,t);case 6:this.setLocalPlayer(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setLocalPlayer",value:function(e){localStorage.setItem("playerId",e.id),localStorage.setItem("playerName",e.name),e.color&&localStorage.setItem("playerColor",e.color),this.props.setTheme&&e.color&&this.props.setTheme(e.color);var t=e.name;this.props.enqueueSnackbar(i.a.createElement(ie.a,{display:"flex",alignItems:"center"},i.a.createElement(ie.a,{mr:1},i.a.createElement(St.a,null)),i.a.createElement(I.a,{i18nKey:"COMMON.WELCOME_NAME"},"Hello ",{name:t})),{}),this.setState({currentPlayer:e})}},{key:"leaveGame",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.currentPlayer.id;We.removePlayerFromGame(this.props.game.id,e)}},{key:"selectNumRounds",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.props.game.$isTutorial?rt():this.setState({roundDialogOpen:!0,isTwoPlayerVariant:e})}},{key:"startPreparation",value:function(){var e=Object(ne.a)(te.a.mark((function e(){var t,n=arguments;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:2,this.setState({roundDialogOpen:!1}),e.next=4,We.startPreparation(this.props.game.id,t,this.state.isTwoPlayerVariant);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"shareGame",value:function(){var e=window.location.href;if(navigator.share)navigator.share({title:document.title||this.props.i18n.t("APP_TITLE","Just one word!"),text:this.props.i18n.t("GAME.LOBBY.INVITE_PLAYERS_MESSAGE","Play online"),url:e});else try{navigator.clipboard.writeText(e),this.props.enqueueSnackbar(i.a.createElement(I.a,{i18nKey:"GAME.LOBBY.COPIED_LINK"},"Copied"))}catch(t){this.props.enqueueSnackbar(i.a.createElement(I.a,{i18nKey:"GAME.LOBBY.COPIED_LINK_ERROR"},"Error copying"),{variant:"error"})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.game,a=t.classes,r=this.state,o=r.currentPlayer,c=r.roundDialogOpen,s=localStorage.getItem("playerId")||"",l=!!s&&n.hostId===s,u=!1,m=n.players.map((function(t){return t.id===s&&(u=!0),i.a.createElement(Wt,{key:t.id,hint:t.name,color:t.color},l&&!n.$isTutorial&&i.a.createElement(A.a,{onClick:function(){return e.leaveGame(t.id)}},i.a.createElement(de.a,null)))})),p=o.name?o.name:"?",h=o.color?o.color:Qe();return i.a.createElement(ue.a,{container:!0,spacing:4,className:"Game-lobby"},i.a.createElement(ue.a,{item:!0,xs:12,sm:6,container:!0,spacing:2,className:"New-player"},u?i.a.createElement(ue.a,{item:!0,xs:12},i.a.createElement(d.a,{className:"StatusInfo"},i.a.createElement(I.a,{i18nKey:"GAME.LOBBY.WAIT_MESSAGE",tOptions:{context:l?"HOST":"PLAYER"}},"Waiting for teammates"))):i.a.createElement(ue.a,{item:!0,xs:12},i.a.createElement(Ft,{currentPlayer:o,updatePlayer:this.setPlayerProps,addPlayer:this.addPlayer})),u&&!n.$isTutorial&&i.a.createElement(ue.a,{item:!0,xs:12},i.a.createElement(w.a,{variant:"outlined",startIcon:i.a.createElement(It.a,null),onClick:this.shareGame},i.a.createElement(I.a,{i18nKey:"GAME.LOBBY.INVITE_PLAYERS"},"Share")),i.a.createElement("br",null),i.a.createElement(w.a,{variant:"outlined",startIcon:i.a.createElement(Nt.a,null),onClick:function(){return e.leaveGame()}},i.a.createElement(I.a,{i18nKey:"COMMON.BACK"},"Back"))),l&&u&&i.a.createElement(ue.a,{item:!0,xs:12},i.a.createElement(w.a,{variant:"contained",color:"primary",className:2===n.players.length?"submitBtn ".concat(a.fakeDisabled):"submitBtn",disabled:n.players.length<2,onClick:function(){return e.selectNumRounds(!1)}},i.a.createElement(I.a,{i18nKey:"GAME.LOBBY.START_BUTTON"},"Start")))),i.a.createElement(ue.a,{item:!0,xs:12,sm:6,container:!0,spacing:2,alignItems:"center",className:"Player-list"},i.a.createElement(ue.a,{item:!0,xs:12,component:G.a,variant:"h5"},i.a.createElement(I.a,{i18nKey:"COMMON.TEAMMATES"},"Teammates")),m,!u&&i.a.createElement(Wt,{hint:p,color:h,showPencil:!0}),l&&u&&!n.$isTutorial&&2===n.players.length&&i.a.createElement(ue.a,{item:!0,xs:12,container:!0},i.a.createElement(w.a,{variant:"outlined",startIcon:i.a.createElement(Gt.a,null),onClick:function(){return e.selectNumRounds(!0)}},i.a.createElement(I.a,{i18nKey:"GAME.LOBBY.START_TWO_PLAYERS"},"Two player variant")),i.a.createElement(Ct.a,{title:i.a.createElement("div",{style:{whiteSpace:"pre"}},i.a.createElement(I.a,{i18nKey:"GAME.LOBBY.START_TWO_PLAYERS_DESCRIPTION"}))},i.a.createElement(Rt.a,{className:a.marginLeft})))),i.a.createElement(Yt,{numOfPlayers:n.players.length,open:c,onClose:this.startPreparation}),i.a.createElement(Jt,{key:u?"1":"2",game:n}))}}]),n}(i.a.Component),Qt=Object(ce.a)()(Object(H.a)((function(e){return Object(K.a)({fakeDisabled:{color:e.palette.action.disabled,backgroundColor:e.palette.action.disabledBackground,boxShadow:"none","&:hover":{color:e.palette.action.disabled,backgroundColor:e.palette.action.disabledBackground,boxShadow:"none",cursor:"default"}},marginLeft:{marginLeft:e.spacing(1)}})}))(Object(E.b)(zt))),Xt=function(e){Object(W.a)(n,e);var t=Object(B.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(D.a)(n,[{key:"render",value:function(){var e,t,n=this.props,a=n.word,r=n.guesser,o=n.isGuesser,c=n.guess,s=n.guessedRight,l=n.isGuessingPhase,u=n.submitGuess,m=n.small,p=n.classes,h=n.i18n,g=[p.wordCard,"notranslate"],f={borderColor:null===r||void 0===r?void 0:r.color};return e=[i.a.createElement("span",null,null===r||void 0===r?void 0:r.name)],c?(t=h.t("GAME.COMMON.WORD","Word")+": "+a,s||g.push(p.wrong)):r&&r.name&&(e=[i.a.createElement(I.a,{i18nKey:"GAME.COMMON.TURN_GUESSING",tOptions:{context:o?"ME":""},key:"name"},{guesser:r.name},"'s turn to guess")],l&&!o&&e.push(i.a.createElement(ie.a,{className:p.smallPencil,key:"pencil"},i.a.createElement(Ut,{color:null===r||void 0===r?void 0:r.color,key:"pencil"})))),m&&g.push(p.small),u&&g.push("WordCard-withInput"),i.a.createElement(ue.a,{item:!0,xs:12,className:m?p.root:void 0},i.a.createElement(d.a,{className:g.join(" "),style:f},u?i.a.createElement(xt,{submitHint:u,label:h.t("GAME.COMMON.GUESS","Guess")}):i.a.createElement("span",{className:c&&p.guess,style:{color:c?null===r||void 0===r?void 0:r.color:void 0}},c||a),i.a.createElement(Kt,{bottom:!0,left:!0,handwriting:!0,color:null===r||void 0===r?void 0:r.color,m:2},e),i.a.createElement(Kt,{bottom:!0,right:!0,m:2},t)))}}]),n}(i.a.Component),Zt=Object(ce.a)()(Object(H.a)((function(e){return Object(K.a)({root:Object(l.a)(Object(l.a)({},T.flexCenter),{},{width:"100%"}),wordCard:Object(l.a)(Object(l.a)({},T.flexCenter),{},{height:220,maxHeight:"30vh",minHeight:150,fontSize:32,border:"2px solid ".concat(e.palette.text.primary),whiteSpace:"nowrap",position:"relative",padding:e.spacing(0,5)}),guess:Object(l.a)({},T.handwriting),wrong:{"& $guess":{textDecoration:"line-through"}},small:{maxWidth:250,height:125,fontSize:24,flex:"1 1 auto"},smallPencil:{transform:"scale(0.5) translateY(-0.5rem)",height:32}})}))(Xt)),en=n(293),tn=n(160),nn=n.n(tn),an=function(e){Object(W.a)(n,e);var t=Object(B.a)(n);function n(e){var a;Object(U.a)(this,n),a=t.call(this,e);var r=e.defaultValues||[];return a.state={words:r,randomLoading:[]},a.handleChange=a.handleChange.bind(Object(ae.a)(a)),a.keyPressed=a.keyPressed.bind(Object(ae.a)(a)),a}return Object(D.a)(n,[{key:"handleChange",value:function(e){var t=parseInt(e.target.name.substr(4)),n=e.target.value;this.setState((function(e,a){var r=e.words;return r[t]=n,{words:r}}))}},{key:"keyPressed",value:function(e){if("Enter"===e.key){var t=this.state.words;t.length<this.props.numOfWords||t.some((function(e){return!e||0===e.length}))||this.props.add(t)}}},{key:"render",value:function(){for(var e=this,t=this.props,n=t.add,a=t.numOfWords,r=t.allowRandom,o=t.i18n,c=this.state,s=c.words,l=c.randomLoading,u=[],m=function(t){var n=o.t("GAME.PREP.WORD_ADDER.LABEL","Word "+(t+1),{count:a,index:t+1});u.push(i.a.createElement(oe.a,{required:!0,label:n,variant:"filled",placeholder:o.t("GAME.PREP.WORD_ADDER.PLACEHOLDER","Enter word"),name:"word".concat(t),key:"word".concat(t),value:s[t]||"",onChange:e.handleChange,onKeyPress:e.keyPressed,InputProps:r?{endAdornment:i.a.createElement(en.a,{position:"end"},i.a.createElement(Pe,{loading:l[t]||!1},i.a.createElement(A.a,{onClick:function(){return n=t,e.setState((function(e){return e.randomLoading[n]=!0,{randomLoading:e.randomLoading}})),void Ue.emit(O.GetRandom,Ve(),(function(t){e.setState((function(e){e.words[n]=t;for(var a=0;a<e.words.length;a++)e.words[a]=e.words[a]||"";return e.randomLoading[n]=!1,{words:e.words,randomLoading:e.randomLoading}}))}));var n}},i.a.createElement(nn.a,null))))}:void 0}))},d=0;d<a;d++)m(d);var p=s.length<a||s.some((function(e){return!e||0===e.length}));return i.a.createElement("div",{className:"Word-adder"},i.a.createElement(G.a,{variant:"subtitle1"},i.a.createElement(I.a,{i18nKey:"GAME.PREP.WORD_ADDER.HEADING",count:a},"Enter words")),u,i.a.createElement(w.a,{variant:"contained",color:"primary",className:"submitBtn",disabled:p,onClick:function(){return n(s)}},i.a.createElement(I.a,{i18nKey:"GAME.PREP.WORD_ADDER.BUTTON",count:a},"Submit")))}}]),n}(i.a.Component),rn=Object(ce.a)()(an),on=n(99),cn=n.n(on),sn=function(e){Object(W.a)(n,e);var t=Object(B.a)(n);function n(e){var a,r;Object(U.a)(this,n),(r=t.call(this,e)).addWords=r.addWords.bind(Object(ae.a)(r)),r.resetWords=r.resetWords.bind(Object(ae.a)(r)),r.backToLobby=r.backToLobby.bind(Object(ae.a)(r));var i=Ne(e.game);return r.state={submittedWords:(null===i||void 0===i||null===(a=i.enteredWords)||void 0===a?void 0:a.slice(0,e.game.wordsPerPlayer))||[],resetWords:!1},r}return Object(D.a)(n,[{key:"addWords",value:function(){var e=Object(ne.a)(te.a.mark((function e(t){var n;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.game.$isTutorial){e.next=3;break}return rt(),e.abrupt("return");case 3:if(n=Ne(this.props.game)){e.next=6;break}return e.abrupt("return");case 6:return n.enteredWords=t,this.setState({submittedWords:t,resetWords:!1}),e.next=10,We.updatePlayer(this.props.game.id,n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"backToLobby",value:function(){We.backToLobby(this.props.game.id)}},{key:"resetWords",value:function(){var e=Ne(this.props.game);e&&(this.setState({submittedWords:e.enteredWords||[],resetWords:!0}),e.enteredWords=[],We.updatePlayer(this.props.game.id,e))}},{key:"render",value:function(){var e=this.props.game,t=this.state,n=t.submittedWords,a=t.resetWords,r=e.wordsPerPlayer||2,o=localStorage.getItem("playerId")||"",c=!!o&&e.hostId===o,s=!1,l=[],u=!1,m=e.players.map((function(e){var t=!!e.enteredWords&&e.enteredWords.length===r;return e.id===o&&(s=!0,l=e.enteredWords||n,u=t||!a&&l.length===r),i.a.createElement(Wt,{key:e.id,hint:e.name,color:e.color,showPencil:!t})})),p=n;e.$isTutorial&&(p=[lt[0]]);var h=l.map((function(e){return i.a.createElement(Zt,{key:e,small:!0,word:e})}));return i.a.createElement(ue.a,{container:!0,spacing:4,className:"Game-lobby"},i.a.createElement(ue.a,{item:!0,xs:12,sm:6,container:!0,spacing:2,className:"New-player"},u||!s?i.a.createElement(ue.a,{item:!0,xs:12},i.a.createElement(d.a,{className:"StatusInfo"},i.a.createElement(I.a,{i18nKey:"GAME.PREP.WAIT_MESSAGE"},"Waiting for teammates"))):i.a.createElement(ue.a,{item:!0,xs:12},i.a.createElement(rn,{add:this.addWords,numOfWords:r,allowRandom:!e.$isTutorial,defaultValues:p})),u&&h.length>0&&i.a.createElement(ue.a,{item:!0,xs:12,component:G.a,variant:"subtitle1"},i.a.createElement(I.a,{i18nKey:"GAME.PREP.MY_WORDS",count:l.length},"My words"),!e.$isTutorial&&i.a.createElement(A.a,{onClick:this.resetWords,component:ie.a,ml:1},i.a.createElement(cn.a,{fontSize:"small"}))),u&&h,c&&!e.$isTutorial&&i.a.createElement(w.a,{variant:"outlined",startIcon:i.a.createElement(Nt.a,null),onClick:this.backToLobby},i.a.createElement(I.a,{i18nKey:"COMMON.BACK"},"Back"))),i.a.createElement(ue.a,{item:!0,xs:12,sm:6,container:!0,spacing:2,alignItems:"center",className:"Player-list"},i.a.createElement(ue.a,{item:!0,xs:12,component:G.a,variant:"h5"},i.a.createElement(I.a,{i18nKey:"COMMON.TEAMMATES"},"Teammates")),m),i.a.createElement(Jt,{game:e}))}}]),n}(i.a.Component),ln=function(e){Object(W.a)(n,e);var t=Object(B.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(D.a)(n,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.colors,a=e.className,r=e.classes,o=[r.root];a&&o.push(a);var c={width:t+"%"};if(n){var s=ze.filter((function(e){return n.includes(e)}));c.background="linear-gradient(to right, ".concat(s.join(","),")")}return i.a.createElement("div",{className:o.join(" ")},i.a.createElement("div",{className:r.bar,style:c}))}}]),n}(i.a.Component),un=Object(H.a)((function(e){return Object(K.a)({root:{width:"100%",height:e.spacing(3),position:"relative",backgroundColor:"light"===e.palette.type?"rgba(0,0,0,0.1)":"rgba(255,255,255,0.1)"},bar:{height:"100%",position:"absolute",backgroundColor:e.palette.primary.main}})}))(ln),mn=function(e){Object(W.a)(n,e);var t=Object(B.a)(n);function n(){var e;Object(U.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={easedPercentage:0},e._isMounted=!1,e._linearPercentage=0,e._timeout=void 0,e}return Object(D.a)(n,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this,t=this.props,n=t.players,a=t.correctCount,r=t.totalCount,o=t.classes,c=this.state.easedPercentage,s=n.map((function(e){return e.color||Qe()})),l=Math.ceil(a/r*100),u="\ud83e\udd14",m={transform:"scale(".concat(c/l,")")};return c<l&&!this._timeout&&(this._timeout=window.setTimeout((function(){e._timeout=void 0,e._isMounted&&(e._linearPercentage=e._linearPercentage+1,e.setState({easedPercentage:Re(e._linearPercentage,l)}))}),1e3/l)),c<20?u="\ud83d\ude35":c<50?u="\ud83e\udd74":c<75?u="\ud83d\ude42":c<100?u="\ud83d\ude0e":100===c&&(u="\ud83e\udd29"),i.a.createElement(ue.a,{item:!0,xs:12,container:!0,spacing:2,className:o.root},i.a.createElement(G.a,{variant:"h3"},i.a.createElement(I.a,{i18nKey:"GAME.END.HEADING"},"Game over")),i.a.createElement(un,{value:c,colors:s,className:o.progressBar}),i.a.createElement(G.a,{variant:"body1",className:o.percentage},c," %"),i.a.createElement(G.a,{variant:"body1",className:o.emoji,style:m},u))}}]),n}(i.a.Component),dn=Object(H.a)((function(e){return Object(K.a)({root:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:e.spacing(2)},progressBar:{margin:e.spacing(2,0)},percentage:{fontSize:e.spacing(3),fontWeight:"bold"},emoji:{fontSize:e.spacing(10)}})}))(mn),pn=function(e){Object(W.a)(n,e);var t=Object(B.a)(n);function n(){var e;Object(U.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={confettiAmmo:5},e._isMounted=!1,e}return Object(D.a)(n,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.reduceConfettiAmmo=this.reduceConfettiAmmo.bind(this)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"reduceConfettiAmmo",value:function(){var e=this;this.setState((function(t){var n=t.confettiAmmo-1;return 0===n&&setTimeout((function(){e._isMounted&&e.setState({confettiAmmo:5})}),3e3),{confettiAmmo:n}}))}},{key:"render",value:function(){var e=this,t=this.props.onConfetti,n=this.state.confettiAmmo;return i.a.createElement(Pe,{loading:!n},i.a.createElement(w.a,{variant:"outlined",onClick:function(){t(),e.reduceConfettiAmmo()},disabled:!n},i.a.createElement(I.a,{i18nKey:n?"COMMON.CONFETTI":"COMMON.RELOAD_CONFETTI",tOptions:{confettiAmmo:n}},"Confetti!")))}}]),n}(i.a.Component),hn=n(161),gn=n.n(hn),fn=function(e){Object(W.a)(n,e);var t=Object(B.a)(n);function n(){var e;Object(U.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r)))._isMounted=!1,e}return Object(D.a)(n,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.playAgain=this.playAgain.bind(this)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.props.closeSnackbar()}},{key:"playAgain",value:function(){var e=Object(ne.a)(te.a.mark((function e(){var t,n,a,r,o;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.game,a=t.i18n,n){e.next=3;break}return e.abrupt("return");case 3:if(!n.rematchId){e.next=7;break}this.props.history.push("/"+n.rematchId),e.next=20;break;case 7:return(r={id:"",name:"",players:[],hostId:"",wordsPerPlayer:2,language:"en",joiningRequests:[],round:0,phase:0,rounds:[],actionRequiredFrom:[]}).name=n.name+" - "+a.t("GAME.AGAIN","Again!"),r.language=Ve(),e.prev=10,e.next=13,We.addGame(r,n.id);case 13:o=e.sent,this.props.history.push("/"+o),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(10),this.props.enqueueSnackbar(i.a.createElement(I.a,{i18nKey:"ERROR.CREATE_GAME"},"Error"),{variant:"error"});case 20:case"end":return e.stop()}}),e,this,[[10,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this,n=this.props,a=n.game,r=n.triggerConfetti,o=n.classes,c=n.history,s=n.i18n,l=ke(a).map((function(e,t){return i.a.createElement(Zt,{key:t,small:!0,guesser:Ce(a,e.guesserId),word:e.word,guess:e.guess,guessedRight:!0})})),u=Ie(a).map((function(e,t){return i.a.createElement(Zt,{key:t,small:!0,guesser:Ce(a,e.guesserId),word:e.word,guess:e.guess,guessedRight:!1})})),m=a.rounds.length;if(a.endTime&&a.startTime){var d=function(e){var t=e,n=Math.floor(t/864e5);t-=864e5*n;var a=Math.floor(t/36e5);t-=36e5*a;var r=Math.floor(t/6e4);return t-=6e4*r,{days:n,hours:a,minutes:r,seconds:Math.floor(t/1e3)}}(new Date(a.endTime).getTime()-new Date(a.startTime).getTime()),p=d.days,h=d.hours,g=d.minutes,f=d.seconds,E=[];p>0&&E.push(s.t("COMMON.DAYS",{count:p})),h>0&&E.push(s.t("COMMON.HOURS",{count:h})),g>0&&E.push(s.t("COMMON.MINUTES",{count:g})),f>0&&E.push(s.t("COMMON.SECONDS",{count:f}));var b=E.join(", ");e=i.a.createElement(ue.a,{item:!0,xs:12},i.a.createElement(ie.a,{className:o.timeBox},i.a.createElement(gn.a,null)," ",i.a.createElement(I.a,{i18nKey:"GAME.COMMON.TIME"},"Time: ",{time:b})))}var O=Ne(a);return i.a.createElement(ue.a,{container:!0,spacing:4,className:"Game-end-view"},i.a.createElement(dn,{players:a.players,correctCount:l.length,totalCount:m}),i.a.createElement(ue.a,{item:!0,xs:12,md:6,container:!0,spacing:2,className:"Correct-words"},i.a.createElement(ue.a,{item:!0,xs:12,component:G.a,variant:"h4"},i.a.createElement(I.a,{i18nKey:"GAME.END.RIGHT",count:l.length,tOptions:{total:m}},"Correct")),l),i.a.createElement(ue.a,{item:!0,xs:12,md:6,container:!0,spacing:2,className:"Wrong-words"},i.a.createElement(ue.a,{item:!0,xs:12,component:G.a,variant:"h4"},i.a.createElement(I.a,{i18nKey:"GAME.END.WRONG",count:u.length,tOptions:{total:m}},"Wrong")),u),e,i.a.createElement(ue.a,{item:!0,xs:12,className:o.buttons},!a.$isTutorial&&i.a.createElement(w.a,{variant:"contained",color:"primary",onClick:function(){return t.playAgain()}},i.a.createElement(I.a,{i18nKey:"GAME.AGAIN"},"Again!")),i.a.createElement(w.a,{variant:"outlined",onClick:function(){a.$isTutorial&&nt(),c.push("/")}},i.a.createElement(I.a,{i18nKey:a.$isTutorial?"TUTORIAL.CLOSE":"GAME.BACK_HOME"},"Back")),O&&i.a.createElement(pn,{onConfetti:function(){if("tutorial"===(null===a||void 0===a?void 0:a.id))r();else{var e=null===O||void 0===O?void 0:O.color,t=e?[e]:void 0;Ue.emit(y.Confetti,a.id,t),r(t)}}})),i.a.createElement(Jt,{game:a,key:"tutorial"}))}}]),n}(i.a.Component),En=Object(ce.a)()(Object(m.f)(Object(E.b)(Object(H.a)((function(e){return Object(K.a)({timeBox:{display:"flex",alignItems:"center",justifyContent:"center",margin:e.spacing(1),marginTop:e.spacing(8),"& > svg":{marginRight:e.spacing(1)}},buttons:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:e.spacing(2),"& > *":{margin:e.spacing(1)}}})}))(fn)))),bn=n(75),yn=n(162),On=n.n(yn);!function(e){e.DEFAULT="default",e.CORRECT="correct",e.WRONG="wrong"}(pt||(pt={}));var vn,Tn=function(e){Object(W.a)(n,e);var t=Object(B.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(D.a)(n,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.title,a=e.children,r=e.classes,o=[r.root];t===pt.CORRECT&&o.push(r.correct),t===pt.WRONG&&o.push(r.wrong);var c=i.a.createElement("div",{className:o.join(" ")},t===pt.CORRECT&&i.a.createElement(Je.a,{fontSize:"inherit"}),t===pt.WRONG&&i.a.createElement(On.a,{fontSize:"inherit"}),i.a.createElement("div",null,a));return n&&(c=i.a.createElement(Ct.a,{title:n,"aria-label":n},c)),c}}]),n}(i.a.Component),Cn=Object(H.a)((function(e){return Object(K.a)({root:{display:"inline-flex",alignItems:"center",border:"2px solid currentColor",borderRadius:5,padding:"0 .5ex 0 .25ex",margin:".25ex .5ex",verticalAlign:"middle",cursor:"default"},correct:{color:e.palette.success.main},wrong:{color:e.palette.error.main}})}))(Tn),kn=function(e){Object(W.a)(n,e);var t=Object(B.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(D.a)(n,[{key:"componentDidMount",value:function(){document.body.classList.add(this.props.classes.body)}},{key:"componentWillUnmount",value:function(){document.body.classList.remove(this.props.classes.body)}},{key:"render",value:function(){var e=this.props,t=e.game,n=e.classes,a=e.i18n,r=t.rounds[t.round],o=0;if([b.Init,b.Preparation,b.End].includes(t.phase))return null;var c=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=n.nameTag;return t&&(r+=" isFirst"),a&&(r+=" isLast"),i.a.createElement("span",{className:r,style:{color:e.color},key:o++},e.name)},s=t.actionRequiredFrom.map((function(e,t,n){return c(e,0===t,t===n.length-1)})),l=Ce(t,r.guesserId)||{name:"?",id:"?"},u=[];switch(t.phase){case b.HintWriting:t.isTwoPlayerVariant?u.push.apply(u,Object(bn.a)(s).concat([i.a.createElement(I.a,{i18nKey:"GAME.STATS.PHASE_WRITING_TWO_PLAYER",key:o++}," writes hints")])):u.push.apply(u,Object(bn.a)(s).concat([i.a.createElement(I.a,{i18nKey:"GAME.STATS.PHASE_WRITING",count:t.actionRequiredFrom.length,key:o++}," write hints")]));break;case b.HintComparing:u.push.apply(u,Object(bn.a)(s).concat([i.a.createElement(I.a,{i18nKey:"GAME.STATS.PHASE_COMPARING",key:o++}," checks hints")]));break;case b.Guessing:u.push.apply(u,Object(bn.a)(s).concat([i.a.createElement(I.a,{i18nKey:"GAME.STATS.PHASE_GUESSING",key:o++}," guesses")]));break;case b.Solution:r.correct?u.push(c(l),i.a.createElement(I.a,{i18nKey:"GAME.STATS.PHASE_SOLUTION",key:o++}," was right!")):(u.push(c(l),i.a.createElement(I.a,{i18nKey:"GAME.STATS.PHASE_SOLUTION_WRONG",key:o++}," was wrong!")),u.push.apply(u,Object(bn.a)(s).concat([i.a.createElement(I.a,{i18nKey:"GAME.STATS.PHASE_SOLUTION_WRONG_2",key:o++}," decides")])))}var m=t.round+1,d=t.rounds.length,p=ke(t).length,h=Ie(t).length;return i.a.createElement("div",{className:n.root},i.a.createElement(j.a,{position:"fixed",color:"default",className:n.appbar},i.a.createElement("div",{className:n.contents},i.a.createElement("div",null,i.a.createElement(I.a,{i18nKey:"GAME.STATS.ROUND"},"Round ",{round:m},"/",{roundCount:d})),i.a.createElement("div",{className:n.statusMessage},u),i.a.createElement("div",null,i.a.createElement(Cn,{type:pt.CORRECT,title:a.t("GAME.STATS.RIGHT",{rightCount:p}).toString()},p),i.a.createElement(Cn,{type:pt.WRONG,title:a.t("GAME.STATS.WRONG",{wrongCount:h}).toString()},h)))))}}]),n}(i.a.Component),In=Object(ce.a)()(Object(H.a)((function(e){return Object(K.a)({root:{width:"100%",height:50,marginTop:100},appbar:{top:"auto",bottom:0,marginBottom:0,backgroundColor:e.palette.background.paper},contents:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:e.spacing(1)},body:{"& .MuiCollapse-wrapperInner":{transform:"translateY(-48px)"}},statusMessage:{color:e.palette.text.secondary,fontWeight:"bold"},nameTag:{"&.isFirst":{marginLeft:e.spacing(.5)},"&:not(.isFirst)":{"&:before":{color:e.palette.text.secondary,content:'","',marginRight:e.spacing(.5)},"&.isLast:before":{content:'"&"',marginLeft:e.spacing(.5)}}}})}))(kn)),jn=function(e){Object(W.a)(n,e);var t=Object(B.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(D.a)(n,[{key:"render",value:function(){return i.a.createElement(ue.a,{container:!0,spacing:4,className:"Game-field"},i.a.createElement(ue.a,{item:!0,xs:12,md:5,container:!0,spacing:2,className:"Current-word"},i.a.createElement(ue.a,{item:!0,xs:12,component:G.a,variant:"h5"},i.a.createElement(I.a,{i18nKey:"GAME.COMMON.WORD"},"Word")),this.props.leftCol),i.a.createElement(ue.a,{item:!0,xs:12,md:7,container:!0,spacing:2,className:"Current-hints"},i.a.createElement(ue.a,{item:!0,xs:12,component:G.a,variant:"h5"},i.a.createElement(I.a,{i18nKey:"GAME.COMMON.PLAYER_HINTS"},"Hints")),this.props.rightCol))}}]),n}(i.a.Component),Nn=n(302),An=n(294),Gn=n(295),wn=function(e){Object(W.a)(n,e);var t=Object(B.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(D.a)(n,[{key:"render",value:function(){var e=this.props,t=e.game,n=e.submittedHints,a=e.resetHint,r=e.submitHint,o=e.toggleDuplicate,c=e.i18n,s=je(t),l=s.currentRound,u=s.currentUser,m=s.isGuesser,d=s.isRoundHost,p=l.hints.map((function(e){var s=e.hint,p="",h=u&&u.id===e.authorId,g=Ce(t,e.authorId)||{name:"?",id:"?"},f=h?c.t("COMMON.ME","Me"):g.name;n&&h&&n[e.id]&&(n[e.id].reset?p=n[e.id].hint:s||(s=n[e.id].hint));var E=!s||h,y=b.HintWriting===t.phase&&!s&&h,O=b.HintWriting===t.phase&&h&&!y&&!t.$isTutorial,v=b.HintComparing===t.phase&&d,T=b.HintWriting===t.phase&&!E||b.HintComparing===t.phase&&(m||!u),C=[b.HintComparing,b.Guessing].includes(t.phase)&&(m||!u)&&e.isDuplicate;return t.$isTutorial&&h&&(p=mt[l.word][0]),i.a.createElement(Wt,{key:e.id,hint:s,author:f,color:g.color,duplicate:e.isDuplicate,showCross:C,showPencil:!y&&!s,showCheck:T,submitHint:y&&r?function(t){return r(e.id,t)}:void 0,defaultValue:p},O&&a&&i.a.createElement(A.a,{color:"primary",onClick:function(){return a(e.id,s)}},i.a.createElement(cn.a,null)),v&&o&&i.a.createElement(Nn.a,{icon:i.a.createElement(An.a,null),checkedIcon:i.a.createElement(Gn.a,null),checked:e.isDuplicate||!1,onChange:function(){return o(e.id)}}))}));return i.a.createElement(i.a.Fragment,null,p)}}]),n}(i.a.Component),Rn=Object(ce.a)()(wn),Mn=function(e){Object(W.a)(n,e);var t=Object(B.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(D.a)(n,[{key:"render",value:function(){var e=this.props,t=e.show,n=e.endPhase,a=e.actionRequiredFrom,r=e.classes,o=e.i18n,c=function(e){var t=e.join(", "),n=t.lastIndexOf(",");return n>=0&&(t=t.substring(0,n)+" &"+t.substring(n+1,t.length)),t}(a.map((function(e){return e.name})));if(!t)return null;return i.a.createElement(ue.a,{item:!0,xs:12,className:r.root},i.a.createElement(w.a,{variant:"outlined",size:"small",onClick:function(){window.confirm(o.t("GAME.COMMON.END_PHASE_CONFIRM","Are you sure?"))&&n()}},i.a.createElement(I.a,{i18nKey:"GAME.COMMON.END_PHASE",tOptions:{playerList:c}},"Skip to next phase")))}}]),n}(i.a.Component),Sn=Object(ce.a)()(Object(H.a)((function(e){return Object(K.a)({root:{opacity:.5}})}))(Mn)),Pn=function(e){Object(W.a)(n,e);var t=Object(B.a)(n);function n(e){var a;return Object(U.a)(this,n),(a=t.call(this,e)).state={submittedHints:{}},a._isMounted=!1,a.submitHint=a.submitHint.bind(Object(ae.a)(a)),a.resetHint=a.resetHint.bind(Object(ae.a)(a)),a.forceEndPhase=a.forceEndPhase.bind(Object(ae.a)(a)),a}return Object(D.a)(n,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"submitHint",value:function(){var e=Object(ne.a)(te.a.mark((function e(t,n){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState((function(e){return e.submittedHints[t]={hint:n},{submittedHints:e.submittedHints}})),!this.props.game.$isTutorial){e.next=4;break}return rt(n),e.abrupt("return");case 4:return e.next=6,We.submitHint(this.props.game.id,t,n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"resetHint",value:function(){var e=Object(ne.a)(te.a.mark((function e(t,n){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState((function(e){return e.submittedHints[t]={hint:n,reset:!0},{submittedHints:e.submittedHints}})),e.next=3,We.resetHint(this.props.game.id,t);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"forceEndPhase",value:function(){var e=Object(ne.a)(te.a.mark((function e(){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We.endHintPhase(this.props.game.id);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.game,n=this.state.submittedHints,a=je(t),r=a.currentRound,o=a.currentUser,c=a.guesser,s=a.isGuesser,l=a.isGameHost,u=a.currentWord,m=!!s||r.hints.some((function(e){return e.authorId===(null===o||void 0===o?void 0:o.id)&&!!e.hint}));return i.a.createElement(jn,{leftCol:[i.a.createElement(Zt,{word:u,guesser:c,isGuesser:s,key:"1"}),i.a.createElement(Sn,{show:l&&m&&!t.isTwoPlayerVariant&&!t.$isTutorial,endPhase:function(){return e.forceEndPhase()},actionRequiredFrom:t.actionRequiredFrom,key:"2"}),i.a.createElement(Jt,{game:t,key:"tutorial"})],rightCol:i.a.createElement(Rn,{game:t,submittedHints:n,submitHint:this.submitHint,resetHint:this.resetHint})})}}]),n}(i.a.Component),Ln=function(e){Object(W.a)(n,e);var t=Object(B.a)(n);function n(e){var a;return Object(U.a)(this,n),(a=t.call(this,e))._isMounted=!1,a.toggleDuplicate=a.toggleDuplicate.bind(Object(ae.a)(a)),a.showHints=a.showHints.bind(Object(ae.a)(a)),a}return Object(D.a)(n,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"toggleDuplicate",value:function(){var e=Object(ne.a)(te.a.mark((function e(t){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.game.$isTutorial){e.next=3;break}return it(this.props.game,t),e.abrupt("return");case 3:return e.next=5,We.toggleDuplicateHint(this.props.game.id,t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"showHints",value:function(){var e=Object(ne.a)(te.a.mark((function e(){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.game.$isTutorial){e.next=3;break}return rt(),e.abrupt("return");case 3:return e.next=5,We.showHints(this.props.game.id);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.game,n=je(t),a=n.guesser,r=n.isGuesser,o=n.isRoundHost,c=n.isGameHost,s=n.currentWord,l=a.name,u=[i.a.createElement(Rn,{game:t,toggleDuplicate:this.toggleDuplicate})];return o&&u.push(i.a.createElement(ue.a,{item:!0,xs:12,component:G.a,variant:"subtitle1",key:"info"},i.a.createElement(I.a,{i18nKey:"GAME.COMPARING.INFO"},"Mark invalid hints")),i.a.createElement(ue.a,{item:!0,xs:12,key:"button"},i.a.createElement(w.a,{variant:"contained",color:"primary",onClick:this.showHints,className:"submitBtn"},i.a.createElement(I.a,{i18nKey:"GAME.COMPARING.BUTTON"},{guesserName:l}," can start!")))),i.a.createElement(jn,{leftCol:[i.a.createElement(Zt,{word:s,guesser:a,isGuesser:r,key:"1"}),i.a.createElement(Sn,{show:c&&!o&&!t.isTwoPlayerVariant&&!t.$isTutorial,endPhase:function(){return e.showHints()},actionRequiredFrom:t.actionRequiredFrom,key:"2"}),t.$isTutorial&&1===t.round?i.a.createElement(w.a,{onClick:function(){rt()},className:"tutorialBtn",key:"tutorialBtn"},i.a.createElement(I.a,{i18nKey:"TUTORIAL.CONTINUE"},"Continue")):i.a.createElement("span",null),i.a.createElement(Jt,{game:t,key:"tutorial"})],rightCol:u})}}]),n}(i.a.Component),xn=function(e){Object(W.a)(n,e);var t=Object(B.a)(n);function n(e){var a;return Object(U.a)(this,n),(a=t.call(this,e))._isMounted=!1,a.guess=a.guess.bind(Object(ae.a)(a)),a}return Object(D.a)(n,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"guess",value:function(){var e=Object(ne.a)(te.a.mark((function e(t){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.game.$isTutorial){e.next=3;break}return rt(t),e.abrupt("return");case 3:return e.next=5,We.guess(this.props.game.id,t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.game,n=je(t),a=n.guesser,r=n.isGuesser,o=n.isGameHost,c=n.currentWord;return i.a.createElement(jn,{leftCol:[i.a.createElement(Zt,{word:c,guesser:a,isGuesser:r,isGuessingPhase:!0,submitGuess:r?this.guess:void 0,key:"1"}),i.a.createElement(Sn,{show:o&&!r&&!t.isTwoPlayerVariant&&!t.$isTutorial,endPhase:function(){return e.guess("")},actionRequiredFrom:t.actionRequiredFrom,key:"2"}),i.a.createElement(Jt,{game:t,key:"tutorial"})],rightCol:i.a.createElement(Rn,{game:t})})}}]),n}(i.a.Component),_n=function(e){Object(W.a)(n,e);var t=Object(B.a)(n);function n(e){var a;return Object(U.a)(this,n),(a=t.call(this,e))._isMounted=!1,a.resolveRound=a.resolveRound.bind(Object(ae.a)(a)),a}return Object(D.a)(n,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"resolveRound",value:function(){var e=Object(ne.a)(te.a.mark((function e(){var t,n=arguments;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!(n.length>0&&void 0!==n[0])||n[0],!this.props.game.$isTutorial){e.next=4;break}return rt(t?"true":void 0),e.abrupt("return");case 4:return e.next=6,We.resolveRound(this.props.game.id,t);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.game,n=je(t),a=n.currentRound,r=n.guesser,o=n.isGuesser,c=n.isRoundHost,s=n.isGameHost,l=n.currentWord,u=[];return u.push(i.a.createElement(Zt,{key:"wordCard",word:l,guesser:r,isGuesser:o,guess:a.guess,guessedRight:a.correct})),a.correct?u.push(i.a.createElement(ue.a,{item:!0,xs:12,key:"button1"},i.a.createElement(w.a,{variant:"contained",color:"primary",onClick:function(){return e.resolveRound(!0)}},i.a.createElement(I.a,{i18nKey:"GAME.SOLUTION.CONTINUE"},"Continue")))):c?u.push(i.a.createElement(ue.a,{item:!0,xs:12,key:"button1"},i.a.createElement(w.a,{variant:"contained",onClick:function(){return e.resolveRound(!0)},className:"submitBtn correct"},i.a.createElement(I.a,{i18nKey:"GAME.SOLUTION.CONTINUE_RIGHT"},"Correct!"))),i.a.createElement(ue.a,{item:!0,xs:12,key:"button2"},i.a.createElement(w.a,{variant:"contained",color:"primary",onClick:function(){return e.resolveRound(!1)},className:"submitBtn wrong"},i.a.createElement(I.a,{i18nKey:"GAME.SOLUTION.CONTINUE_WRONG"},"Wrong!")))):s&&!t.isTwoPlayerVariant&&u.push(i.a.createElement(Sn,{show:s&&!t.isTwoPlayerVariant&&!t.$isTutorial,endPhase:function(){return e.resolveRound(!1)},actionRequiredFrom:t.actionRequiredFrom,key:"endPhase"})),t.$isTutorial&&(a.correct||c||u.push(i.a.createElement(w.a,{onClick:function(){rt()},className:"tutorialBtn",key:"tutorialBtn"},i.a.createElement(I.a,{i18nKey:"TUTORIAL.CONTINUE"},"Continue"))),u.push(i.a.createElement(Jt,{game:t,key:"tutorial"}))),i.a.createElement(jn,{leftCol:u,rightCol:i.a.createElement(Rn,{game:t})})}}]),n}(i.a.Component),Kn=n(163),Hn=function(e){Object(W.a)(n,e);var t=Object(B.a)(n);function n(e){var a;return Object(U.a)(this,n),(a=t.call(this,e)).canvasRef=void 0,a.confettiCannon=void 0,a.canvasRef=i.a.createRef(),e.getTrigger(a.triggerConfetti.bind(Object(ae.a)(a))),a}return Object(D.a)(n,[{key:"getConfettiCannon",value:function(){return!this.confettiCannon&&this.canvasRef.current&&(this.confettiCannon=Object(Kn.a)(this.canvasRef.current,{resize:!0})),this.confettiCannon}},{key:"triggerConfetti",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.getConfettiCannon();if(n){var a=Math.floor(60*t)+10,r={colors:e,startVelocity:70,particleCount:a,spread:60};n(Object(l.a)(Object(l.a)({},r),{},{angle:125,origin:{x:1,y:1}})),n(Object(l.a)(Object(l.a)({},r),{},{angle:55,origin:{x:0,y:1}}))}}},{key:"render",value:function(){var e=this.props.classes;return i.a.createElement("div",{className:e.root},i.a.createElement("canvas",{ref:this.canvasRef}))}}]),n}(i.a.Component),Un=Object(H.a)((function(e){return Object(K.a)({root:{position:"fixed",top:0,bottom:0,left:0,right:0,pointerEvents:"none",zIndex:9999,"& canvas":{height:"100%",width:"100%"}}})}))(Hn),Dn=n(164),Wn=n.n(Dn),Bn=function(e){Object(W.a)(n,e);var t=Object(B.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(D.a)(n,[{key:"render",value:function(){var e=this.props,t=e.takeOverRequests,n=e.onAccept,a=e.onDeny,r=e.classes,o=t.map((function(e){var t=e.newPlayer.name,o=e.oldPlayerName,c=e.joinAsNewPlayer?i.a.createElement(I.a,{i18nKey:"GAME.JOINING.JOIN_AS_NEW"},{newPlayerName:t}," wants to join"):i.a.createElement(I.a,{i18nKey:"GAME.JOINING.TAKEOVER_REQUEST"},{newPlayerName:t}," wants to take over ",{oldPlayerName:o}),s=i.a.createElement(I.a,{i18nKey:e.accepted?"GAME.JOINING.ACCEPTED":e.denied?"GAME.JOINING.DENIED":"GAME.JOINING.OPEN"},"open");return i.a.createElement(V.a,{key:e.id,disabled:e.accepted||e.denied,onClick:function(){return t=e.id,void n(t);var t},button:!0},i.a.createElement($.a,{id:e.id,primary:c,secondary:s}),i.a.createElement(le.a,{className:r.secondaryAction},i.a.createElement(A.a,{onClick:function(){return t=e.id,void a(t);var t}},e.accepted||e.denied?i.a.createElement(de.a,null):i.a.createElement(Wn.a,null))))}));return i.a.createElement(ue.a,{item:!0,xs:12,className:r.root},i.a.createElement(G.a,{variant:"h5"},i.a.createElement(I.a,{i18nKey:"GAME.JOINING.REQUESTS"},"Joining requests")),i.a.createElement(q.a,null,o))}}]),n}(i.a.Component),Fn=Object(H.a)((function(e){return Object(K.a)({root:{margin:e.spacing(4),padding:e.spacing(2)},secondaryAction:{marginRight:e.spacing(-2)}})}))(Bn),Yn=function(e){Object(W.a)(n,e);var t=Object(B.a)(n);function n(){var e;Object(U.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={currentPlayer:{id:localStorage.getItem("playerId")||"",name:localStorage.getItem("playerName")||"",color:localStorage.getItem("playerColor")||""},joinGameDialogOpen:!1},e._isMounted=!1,e}return Object(D.a)(n,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e,t,n=this,a=this.props,r=a.game,o=a.setTheme,c=a.classes,s=a.i18n,u=this.state,m=u.currentPlayer,d=u.joinGameDialogOpen;if(r.$isTutorial||[b.Init,b.Preparation,b.End].includes(r.phase))return null;var p=[],h=Ne(r),g=function(){var e=Object(ne.a)(te.a.mark((function e(t){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=12;break}if(m.id){e.next=3;break}return e.abrupt("return");case 3:return o&&m.color&&o(m.color),e.prev=4,e.next=7,We.requestJoining(r.id,t,m);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.log(e.t0);case 12:n.setState({joinGameDialogOpen:!1});case 13:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m;e&&(localStorage.setItem("playerName",e.name),e.color&&localStorage.setItem("playerColor",e.color)),n.setState({joinGameDialogOpen:!0,currentPlayer:e})};if(h){if(r.joiningRequests.length){var E=r.joiningRequests.filter((function(e){return[r.hostId,e.oldPlayerId].includes(h.id)}));e=E.length>0&&i.a.createElement(Fn,{takeOverRequests:E,onAccept:function(e){We.handleJoining(r.id,e)},onDeny:function(e){We.handleJoining(r.id,e,!0)}})}}else{var y=r.joiningRequests.findIndex((function(e){return e.newPlayer.id===localStorage.getItem("playerId")&&!e.denied&&!e.accepted}))>-1,O=localStorage.getItem("playerName")||"",v=Object(l.a)({color:Qe(localStorage.getItem("playerColor"),r.players.map((function(e){return e.color})))},m);p=r.players.map((function(e){return{val:e.id,displayVal:s.t("GAME.JOINING.REQUEST_TAKEOVER",{playerName:e.name})}})),r.players.length>3&&p.unshift({val:Ae(),displayVal:s.t("GAME.JOINING.NEW_PLAYER")}),t=O?i.a.createElement(ue.a,{item:!0,xs:12,className:c.button},i.a.createElement(w.a,{variant:"outlined",onClick:function(){return f()},disabled:y},i.a.createElement(I.a,{i18nKey:y?"GAME.JOINING.REQUESTED_JOIN":"GAME.LOBBY.JOIN"},"Join"))):i.a.createElement(ue.a,{item:!0,xs:12,className:c.button},i.a.createElement(Ft,{currentPlayer:v,addPlayer:function(e){return f(e)},updatePlayer:function(e){n.setState({currentPlayer:e})}}))}return t||e?i.a.createElement(re.a,null,e,t,!h&&i.a.createElement(J,{tKey:"GAME.LOBBY.JOIN",open:d,onClose:function(e){g(e)},selectedValue:"",possibleValues:p})):null}}]),n}(i.a.Component),qn=Object(ce.a)()(Object(H.a)((function(e){return Object(K.a)({button:{margin:e.spacing(1),marginTop:e.spacing(8),"&+$button":{marginTop:e.spacing(1)}}})}))(Yn)),Vn=function(e){Object(W.a)(n,e);var t=Object(B.a)(n);function n(){var e;Object(U.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={triggerConfetti:function(){}},e._isMounted=!1,e._notificationKeys=[],e}return Object(D.a)(n,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.setGameAfterUpdate=this.setGameAfterUpdate.bind(this),this.triggerConfetti=this.triggerConfetti.bind(this),this._setupConnection=this._setupConnection.bind(this),this.showNotification=this.showNotification.bind(this),this._setupConnection(),Ue.on(v.Reconnect,this._setupConnection)}},{key:"componentDidUpdate",value:function(e,t,n){e.gameId!==this.props.gameId&&(Ue.emit(y.Unsubscribe,se(e.gameId)),this._setupConnection())}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this._unsubscribeFromGame(),Ue.off(v.Reconnect,this._setupConnection)}},{key:"_setupConnection",value:function(){var e=this;this._unsubscribeFromGame();var t=this.props.gameId;Ue.emit(y.Subscribe,se(t),(function(t){null!==t&&setTimeout((function(){return e._setupConnection()}),1e3)})),this.loadGame(),this._subscribeToGame()}},{key:"loadGame",value:function(){var e=Object(ne.a)(te.a.mark((function e(){var t,n;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("tutorial"!==(t=this.props.gameId)){e.next=5;break}n=tt(),e.next=8;break;case 5:return e.next=7,We.loadGame(t);case 7:n=e.sent;case 8:n&&this.setGameAfterUpdate(n);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_subscribeToGame",value:function(){"tutorial"===this.props.gameId?(De.on(y.Update,this.setGameAfterUpdate),De.on(y.Confetti,this.triggerConfetti)):(Ue.on(y.Update,this.setGameAfterUpdate),Ue.on(y.Confetti,this.triggerConfetti),Ue.on(y.Notification,this.showNotification))}},{key:"_unsubscribeFromGame",value:function(){Ue.emit(y.Unsubscribe,se(this.props.gameId)),Ue.off(y.Update,this.setGameAfterUpdate),Ue.off(y.Confetti,this.triggerConfetti),Ue.off(y.Notification,this.showNotification),De.off(y.Update,this.setGameAfterUpdate),De.off(y.Confetti,this.triggerConfetti)}},{key:"setGameAfterUpdate",value:function(e){var t=this;this._isMounted&&this.props.gameId===e.id&&(document.title="".concat(e.name," - ").concat(this.props.i18n.t("APP_TITLE","Just one word!")),this.setState({currentGame:e}),this._notificationKeys.length&&(this._notificationKeys.forEach((function(e){t.props.closeSnackbar(e)})),this._notificationKeys=[]))}},{key:"triggerConfetti",value:function(e){var t=this.state.currentGame,n=1;t&&t.phase===b.End&&(n=t.rounds.filter((function(e){return e.correct||e.countAnyway})).length/t.rounds.length),this.state.triggerConfetti(e,n)}},{key:"showNotification",value:function(e){var t=this;if(!e.audience||e.audience.includes(Ae())){var n,a=1===(null===e||void 0===e||null===(n=e.audience)||void 0===n?void 0:n.length),r=this.props.enqueueSnackbar(i.a.createElement(I.a,{i18nKey:e.transKey,tOptions:e.tOptions},e.transKey),{variant:e.variant,onClick:function(){t.props.closeSnackbar(r)},preventDuplicate:!0,persist:a});a&&this._notificationKeys.push(r)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.setTheme,a=t.classes,r=this.state.currentGame;if(!r)return null;return i.a.createElement(re.a,{maxWidth:"lg",className:a.root},function(){switch(r.phase){case b.Init:return i.a.createElement(Qt,{game:r,setTheme:n});case b.Preparation:return i.a.createElement(sn,{game:r});case b.HintWriting:return i.a.createElement(Pn,{game:r});case b.HintComparing:return i.a.createElement(Ln,{game:r});case b.Guessing:return i.a.createElement(xn,{game:r});case b.Solution:return i.a.createElement(_n,{game:r});case b.End:return i.a.createElement(En,{game:r,triggerConfetti:e.triggerConfetti})}}(),i.a.createElement(qn,{game:r,setTheme:n}),r.$isTutorial&&i.a.createElement(ue.a,{item:!0,xs:12,className:a.button},i.a.createElement(w.a,{variant:"outlined",onClick:function(){nt(),e.loadGame()}},i.a.createElement(I.a,{i18nKey:"TUTORIAL.RESTART"},"Restart tutorial"))),i.a.createElement(In,{game:r}),i.a.createElement(Un,{colors:ze,getTrigger:function(t){return e.setState({triggerConfetti:t})}}))}}]),n}(i.a.Component),$n=Object(ce.a)()(Object(E.b)(Object(H.a)((function(e){return Object(K.a)({root:{flex:"1 0 auto",display:"flex",flexDirection:"column",alignItems:"center"},button:{margin:e.spacing(1),marginTop:e.spacing(4)}})}))(Vn))),Jn=n(296),zn=n(297);!function(e){e.Connected="CONNECTED",e.Disconnected="DISCONNECTED",e.Connecting="CONNECTING"}(vn||(vn={}));var Qn=function(e){Object(W.a)(n,e);var t=Object(B.a)(n);function n(){var e;Object(U.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={status:vn.Connecting},e}return Object(D.a)(n,[{key:"componentDidMount",value:function(){for(var e=this,t=this.props.socket,n=function(){var n=Object(s.a)(r[a],2)[1];t.on(n,(function(t){switch(n){case v.Connect:case v.Reconnect:case v.Ping:case v.Pong:e.setState({status:vn.Connected});break;case v.ConnectError:case v.ConnectTimeout:case v.Disconnect:case v.Error:case v.ReconnectFailed:case v.ReconnectError:e.setState({status:vn.Disconnected});break;case v.Connecting:case v.ReconnectAttempt:case v.Reconnecting:e.setState({status:vn.Connecting})}}))},a=0,r=Object.entries(v);a<r.length;a++)n()}},{key:"render",value:function(){var e=this.props.classes,t=this.state.status;return i.a.createElement("div",{className:[e.root,e[t]].join(" ")},t===vn.Connected&&i.a.createElement(Jn.a,null),t===vn.Disconnected&&i.a.createElement(zn.a,null),t===vn.Connecting&&i.a.createElement(Q.a,{color:"inherit",size:24}),i.a.createElement(ie.a,{marginLeft:1.5},i.a.createElement(I.a,{i18nKey:"CONNECTION."+t},t)))}}]),n}(i.a.Component),Xn=Object(H.a)((function(e){var t;return Object(K.a)((t={root:{position:"fixed",bottom:80,left:0,borderRadius:" 0 5px 5px 0",padding:e.spacing(1,2),transition:"transform ease-in 300ms",transform:"translateX(0)",color:"white",display:"flex",alignItems:"center",fontSize:"smaller"}},Object(C.a)(t,vn.Connected,{background:e.palette.success.dark,transform:"translateX(-100%)",transitionDelay:"1s"}),Object(C.a)(t,vn.Disconnected,{background:e.palette.error.dark}),Object(C.a)(t,vn.Connecting,{background:e.palette.info.main}),t))}))(Qn),Zn=Object(p.a)({root:Object(l.a)(Object(l.a)({},T.rootSizing),{},{textAlign:"center",display:"flex",flexDirection:"column"}),loading:Object(l.a)({},T.flexCenter)}),ea=function(){var e=Object(r.useState)(localStorage.getItem("playerColor")),t=Object(s.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(localStorage.getItem("darkTheme")||a.AUTO),p=Object(s.a)(c,2),b=p[0],y=p[1],O=Zn(),v=Object(f.a)("(prefers-color-scheme: dark)");b===a.BRIGHT?v=!1:b===a.DARK&&(v=!0);var C=i.a.useMemo((function(){return Object(h.a)(function(e,t){return{palette:{primary:{main:e||"#43a047"},secondary:{main:"#d32f2f"},background:{default:t?"#222222":"#fff8f5"},type:t?"dark":"light"},breakpoints:{values:{xs:0,sm:600,md:720,lg:960,xl:1280}},typography:{h2:Object(l.a)({},T.handwriting),h5:Object(l.a)(Object(l.a)({},T.handwriting),{},{paddingTop:8,textTransform:"capitalize"})},overrides:{MuiButton:{outlined:{textTransform:"none"}}}}}(n,v))}),[n,v]);return i.a.createElement(g.a,{theme:C},i.a.createElement(r.Suspense,{fallback:i.a.createElement(Z,{className:O.root})},i.a.createElement(u.a,null,i.a.createElement(E.a,{maxSnack:2,anchorOrigin:{vertical:"bottom",horizontal:"center"}},i.a.createElement(d.a,{square:!0,elevation:0,className:O.root,style:{backgroundColor:C.palette.background.default}},i.a.createElement(z,{userTheme:b,applyUserTheme:function(e){y(e),localStorage.setItem("darkTheme",e)}}),i.a.createElement(m.c,null,i.a.createElement(m.a,{path:"/:gameId",component:function(e){return i.a.createElement($n,{gameId:e.match.params.gameId,setTheme:o})}}),i.a.createElement(m.a,{children:i.a.createElement(Tt,null)})),i.a.createElement(Xn,{socket:Ue}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(ea,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[181,1,2]]]);