(this.webpackJsonpboardgame_app=this.webpackJsonpboardgame_app||[]).push([[0],{104:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=104},107:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),c=a.n(o),i=(a(79),a(33)),l=a(11),s=(a(80),a(12)),u=a(13),m=a(16),h=a(15),d=a(14),p=a(138),v=a(139),b=a(140),g=a(141),y=a(143),f=a(147),E=a(142),j=a(144),O=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.word,t=this.props.guesser;return r.a.createElement("div",{className:"Word-card"},e,t&&r.a.createElement("span",{className:"Author-tag",style:{color:this.props.color}},t," muss raten"))}}]),a}(r.a.Component),k=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e={backgroundColor:this.props.color},t={borderTopColor:this.props.color};return r.a.createElement("div",{className:"pencil"},r.a.createElement("div",{className:"body",style:e}),r.a.createElement("div",{className:"nib",style:t}))}}]),a}(r.a.Component),C=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.hint,t=this.props.color,a={color:t},n=this.props.author,o=this.props.showPencil||!this.props.hint,c=["Word-hint"];this.props.duplicate&&c.push("Word-hint-duplicate"),e&&e.length>20?c.push("Word-hint-huge"):e&&e.length>14&&c.push("Word-hint-long");var i=c.join(" ");return r.a.createElement("div",{className:i,style:a},e,o&&r.a.createElement(k,{color:t}),n&&r.a.createElement("span",{className:"Author-tag"},n))}}]),a}(r.a.Component),w=a(146),P=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={value:""},n.handleChange=n.handleChange.bind(Object(m.a)(n)),n.submitHint=n.submitHint.bind(Object(m.a)(n)),n.keyPressed=n.keyPressed.bind(Object(m.a)(n)),n}return Object(u.a)(a,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"submitHint",value:function(){this.props.submitHint(this.state.value),this.setState({value:""})}},{key:"keyPressed",value:function(e){"Enter"===e.key&&this.submitHint()}},{key:"render",value:function(){return r.a.createElement("div",{className:"Word-hint-input"},r.a.createElement(w.a,{required:!0,label:this.props.label||"Wort-Hinweis",value:this.state.value,onChange:this.handleChange,onKeyPress:this.keyPressed}),r.a.createElement(p.a,{variant:"contained",color:"primary",disabled:!this.state.value,onClick:this.submitHint},this.props.buttonText||"Hinweis abschicken"))}}]),a}(r.a.Component),N=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.game;return r.a.createElement("div",{className:"Game-progress"},"Runde: ",e.round+1,"/",e.words.length,", Richtige: ",e.correctWords.length,", Falsche: ",e.wrongWords.length)}}]),a}(r.a.Component),I=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).currentUserId=localStorage.getItem("playerId")||"",n.submitHint=n.submitHint.bind(Object(m.a)(n)),n.showHints=n.showHints.bind(Object(m.a)(n)),n.guess=n.guess.bind(Object(m.a)(n)),n.state={},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){}},{key:"submitHint",value:function(e){var t=S(this.props.game,this.currentUserId);if(t){var a={hint:e,author:t};fetch("".concat(J,"/").concat(this.props.game.id,"/hint"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({hint:a})}).catch(console.log)}}},{key:"showHints",value:function(){fetch("".concat(J,"/").concat(this.props.game.id,"/showHints"),{method:"PUT"}).catch(console.log)}},{key:"guess",value:function(e){fetch("".concat(J,"/").concat(this.props.game.id,"/guess"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({guess:e})}).catch(console.log)}},{key:"render",value:function(){var e=this.props.game,t=S(e,this.currentUserId),a=e.currentGuesser?e.currentGuesser:{name:"?",id:"?"},n=t&&t.id===a.id,o=2===e.phase,c=3===e.phase,i=n?"?":e.currentWord||"",l=e.hints.map((function(e){var a="?";return c?a=n&&e.isDuplicate?"LEIDER DOPPELT":e.hint:o?n||(a=e.hint):t&&t.id===e.author.id?a=e.hint:e.hint||(a=""),r.a.createElement(C,{key:e.author.id,hint:a,color:e.author.color,duplicate:e.isDuplicate,author:e.author.name})}));return r.a.createElement("div",{className:"Game-field"},r.a.createElement("div",{className:"Current-word"},r.a.createElement(N,{game:e}),r.a.createElement(O,{word:i,guesser:a.name,color:a.color}),c&&n&&r.a.createElement(P,{submitHint:this.guess,label:"Rateversuch",buttonText:"Jetzt raten"})),r.a.createElement("div",{className:"Current-hints"},!n&&r.a.createElement(P,{submitHint:this.submitHint}),r.a.createElement("div",{className:"WordHint-list"},l),o&&!n&&r.a.createElement(p.a,{variant:"contained",color:"primary",onClick:this.showHints},a.name+" kann losraten!")))}}]),a}(r.a.Component);function S(e,t){return e.players.find((function(e){return e.id===t}))}var G=a(84).default,W=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleChange=n.handleChange.bind(Object(m.a)(n)),n.setRandomColor=n.setRandomColor.bind(Object(m.a)(n)),n.addPlayer=n.addPlayer.bind(Object(m.a)(n)),n}return Object(u.a)(a,[{key:"handleChange",value:function(e){var t={id:"",name:this.props.name,color:this.props.color};"name"===e.target.name?t.name=e.target.value:"color"===e.target.name&&(t.color=e.target.value),this.props.updatePlayer(t)}},{key:"setRandomColor",value:function(){var e={id:"",name:this.props.name,color:H()};this.props.updatePlayer(e)}},{key:"addPlayer",value:function(){var e={id:"",name:this.props.name,color:this.props.color};this.props.addPlayer(e)}},{key:"render",value:function(){return r.a.createElement("div",{className:"New-player"},r.a.createElement(w.a,{required:!0,label:"Spielername",name:"name",value:this.props.name,onChange:this.handleChange}),r.a.createElement(w.a,{required:!0,label:"Spielerfarbe",placeholder:"Html-Farbcode",name:"color",value:this.props.color,onChange:this.handleChange}),r.a.createElement(p.a,{variant:"contained",onClick:this.setRandomColor},"Zufallsfarbe"),r.a.createElement(p.a,{variant:"contained",color:"primary",disabled:!this.props.name,onClick:this.addPlayer},"Mitspielen"))}}]),a}(r.a.Component);function H(){return"#"+new G({dictionary:["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"]})(6)}var T=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={name:localStorage.getItem(F)||"",color:localStorage.getItem(L)||H()||"black"},n.addPlayer=n.addPlayer.bind(Object(m.a)(n)),n.setPlayerProps=n.setPlayerProps.bind(Object(m.a)(n)),n.startGame=n.startGame.bind(Object(m.a)(n)),n}return Object(u.a)(a,[{key:"setPlayerProps",value:function(e){this.setState({name:e.name,color:e.color||""})}},{key:"addPlayer",value:function(e){var t=this,a=localStorage.getItem(x)||"";e.id=a,fetch("".concat(J,"/").concat(this.props.game.id,"/addPlayer"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({player:e})}).then((function(e){return e.json()})).then((function(e){t.setLocalPlayer(e.player),t.setState({color:H()||"black",name:""})})).catch(console.log)}},{key:"setLocalPlayer",value:function(e){localStorage.setItem(x,e.id),localStorage.setItem(F,e.name),e.color&&localStorage.setItem("playerColor",e.color)}},{key:"startGame",value:function(){fetch("".concat(J,"/").concat(this.props.game.id,"/start"),{method:"PUT"}).then((function(e){})).catch(console.log)}},{key:"render",value:function(){var e=this.props.game.players.map((function(e){return r.a.createElement(C,{key:e.id,hint:e.name,color:e.color})})),t=localStorage.getItem(x)||"",a=!!t&&this.props.game.host===t,n=!!t&&this.props.game.players.findIndex((function(e){return e.id===t}))>-1;return r.a.createElement("div",{className:"Game-lobby"},r.a.createElement("div",{className:"New-player"},!n&&r.a.createElement(W,{name:this.state.name,color:this.state.color,updatePlayer:this.setPlayerProps,addPlayer:this.addPlayer}),a&&r.a.createElement(p.a,{variant:"contained",color:"primary",disabled:this.props.game.players.length<3,onClick:this.startGame},"Spiel beginnen")),r.a.createElement("div",{className:"Player-list"},e,r.a.createElement(C,{hint:this.state.name||"?",color:this.state.color,showPencil:!0})))}}]),a}(r.a.Component),U=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.game,t=e.correctWords.map((function(e){return r.a.createElement(O,{key:e,word:e})})),a=e.wrongWords.map((function(e){return r.a.createElement(O,{key:e,word:e})}));return r.a.createElement("div",{className:"Game-end-view"},r.a.createElement("div",{className:"Correct-words"},r.a.createElement("h2",null,"Richtig (",e.correctWords.length,")"),t),r.a.createElement("div",{className:"Wrong-words"},r.a.createElement("h2",null,"Falsch (",e.wrongWords.length,")"),a))}}]),a}(r.a.Component),D=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).currentUserId=localStorage.getItem("playerId")||"",n.allWords=["Ananas","Bauernhof","Clown","Dartscheibe","Elefant","Fussball"],n._interval=void 0,n.createGame=n.createGame.bind(Object(m.a)(n)),n.state={},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.props.gameId?(this.loadGame(),this._interval=setInterval(this.loadGame.bind(this),2e3)):(this.loadGames(),this._interval=setInterval(this.loadGames.bind(this),2e3))}},{key:"componentWillUnmount",value:function(){clearInterval(this._interval)}},{key:"loadGame",value:function(){var e=this,t=this.props.gameId;t&&(console.log(J),fetch("".concat(J,"/").concat(t)).then((function(e){return e.json()})).then((function(t){e.setState({currentGame:t.game})})).catch(console.log))}},{key:"loadGames",value:function(){var e=this;fetch("".concat(J,"/all")).then((function(e){return e.json()})).then((function(t){var a=t.games;a=a.filter((function(t){return 0===t.phase||e.currentUserId&&t.players.findIndex((function(t){return t.id===e.currentUserId}))>-1})),e.setState({allGames:a})})).catch(console.log)}},{key:"createGame",value:function(){var e={id:"",name:"",words:[],players:[],host:"1",round:0,phase:0,hints:[],correctWords:[],wrongWords:[]};e.words=this.allWords,fetch("".concat(J,"/add"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({game:e})}).then((function(e){console.log(e)})).catch(console.log)}},{key:"render",value:function(){var e,t,a=this.state.currentGame,n=localStorage.getItem("playerName");return a?e=0===a.phase?r.a.createElement(T,{game:a}):4===a.phase?r.a.createElement("div",null,r.a.createElement(p.a,{variant:"contained",color:"primary",onClick:this.createGame},"Neues Spiel"),r.a.createElement(U,{game:a})):r.a.createElement(I,{game:a}):(this.state.allGames&&(t=this.state.allGames.map((function(e){return r.a.createElement(i.b,{key:e.id,to:"/".concat(e.id)},"Spiele ".concat(e.id))}))),e=r.a.createElement(p.a,{variant:"contained",color:"primary",onClick:this.createGame},"Neues Spiel")),r.a.createElement("div",null,r.a.createElement(v.a,{position:"sticky"},r.a.createElement(b.a,null,r.a.createElement(i.b,{to:"/",className:"ButtonLink"},r.a.createElement(g.a,{edge:"start",color:"inherit","aria-label":"home"},r.a.createElement(E.a,null))),r.a.createElement(y.a,{variant:"h2",className:"appTitle"},"Nur ein Wort!"),n&&r.a.createElement(f.a,{label:n,icon:r.a.createElement(j.a,null)}))),e,t)}}]),a}(r.a.Component);var A=a(66),R=a(145),_="justone.okj.name"===window.location.hostname?":9001":":9000",J=window.location.protocol+"//"+window.location.hostname+_+"/api"+"/games",x="playerId",F="playerName",L="playerColor";var B=function(){var e=localStorage.getItem(L)||"#43a047",t=Object(A.a)({palette:{primary:{main:e},secondary:{main:"#3949ab"}}});return r.a.createElement(i.a,null,r.a.createElement(R.a,{theme:t},r.a.createElement("div",{className:"App"},r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/:gameId",component:function(e){return r.a.createElement(D,{gameId:e.match.params.gameId})}}),r.a.createElement(l.a,{children:r.a.createElement(D,null)})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},74:function(e,t,a){e.exports=a(107)},79:function(e,t,a){},80:function(e,t,a){}},[[74,1,2]]]);
//# sourceMappingURL=main.db24498d.chunk.js.map